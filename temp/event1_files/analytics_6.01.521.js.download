function ZAnalytic(){var s=function(){if(window.localStorage&&localStorage.getItem("__zi"))return info("ZAnalytic --> _getUID --> localStorage = "+localStorage.getItem("__zi")),localStorage.getItem("__zi");if(zGetCookie("zoanid"))return info("ZAnalytic --> _getUID --> zGetCookie(zoanid) = "+zGetCookie("zoanid")),zGetCookie("zoanid");var e=ME.getUserId();return info("ZAnalytic uid (system) = "+e),e};this.trackPageview=function(e){var t="";0<=(t=e&&e.url?e.url.replace(/(#|\?).*$/i,""):location.href.replace(/(#|\?).*$/i,"")).search(/^\//i)&&(t=window.location.origin+t),t+="#appid="+ZAPPID;var i=getPageType(t);"category"==i&&(window.zaConfig&&zaConfig.pageid&&(t+="&cateid="+zaConfig.pageid),window.cate_path&&(t+="&cate="+cate_path)),"article"==i&&(t+="&postid="+getArticleId(t),e?(e.catename&&(t+="&cate="+e.catename),e.cateid?t+="&cateid="+e.cateid:e.catename&&(t+="&cateid="+getCategoryId(e.catename)),e.topicid&&(t+="&topicid="+e.topicid.replace(/,$/gi,""))):window.zaConfig&&("1"!=zaConfig.pageid&&(t+="&cateid="+zaConfig.pageid),window.cate_path&&(t+="&cate="+cate_path),zaConfig.topicid&&(t+="&topicid="+zaConfig.topicid.replace(/,$/gi,"")))),t+="&type="+i;var o="https://log.news.zing.vn/Counter2.aspx?trackurl="+encodeURIComponent(t),a=s();a?o+="&uid="+a:(event("ZAnalytic - user hasnot gld",{label:"ANALYTIC"}),a=ME.getUserId());var n,r=zGetCookie("znews_mobile"),c=DBSESS.load("znews_znsid");if(!c){var d=(n=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:3&t|8).toString(16)}));DBSESS.insert("znews_znsid",d),c=d}o+="&ref="+encodeURIComponent(document.referrer),o+="&zab="+(null!=r?r:0),o+="&ts="+(new Date).getTime(),o+="&znsid="+c,CLICK_SOURCE&&(o+="&click="+CLICK_SOURCE);var l=document.createElement("img");l.setAttribute("src",o),l.setAttribute("style","position:absolute; top:-1px;left:-1px; width:1px;height:1px;"),l.setAttribute("width",1),l.setAttribute("height",1),document.body.appendChild(l),debug("ZAnalytics --> pageview tracked",o),debug(o)},this.trackEvent=function(e,t){var i="https://log.news.zing.vn/collect?appid="+ZAPPID+"&page="+getPageType()+"&vid="+s()+"&event="+e;t&&(i+="&value="+t),"article"==getPageType()&&(i+="&postid="+getArticleId()),"category"==getPageType()&&(i+="&cateid="+window.cate_path);var o=document.createElement("img");o.setAttribute("src",i),o.setAttribute("style","position:absolute; top:-1px;left:-1px;width: 1px;height:1px;"),o.setAttribute("width",1),o.setAttribute("height",1),document.body.appendChild(o),debug("ZAnalytics --> event tracked: "+e+(t?" = "+t:""),i)}}function Behaviour(){var e,o=-1,a="znEvent",t=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};this.track=function(e,t){if(!e)throw Error("No action or label provided");if(0<=o){if(!window.gtag)return void debug("Behavior --> track event --> no event setup...",_desc);var i={event_category:ZAPPID};t&&t.category&&(i.event_category=t.category),window.TESTGROUP&&TESTGROUP.isTestGroup?i.event_category="ABTest:"+i.event_category:window.TESTGROUP&&TESTGROUP.isControlGroup&&(i.event_category="ABControl:"+i.event_category),t&&t.label&&(i.event_label=t.label),t&&t.value&&(i.value=t.value),t&&t.isInteraction&&(i.non_interaction=!t.isInteraction),gtag("event",e,i),debug("Behavior --> track event: "+e,i),o++,DBSESS.insert(a,o)}},(e=DBSESS.load(a))?0<=(o=parseInt(e))?info("Behavior --> This is tracked session, event count = "+o):info("Behavior --> this session won't be tracked"):(t(1,1e4)<10||window.isDevMode||isTestMode||window.TESTGROUP&&(TESTGROUP.isControlGroup||TESTGROUP.isTestGroup)?(o=0,info("Behavior --> This is tracked session, event count = "+o)):info("Behavior --> this session won't be tracked"),DBSESS.insert(a,o))}if(window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),0<=document.referrer.search(/https:\/\/(.+\.)*news.zing.vn\//gi)){var CLICK_SOURCE=window.location.hash.match(/#[^&]+/gi);CLICK_SOURCE&&(0!=(CLICK_SOURCE=CLICK_SOURCE[0].replace("#","").replace(/\?.*$/i,"")).search(window.ZAPPID)&&(debug("Click source not valid"),CLICK_SOURCE=null),CLICK_SOURCE&&info("Click Source = #"+CLICK_SOURCE))}var BEHAVIOR=new Behaviour,za=new ZAnalytic;
//# sourceMappingURL=analytics-dist.js.map