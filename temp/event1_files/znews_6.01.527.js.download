function Queue(){var t=[],i=0;this.getLength=function(){return t.length-i},this.isEmpty=function(){return 0==t.length},this.enqueue=function(e){t.push(e)},this.dequeue=function(){if(0!=t.length){var e=t[i];return 2*++i>=t.length&&(t=t.slice(i),i=0),e}},this.peek=function(){return 0<t.length?t[i]:void 0},this.getAll=function(){return t}}function vietUni(e){return document.all||document.getElementById?(this.method=null==e||null==e?4:e,this):(alert("Xin loi, trinh duyet web cua ban khong cho phep dung VietTyping."),!1)}function vietTyper(){return this.value="",this.charMap=new vietUnicodeMap,this.ctrlChar="-",this.changed=0,this}function vietCharMap(){return this.vietChars=null,this.length=149,this.chrCache=new Array(20),this.indCache=new Array(20),this.cptr=0,this.caching=function(e,t){this.chrCache[this.cptr]=e,this.indCache[this.cptr++]=t,this.cptr%=20},this.vmap=[[7,7,7,8,8,8,9,10,11,15],[0,3,6,0,6,9,0,3,6,0],[1,4,7,2,8,10,1,4,7,1]],this}function vietUnicodeMap(){var e=new vietCharMap;return e.vietChars=new Array("UNICODE",97,226,259,101,234,105,111,244,417,117,432,121,65,194,258,69,202,73,79,212,416,85,431,89,225,7845,7855,233,7871,237,243,7889,7899,250,7913,253,193,7844,7854,201,7870,205,211,7888,7898,218,7912,221,224,7847,7857,232,7873,236,242,7891,7901,249,7915,7923,192,7846,7856,200,7872,204,210,7890,7900,217,7914,7922,7841,7853,7863,7865,7879,7883,7885,7897,7907,7909,7921,7925,7840,7852,7862,7864,7878,7882,7884,7896,7906,7908,7920,7924,7843,7849,7859,7867,7875,7881,7887,7893,7903,7911,7917,7927,7842,7848,7858,7866,7874,7880,7886,7892,7902,7910,7916,7926,227,7851,7861,7869,7877,297,245,7895,7905,361,7919,7929,195,7850,7860,7868,7876,296,213,7894,7904,360,7918,7928,100,273,68,272),e}function vietKeys(){return this.getAction=function(e){var t=this.keys.indexOf(e.ctrlChar.toLowerCase());0<=t&&e.compose(this.actions[t])},this}function vietKeysOff(){return this.off=!0,this.getAction=function(e){},this}function vietKeysTelex(){var e=new vietKeys;return e.keys="sfjrxzaeowd",e.actions=[1,2,3,4,5,6,9,10,11,8,15],e}function vietKeysVni(){var e=new vietKeys;return e.keys="0123456789",e.actions=[6,1,2,4,5,3,7,8,8,15],e}function vietKeysViqr(){var e=new vietKeys;return e.keys="´/'’`.?~-^(*+d",e.actions=[1,1,1,1,2,3,4,5,6,7,8,8,8,15],e}function vietKeysAll(){var e=new vietKeys;return e.keys="sfjrxzaeowd0123456789´/'`.?~-^(*+d",e.actions=[1,2,3,4,5,6,9,10,11,8,15,6,1,2,4,5,3,7,8,8,15,1,1,1,2,3,4,5,6,7,8,8,8,15],e}function ABTest2(){if(!window.CONFIG)throw"ABTest: No CONFIG defined";if(window.CONFIG.version.test){var i,n=this;this.isTestGroup=!1,this.isControlGroup=!1;this.trackPageview=function(e,t){if(n.isTestGroup||n.isControlGroup)if(i&&i.tracking&&e){if(e=(e="/"+(i.prefix||"/")+"/"+e).replace(/\/\/+/i,"/"),debug("ABTest --> pageview tracked ("+i.name+")"),console.log(e),!window.ga)return void warn("ABTest --> Google Analytics not setup");ga(i.name+".send","pageview",{page:e,title:t||document.title})}else debug("ABTest --> Track pageview --> There no group info or tracking url")},this.trackEvent=function(e){window.ga&&(n.isTestGroup||n.isControlGroup?i&&i.tracking&&(debug("ABTest --> tracking event --> "+i.name,e),ga(i.name+".send","event",getPageType(),e.action,e.label,e.value)):debug("ABTest --> track event -> User not belong to test or control group"))};var e=function(){zSetCookie("zconfig",CONFIG.id,{expires:CONFIG.duration});var e,t,i=(e=1,t=1e3,Math.floor(Math.random()*(t-e+1))+e),n=10*CONFIG.version.test.size;return i<=n?a():n<i&&i<=2*n?o():(debug("ABTest --> user not belong to test group or control group"),void zSetCookie("znews_control",CONFIG.version.live.id,{expires:CONFIG.duration}))},o=function(){return debug("ABTest --> user set as CONTROL group"),zSetCookie("znews_control",CONFIG.version.test.id,{expires:CONFIG.duration}),n.isControlGroup=!0,CONFIG.version.test.control},a=function(){return debug("ABTest --> user set as TEST group",CONFIG.version.test.experiment),zDeleteCookie("znews_control"),zSetCookie("znews_mobile",CONFIG.version.test.id,{expires:CONFIG.duration}),n.isTestGroup=!0,CONFIG.version.test.experiment};this.getCurrentTestGroup=function(){var e=window.location.search.match(/abtest=(test|control)/i);return e&&"test"==e[1]||zGetCookie("znews_mobile")==CONFIG.version.test.id?(n.isTestGroup=!0,info("ABTest --> TEST group",CONFIG.version.test.experiment),CONFIG.version.test.experiment):e&&"control"==e[1]||zGetCookie("znews_control")==CONFIG.version.test.id?(n.isControlGroup=!0,info("ABTest --> CONTROL group",CONFIG.version.test.control),CONFIG.version.test.control):!isInApp&&null==zGetCookie("znews_control")&&null};var t;null!=(t=zGetCookie("zconfig"))&&t==CONFIG.id||(debug("ABTest --> reset test data"),zDeleteCookie("znews_control"),zDeleteCookie("zconfig")),0<=window.location.hash.search("abtest")?(debug("ABTest --> override to test group"),a()):null==(i=n.getCurrentTestGroup())?(info("ABTest --> First time setup"),e()):!1!==i?(info("ABTest --> User participate in test campaign",i),window.ga&&ga("create",i.tracking,"Zing.vn",i.name),n.trackPageview(tracked_url)):info("ABTest --> Not participate in test campaign")}else info("ABTest: No test defined")}function AdtimaPlayer(h,p){function f(){function t(){p.tracking&&!T&&(debug("Player --> tracking video pageview"),trackArticlePageview(p.tracking),T=!0,p&&p.onTracked&&p.onTracked())}if(b)return b;if(!x)throw"Player --> no player configuration found...";return x.pluginsOptions.ControlsPlugin.theme=zPlayer.Constant.MediaControlConst.THEME.LIGHT_BLUE,!r||hasVideoCountDown||s||(x.plugins=[AutoPlayCountDownPlugin],hasVideoCountDown=!0),c&&(x.pluginsOptions.AutoPlayPlugin={showBoxUnmute:!1}),(b=new zPlayer.Player(x)).id=_,b.attachTo($("#"+_)[0]),A.parent().attr("style")&&A.parent().removeAttr("style"),b.on(zPlayer.Events.PLAYER_AD_STARTED,function(){info("PLAYER_START_ADS",w),u=!0,event("Player start ads",w),A.parents("figure").attr("content-playing","ads")}),b.on(zPlayer.Events.PLAYER_AD_STOPPED,function(){info("PLAYER_STOP_ADS",w),u=!1,A.parents("figure").removeAttr("content-playing"),event("Skip or stop ads",{category:"VIDEO",label:w,isInteraction:!0})}),b.on(zPlayer.Events.PLAYER_TIMEOUT_ADSLOAD,function(){warn("Player --> Ads load timeout",w),A.parents("figure").removeAttr("content-playing"),event("Timeout loading ads data",{category:"VIDEO",label:w,isInteraction:!1})}),b.on(zPlayer.Events.PLAYER_VOLUMEUPDATE,function(){info("PLAYER_VOLUMN_UPDATE"),p&&1==p.hover||(debug("Player --> update volume = "+b.getVolume()),0<b.getCurrentTime()&&0<b.getVolume()&&(debug("Player --> track video view (unmute)",w),t(),clearTimeout(l),l=null),volumeStateChanged=!0,log("Player --> volume updated = "+b.getVolume()),0==b.getVolume()?C.addClass("muted"):C.removeClass("muted"))}),b.on(zPlayer.Events.PLAYER_FULLSCREEN,function(){event("Video toggle full screen",{category:"VIDEO",label:w,isInteraction:!0})}),b.on(zPlayer.Events.PLAYER_PLAY,function(){info("PLAYER_PLAYED"),function(){if(p&&!1!==p.blocking)for(var e in PLAYING_VIDEOS)if(e!==_){info("Remove class --- pause video except current");var t=document.getElementById(e);t.classList.remove("popup","up","down"),t.parentElement.classList.remove("popped","up","down"),PLAYING_VIDEOS[e].pause()}}(),p&&!1!==p.blocking&&(PLAYING_VIDEOS[_]=v),y||r||t(),C.removeClass("ended").addClass("playing"),0==b.getVolume()?C.addClass("muted"):C.removeClass("muted"),Waypoint.refreshAll(),E=!(y=!1),p&&p.onReplay&&p.onReplay(),"page-video"===$("body").attr("id")&&(hasVideoPlaying=!0,$(".article-item.active").removeClass("pause")),0<$("#section-video").length&&$("#section-video .section-sidebar .article-item").eq(0).removeClass("pause").addClass("playing")}),b.on(zPlayer.Events.PLAYER_PAUSE,function(){d?y=d=!1:(info("PLAYER_PAUSED",w),C.removeClass("playing"),l&&(clearTimeout(l),l=null)),u||n(),"page-video"===$("body").attr("id")&&(hasVideoPlaying=!1,$(".article-item.active").addClass("pause")),0<$("#section-video").length&&$("#section-video .section-sidebar .article-item").eq(0).removeClass("playing").addClass("pause")}),b.on(zPlayer.Events.PLAYER_ENDED,function(){info("PLAYER_ENDED",w),y=E=T=!(d=!0),n(),C.removeClass("playing").addClass("ended"),l&&(clearTimeout(l),l=null),p&&p.eventTracking&&(I.completed||(I.completed=!0,"function"==typeof p.eventTracking.completed?p.eventTracking.completed():event("Video play completed",{category:"VIDEO",label:w,isInteraction:!1,value:b.getDuration()}))),p&&"function"==typeof p.onEnded&&p.onEnded(),S&&m(),b.isFullscreen()&&b._toggleFullScreenNative()}),b.on(zPlayer.Events.PLAYER_TIMEUPDATE,function(){I.played||(I.played=!0,p&&p.onPlay&&p.onPlay());var e=Math.floor(b.getCurrentTime());if(10<=e&&(t(),l=null),e%5==0&&a.lastTime<e&&(0!==(a.lastTime=e)&&e-a.lastTime<=5&&0<=e-a.lastTime&&(a.consume+=5),function(e,t){if(null!=e&&null!=t){var i=DBLOCAL.load(baseKeyTimeVideo)||{};try{i=JSON.parse(i)}catch(e){i={}}i[o]={d:e,c:t,ts:(new Date).getTime()},debug("Player --> vids --> "+JSON.stringify(i)),DBLOCAL.insert(baseKeyTimeVideo,JSON.stringify(i))}}(e,a.consume)),p&&p.eventTracking)switch(e){case 3:case 10:case 30:case 60:I["s"+e]||(debug("Player --> "+_+" reach "+e+"s"),I["s"+e]=!0,"function"==typeof p.eventTracking["s"+e]&&p.eventTracking["s"+e](v))}}),p&&!0===p.hover&&A.on("mouseenter",function(){b.unmute(!1)}).on("mouseout",function(){x.mute&&!volumeStateChanged&&b.mute(!1)}),window.Waypoint&&Waypoint.refreshAll(),h.remove(),b}function e(){var e=0<h.find("img").length?h.find("img").attr("src"):"";h.attr("poster")&&(e=h.attr("poster")),p&&p.poster&&(e=p.poster);var t="",i="",n="",o=h.find("source");if(0<o.length){var a=o.eq(0);t=a.attr("src"),0<=(i=a.attr("type")||"video/mp4").search("application")&&1<o.length&&(n=o.eq(1).attr("src"))}else{if(!(t=h.attr("src")?h.attr("src"):null))return;i=0<t.search(".m3u8")?"application/x-mpegurl":"video/mp4"}var r=h.attr("loop")||p&&!0===p.loop||!1,s=p&&!0===p.muted||!1;s&&debug("Player --> player muted by default: "+w),k&&debug("Player --> Popup Mode enabled");var l="",c="",d=!(!h.attr("allowads")||"true"!==h.attr("allowads"));(!0===window.disableBanner||p&&!0===p.noads)&&(d=!1),ZONEID&&!window.disableVideoAds&&"desktop"==DEVICE.type&&d&&window.zaConfig&&window.zaConfig.pageid&&(l="//api.adtimaserver.vn/zad/videoad?",window.adtimaData&&adtimaData.bid&&(l='//api.adtimaserver.vn/rendervideodemo?videodata=%7B"mid"%3A%5B%7B"'+adtimaData.bid+"%22%3A%7B%7D%7D%5D%7D&"),window.ZA&&ZA.getVisitorID&&(c+="uid="+ZA.getVisitorID()+"&"),window.ZA&&ZA.version&&(c+="ver=za_version="+ZA.version+"&"),c+="contentId="+window.adtimaConfig.contentId+"&",c+="zid="+ZONEID+"&vast=4&vs=",p.ads&&p.ads.pageid?c+="pageid%3D"+p.ads.pageid:c+="pageid%3D"+zaConfig.pageid,p.ads&&p.ads.cate?c+="%3Bcate%3D"+p.ads.cate:c+="%3Bcate%3D"+window.cate_path,p.ads&&p.ads.postid?c+="%3Bpostid%3D"+p.ads.postid:c+="%3Bpostid%3D"+getArticleId(),p.ads&&p.ads.topicid?c+="%3Btopicid%3D"+p.ads.topicid.replace(/system-|event-|person-|location-|seo-|company-/gi,""):c+="%3Btopicid%3D"+zaConfig.topicid,function(e){if(e){var t=e.replace("zid","zones"),i=API_PREPARE_ADS+"?"+t;debug("Player --> prepare ads rbt"),$.ajax({url:i,type:"GET",dataType:"json",xhrFields:{withCredentials:!0}})}}(c),l+=c,debug("Player --> adslink: ",l)),(C=$("<div>",{id:_,class:"video"})).hover(function(){$(this).toggleClass("hover")});var u=$("<a>",{href:"#btnHidePopup",class:"btnHidePopup"}).html('<span class="ti-close"></span>');return u.on("click",function(e){e.preventDefault(),v.pause(),k=!1,m()}),C.append(u),A.hover(function(){$(this).toggleClass("hover")}),A.prepend(C),h.after(A),x={product:"zingnews",source:t,fallbackSrc:n,playInline:"playsinline",width:"100%",height:"100%",autoPlay:y||!1,pauseOnClick:!0,mimeType:i,poster:e,mute:s,loop:r,volume:DEFAULT_VOLUME,pluginsOptions:{ControlsPlugin:{disabled:p&&p.isHideControls||!1,layout:{left:["playpause","volume","time"],right:["settings","fullscreen"],default:["seekbar"]},alwaysShowControl:!1,time:{delimiter:"|"}},BigPlayButtonPlugin:{disable:!1,buttonStyles:{width:"6em",height:"6em",borderRadius:"10px",backgroundColor:"rgba(0, 85, 138, .73)",border:0}},PlayPauseFaceoutPlugin:{disable:!1,buttonStyles:{borderRadius:"10px",backgroundColor:"rgba(0, 85, 138, .73)",border:0}},ads:{source:l,loadTimeout:window.ADSLOADTIMEOUT||1e3,startTimeout:window.ADSPLAYTIMEOUT||2500,skipTimeout:5e3,poster:!0,noCountdownPlay:!0,showSlideBlack:!1,minDurationShowAd:60},AutoPlayCountDownPlugin:{messageCountdown:"Video sẽ chạy sau",timeOut:3e3,messageUnmute:"Nhấn để bật tiếng"}},playback:{hls:{startLevel:0<=window.location.search.search("hlsquality")?2:-1,capLevelToPlayerSize:!0,maxBufferLength:90,maxMaxBufferLength:120,maxBufferSize:104857600}}},p&&p.isHideControls&&(x.pluginsOptions.BigPlayButtonPlugin.showOnPauseMobile=!0,x.pluginsOptions.PlayPauseFaceoutPlugin.disabled=!0),loadPlugin(VIDEO_PLAYER,function(){var e=setInterval(function(){if(window.zPlayer){if(clearInterval(e),p&&!1===p.inview)return log("Player --> disabled inview detection: "+w),void(b=f());loadPlugin(window.VIDEO_PLAYER_AUTOPLAY,g)}},500)}),C}function i(e){e?(u&&b.resumeAd(),b.isPlaying()||b.play()):(b.isPlaying()&&b.pause(),u&&b.pauseAd())}function g(){Waypoint.refreshAll(),new Waypoint.Inview({element:A[0],enter:function(e){log("Player --> video enter view "+e+": "+w,{inView:E}),b=f()},entered:function(e){log("Player --> video in view "+e+" : "+w,{inView:E}),S&&m(),E&&b&&0<b.getCurrentTime()&&!b.isPlaying()&&!u&&setTimeout(i(!0),500)},exit:function(e){var t;C.height()>$(window).height()?log("Player --> video bigger than screen, won't detect exiting event..."):b?(log("Player --> video exiting view "+e+": "+w,{inView:E}),k&&(b.isPlaying()||u)?(t=e,$("#advBalloon").hide(),A.addClass("popped"),C.addClass("popup "+t),b.updateSize(O,z),S=!0):i(!1)):log("Player --> not ready")},exited:function(e){log("Player --> video exited view "+e+": "+w,{inView:E}),C.height()>$(window).height()&&i(!1)}})}function n(e){delete PLAYING_VIDEOS[e||_]}function m(){debug("Player --> hide popup"),A.removeClass("popped"),C.removeClass("popup up down"),b.updateSize(100,100,"%"),b.isPlaying()||u||(E=!1),S=!1}var v=this,o=p&&p.ads&&p.ads.postid||p&&p.videoId||getArticleId()||$(".video-player").attr("article-id")||"",a={lastTime:-1,consume:0},_="video"+Math.floor(1e5*Math.random()),w=p&&p.title?$.trim(p.title):"",r=!(p&&!1===p.inview),y=p&&!0===p.autoplay,s=!(!p||!p.isHighlight)&&p.isHighlight;y&&(r=!1);var b,x,l,C,c=!(!p||!p.isHideBoxUnmute)&&p.isHideBoxUnmute,d=!1,u=!1,T=!1,E=!1,S=!1,k=!0!==window.disablePopupVideo&&p&&!0===p.popPlayer,A=$("<div>",{class:"player"}),I={s3:!1,s10:!1,s30:!1,s60:!1,completed:!1,hover:!1,played:!1};v.getVideoId=function(){return _},v.pause=function(){debug("Player --> call pause video...",w),i(!1)},v.play=function(){if(p&&!1!==p.blocking)for(var e in PLAYING_VIDEOS)e!==_&&PLAYING_VIDEOS[e].pause();i(!0)};var O=326,z=184;return function(){if(h&&0!=h.length)return p&&log("Adtima player init with options ",p),"video"==h.prop("tagName").toLowerCase()?e():null}()}function VideoPlayer(){var s,e,t,i,l=new RegExp("https*:\\/\\/(www\\.){0,1}(youtu\\.be\\/|youtube.com\\/(watch\\?v=|embed\\/))","i"),c=getArticleId(),d=Boolean($(".video-series").length),u={},h={title:"",thumb:"",link:""},p="__playedvideos";$(".right-side .article-item .article-thumbnail img").each(function(e,t){var i=$(t).attr("src");$(t).attr("src",i.replace(".gif","_gif.jpg"))}),function(){if(d){var e=$(".video-series .article-list"),t=e[0].scrollHeight,i=$(".video-series .article-list").find('.article-item[article-id="'+getArticleId()+'"]');i.length&&(i[0].scrollIntoView?i[0].scrollIntoView({behavior:"smooth",block:"center"}):400<(i=i.position().top)&&e.animate({scrollTop:i/t*(t-500)},0))}}(),function(){var e=$(".video-player > video"),t=$("body").hasClass("layout-special"),i=$(".video-info .video-title").text();if(s=(s=(i=i||"")?$(".video-info .video-title a").attr("href"):s)?window.location.origin+s:window.location.href,0<e.length){var n,o={popPlayer:!0,autoplay:!0,shareLink:s+"#shareVideo",showSetting:!1,title:i,noads:t,eventTracking:!0,onEnded:function(){var e=$(".video-player .player.popped").length;if(h.link&&!e){var t=$(".next-video-bar");n=setTimeout(function(){window.location.href=h.link},5e3),$(".--z--player .--z--big-play-button span").removeClass("pl-ic-play_arrow").addClass("znews-ic-replay"),t.addClass("animation-slide"),t.find(".ti-close").on("click",function(){clearTimeout(n),$(".next-video-bar").removeClass("animation-slide")})}},onPlay:function(){var e,t;MODE_PREVIEW||(ME.markRead(),DBSESS.insert(p,JSON.stringify(u))),d&&(e=$(".video-series .article-item.active").next())&&(h.link=e.find(".article-title a").attr("href"),h.thumb=e.find(".article-thumbnail img").attr("src"),h.title=e.find(".article-title a").text()),t="",t+='<div class="next-video-bar" tabindex="-1">',t+='<div class="next-video-bar-background"></div>',t+='<img src="'+h.thumb+'" />',t+='<div class="next-video-title"><a href="'+h.link+'">'+h.title+"</a></div>",t+='<a href="'+h.link+'" class="znews-ic-play-video"></a>',t+='<a class="ti-close"></a>',t+="</div>",$(".video-player").prepend(t)},onReplay:function(){$(".next-video-bar").hasClass("animation-slide")&&(n&&clearTimeout(n),$(".next-video-bar").removeClass("animation-slide"))}};return c||(o.tracking={url:s,title:i,hash:"#videopage"}),new AdtimaPlayer(e,o)}if(0<(e=$(".video-player > iframe")).length&&e.attr("src").match(l)){var a=e.attr("src"),r="?autoplay=1&amp;rel=0&amp;showinfo=0";a.match(/\?.*$/i)?e.attr("src",a.replace(/\?.*/i,r)):e.attr("src",a+r),$("body").hasClass("layout-special")&&e.css({height:Math.floor(9*e.width()/16)+"px"})}}(),$(".video-nav-header .btn-menu").on("click",function(){$(".video-nav-header").toggleClass("video-nav-header-show-menu"),$("body").addClass("hide-scroll")}),$(".video-nav-header-overlay").on("click",function(){$(".video-nav-header").removeClass("video-nav-header-show-menu"),$("body").removeClass("hide-scroll")}),e=$("<div>",{class:"video-share"}).append(renderArticleTools({hasZalo:!0,hasFace:!0,hasCopyLink:!0})),$("#video-featured .video-title").append(e),t=$("#video-comments"),i=new Comment(c,{}),0<t.length&&t.remove(),t=$("<div>",{id:"video-comments"}).html('<section class="the-article-comment"></section>'),$(".video-info").append(t),t.find(".the-article-comment").append(i.getRenderedWidget()),setTimeout(function(){var e=document.querySelector("#video-featured .left-side"),t=document.querySelector("#video-featured .right-side");if(!(t.clientHeight<=e.clientHeight)){var i=t.clientHeight-e.clientHeight,n=Number(i/80).toFixed(0);if(n)for(var o=$("#video-mostview .article-item"),a=1;a<=n;a++)$(o[o.length-a]).hide()}},0),function(){var t=DBSESS.load(p);try{t=JSON.parse(t)||{}}catch(e){t={}}t[c]=!0,u=t}(),function(){if(!d){var e,t,i=$(".article-item");t=$('<section id="next-video" class="section"><header class="section-title"><h3>Tiếp theo</h3></header> <div class="article-list listing-layout"></div></section>');for(var n=0;n<i.length;n++){var o=$(i[n]).attr("article-id");if(!u[o]){t.find(".article-list").html(i[n]),e=$(i[n]),h.link=e.find(".article-title a").attr("href"),h.thumb=e.find(".article-thumbnail img").attr("src"),h.title=e.find(".article-title a").text();break}}$("#video-featured .right-side").prepend(t)}}(),function(){function n(e,n){e.find(".article-item").each(function(e,t){var i=$(t).find(".article-title a").attr("href");$(t).find(".article-title a").attr("href",i+"?series="+n),$(t).find(".article-thumbnail a").attr("href",i+"?series="+n)})}$(".section-more .section[series-id]").each(function(e,t){var i=$(t).attr("series-id");n($(t),i)}),n($(".video-series"),window.location.search.replace("?series=",""))}(),$(".article-item[article-id="+c+"]").addClass("active")}function fetchArticleList(e,t,n){var o=$("<div>");o.load(e+" "+t,function(e,t,i){"error"!=t?"function"==typeof n&&n(null,o):"function"==typeof n&&n("No article found")})}function initInfiniteList(e,d){e||(e=$(".section-content > .article-list, .article-list.infinite"));var u=e.parents(".section");e.find(".btnMore").each(function(e,t){var r=$(t);r.addClass("infinite");var s=r.parent(".article-list"),i=r.parents(".section").attr("id"),l=0<=i.search("latest"),c="article"===getPageType();debug("Infinite --> initializing infinite list #"+i+"(unique="+l+")"),new Waypoint.Inview({element:t,enter:function(e){var o=r.find("a"),a=o.attr("href");a&&(o.html('<div class="ellipsis"><div></div><div></div><div></div><div></div></div>').removeAttr("href"),debug("Infinite --> load next page #"+i+": "+a),fetchArticleList(a,"#"+i,function(e,t){if(!e&&0<t.length){var n=0;if(l&&c?(debug("Infinitive load --> remove dupplicate"),removeDuplicate(t)):debug("Infinitive load --> not article type --> not remove dupplicate"),t.find(".section-content > .article-list .article-item").each(function(e,t){var i=$(t).attr("article-id");0==$(".article-item[article-id="+i+"]").length&&(r.before($(t)),n++)}),0<n){debug("Infinite --> appended "+n+" articles"),initTrackers(u);var i=t.find(".section-content > .article-list .btnMore a");0<i.length&&o.attr("href",i.attr("href")),Waypoint.refreshAll(),trackPageviewGA(a,getPageType()),window.za&&za.trackPageview({url:a})}else debug("Infinite --> no more articles"),r.remove()}else r.remove();d&&d(s)}))}})})}function preventDefault(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1}function preventDefaultForScrollKeys(e){if(keys[e.keyCode])return preventDefault(e),!1}function disableScroll(){window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault,document.onkeydown=preventDefaultForScrollKeys}function enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}function Dialog(n){var i=$("<div>",{class:"modal dialog"});$("body").append(i),n&&n.className&&i.addClass(n.className),n&&n.icon&&(i.addClass("icon"),"alert"==n.icon?i.append('<div class="dialog-icon"><span class="ti-alert"></span></div>'):"info"==n.icon?i.append('<div class="dialog-icon"><span class="ti-info-alt"></span></div>'):"question"==n.icon?i.append('<div class="dialog-icon"><span class="ti-help-alt"></span></div>'):i.append('<div class="dialog-icon">'+n.icon+"</div>")),n&&n.title&&i.append('<h3 class="dialog-title">'+n.title+"</h3>");var o=$("<div>",{class:"dialog-content"});o.css({"max-height":Math.floor(.65*$(window).height())+"px"}),n&&n.content&&(i.append(o),"function"==typeof n.content?n.content(function(e){o.append(e)}):"string"==typeof n.content?o.html(n.content):o.append($(n.content))),n&&!0===n.loading&&o.append('<div class="loader loader-inner ball-pulse-sync"><div></div><div></div><div></div></div>');var t=$("<p>",{class:"dialog-actions"});i.append(t);var e=$("<a>",{class:"btnClose"}).attr("href","#close");if(n&&n.btnClose&&n.btnClose.label?e.html(n.btnClose.label):e.html("Đóng"),(n.btnClose&&!0===n.btnClose.default||!n.btnConfirm&&!n.btnAlt)&&e.addClass("default"),e.on("click",function(e){e.preventDefault(),$.modal.close(),n&&n.btnClose&&n.btnClose.action&&n.btnClose.action(i)}),t.append(e),n&&n.btnConfirm){var a=$("<a>",{class:"btnConfirm"}).attr("href","#confirm");a.html(n.btnConfirm.label),!0===n.btnConfirm.default&&a.addClass("default"),a.on("click",function(e){n.btnConfirm.action(i),!0===n.btnConfirm.autoClose&&$.modal.close()}),t.append(a)}this.close=function(){$.modal.close()},this.getBody=function(){return o};var r={};n&&n.clickClose&&(r.clickClose=n.clickClose),i.on($.modal.OPEN,function(e,t){var i=o.find('input[type="text"]:placeholder-shown, input[type="password"]:placeholder-shown, textarea:placeholder-shown');0<i.length&&i.get(0).focus(),n&&n.afterShow&&n.afterShow(t.$elm)}),i.on($.modal.AFTER_CLOSE,function(e,t){n&&n.afterClose&&n.afterClose(t.$elm),i.remove()}),i.on($.modal.BEFORE_CLOSE,function(e,t){n&&n.beforeClose&&n.beforeClose(t.$elm)}),this.addLoader=function(){o.append($("<div>",{class:"loader loader-inner ball-pulse-sync"}).html("<div></div><div></div><div></div>"))},this.hideButton=function(e){t.find("."+e).hide()},this.showButton=function(e){t.find("."+e).show()},i.modal(r)}function initNativeAds(){"home"==getPageType()&&loadZaloAds(NATIVE_HOME,{},function(e,a){if(!e){info("Adtima --> render native home"),a[NATIVE_HOME.trending1.id]&&$("#section-featured .article-list[data-content=newstrending]").find(".article-item").eq(2).after(renderNativePR(a[NATIVE_HOME.trending1.id]));var t=$("#section-latest > .section-content > .article-list").find(".article-item");a[NATIVE_HOME.latest1.id]&&t.eq(2).after(renderNativePR(a[NATIVE_HOME.latest1.id])),a[NATIVE_HOME.latest2.id]&&t.eq(6).after(renderNativePR(a[NATIVE_HOME.latest2.id])),a[NATIVE_HOME.latest3.id]&&t.eq(10).after(renderNativePR(a[NATIVE_HOME.latest3.id])),$(".box-category").each(function(e,t){var i=$(t),n=i.attr("id");if(n&&NATIVE_HOME[n]&&a[NATIVE_HOME[n].id]){var o=a[NATIVE_HOME[n].id];debug("Adtima --> render native pr for cate #"+n+" = "+NATIVE_HOME[n].id,a[NATIVE_HOME[n].id]),o&&0<o.length&&i.find(".article-list .article-item").eq(1).after(renderNativePR(a[NATIVE_HOME[n].id]))}});var i=a[NATIVE_HOME["the-thao"].id];i&&0<i.length&&$("#section-sport .article-item").eq(1).after(renderNativePR(a[NATIVE_HOME["the-thao"].id]))}})}function cleanAdText(e){return e?e=(e=(e=e.replace(/\+|\?|\!/gi,"")).replace(/\s\,/gi,",")).replace(/\s\./gi,"."):""}function loadZaloAds(e,t,n){var i="//api.adtimaserver.vn/zad/zone/znewsPR3?zones=";for(var o in debug("Load Zalo Native Ads",e),e)i+=e[o].id+",";i=i.replace(/,$/gi,""),i+="&count=1",i+="&vs=curl="+encodeURIComponent(window.location.href)+"%3B",t&&t.targeting&&(t.targeting.articleid&&(i+="postid%3D"+t.targeting.articleid+"%3B"),t.targeting.catename&&(i+="catename%3D"+t.targeting.catename+"%3B"),t.targeting.cateid&&(i+="cateid%3D"+t.targeting.cateid+"%3B"),t.targeting.topicid&&(i+="topicid%3D"+t.targeting.topicid)),i+="&uid="+ZA.getVisitorID(),i+="&ver=za_version="+ZA.version,i+="&contentId="+window.adtimaConfig.contentId,ADS_TOKEN&&(i+="&servingToken="+ADS_TOKEN),$.ajax({url:i,dataType:"json",xhrFields:{withCredentials:!0}}).success(function(e){e&&e.ext&&e.ext.servingToken&&(ADS_TOKEN=e.ext.servingToken),e.data?n&&n(null,e.data):n&&n("No data returned")}).fail(function(e,t,i){n&&n("Error Fetching PR List")})}function renderNativePR(e,t){if(!e)return"";Array.isArray(e)&&(_article=shuffle(e)[0]),debug("renderNativePR --> render native ad",_article);var i=!0===_article.hidePrTag?"":"ads",n=i?'target="_blank"':"";-1!==_article.clickurl.indexOf("news.zing.vn")&&(n="");var o=$("<article>",{class:"article-item pr "+i}),a='<p class="article-thumbnail"><a href="'+_article.clickurl+'" title="'+_article.title+'"  '+n+'><img src="'+_article.mediaurls[0]+'" alt="'+_article.title+'"></a></p>';a+="<header>";var r=!0===_article.hidePrTag?_article.title:cleanAdText(_article.title);if(a+='<h1 class="article-title"><a href="'+_article.clickurl+'" title="'+_article.title+'" '+n+">"+r+"</a></h1>",a+='<div class="article-meta">',a+='<span class="sponsor">'+_article.displayUrl+"</span>",a+="</div>",a+="</header>",_article.hidePrTag&&_article.description&&(a+='<p class="article-summary">'+_article.description+"</p>"),a+='<img src="'+_article.trackingurl+'" width="1" height="1" style="width: 1px; height: 1px; position: absolute; top: -1px; height: -1px;" />',_article.thirdPartyImpressionUrl)for(var s=0;s<_article.thirdPartyImpressionUrl.length;s++)a+='<img src="'+_article.thirdPartyImpressionUrl[0]+'" width="1" height="1" style="width: 1px; height: 1px; position: absolute; top: -1px; height: -1px;" />';return o.html(a),t&&t.zoneid&&o.attr("zone-id",t.zoneid),o}function Comment(h,e){function p(r){var s=$("<div>",{class:"comment-form"});r&&r.class&&s.addClass(r.class),r&&r.parentid&&s.attr("parent-id",r.parentid),setTimeout(function(){var t;(ME.isLoggedInZalo||y)&&s.prepend(((t=$("<p>",{class:"comment-author"})).append('<img class="avatar" src="'+ME.getAvatar()+'" width="20" height="20" /> '),t.append('<strong class="username">'+ME.getDisplayName()+"</strong>"),t.append('<a href="#changeName" title="Đổi tên hiển thị" class="btnChangeName"> Đổi tên hiển thị</a>'),t.find("a").on("click",function(e){e.preventDefault(),$(this).hasClass("btnChangeName")&&ME.showUserDialog(function(e){e||t.find(".username").text(ME.getDisplayName())})}),t))});var i=$("<div>",{class:"comment-editor"});s.append(i);var e="form-"+Math.floor(1e3*Math.random()),l=$("<textarea>",{class:"comment-input",id:e}).attr("name","comment");i.append(l),l.attr("placeholder",r&&r.placeholder?r.placeholder:TEXT_COMMENT_INPUT),x&&x.initTyper(l.get(0)),autoCompleteEmoji(l),l.on("focus",function(){autosize(l)});var n=$("<p>",{class:"editor-tool"});n.html('<a class="btnEmoticon"><span class="ti-face-smile"></span></a>'),n.find("a").on("click",function(e){if(e.preventDefault(),$(this).hasClass("btnEmoticon"))$(this).toggleClass("clicked"),0==n.find(".emoticon-list").length?n.append(renderEmoticonGuide(l,u)):n.find(".emoticon-list").toggle();else if($(this).hasClass("btnExpand")){var t=s.height();i.css("height",Math.floor(1.2*t)+"px"),l.focus()}}),i.append(n);var t=$("<a>",{class:"button btnSubmit"}).attr("href","#submit");if(r&&r.submitLabel?t.html(r.submitLabel):t.html(TEXT_COMMENT_SUBMIT),t.on("click",function(e){e.preventDefault();var a=$(this);if(a.hasClass("processing"))new Dialog({icon:"info",title:"Đang xử lý",content:"<p>Bình luận trước của bạn đang được xử lý. Vui lòng đợi trong giây lát...</p>",btnClose:{label:"Đồng ý"},clickClose:!0});else if(a.hasClass("delayed"))new Dialog({icon:"alert",title:"Bình luận quá nhanh",content:"<p>Bạn nhập bình luận quá nhanh, vui lòng đợi trong giây lát. Tất cả bình luận sẽ chỉ hiển thị sau 5 phút.</p>",btnClose:{label:"Đồng ý"},clickClose:!0});else{var t=l.val().trim();""!=t?r&&r.minWords&&_wordCount(t)<r.minWords?new Dialog({icon:"alert",title:"Bình luận quá ngắn",content:"<p>Bạn chưa nhập nội dung bình luận hoặc bình luận của bạn quá ngắn. Nội dung bình luận có nghĩa sẽ được đánh giá cao và ưu tiên hơn khi duyệt và hiển thị.</p>",btnClose:{label:"Đồng ý"},clickClose:!0}):!r||!0!==r.vietnamese||isVietnamese(t)?(a.addClass("processing"),function t(i,n){var o="function"==typeof n;if(!i.comment||""==i.comment.trim())return void(o&&n("No comment text provided!"));if(!ME.isLoggedInZalo&&!Boolean(ME.getDisplayName()))return debug("Not submit comment --> Users havent logged in yet!"),void ME.login(function(e){e?o&&n("Bạn phải đăng nhập để gửi bình luận. Thông tin cá nhân của bạn sẽ không được dùng để hiển thị"):t(i,n)});debug("Comment: start check comments and submit data");var a={comment:capitalizeSentence((e=i.comment,r=e,r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace(/(!|\?|,|_|-|\s|@)\1+/g,"$1")).replace(/\.{2,}/g,"...")).replace(/\s+(,|\?|!|\))/g,"$1")).replace(/(,|\?|!|\))([^\s])/gi,"$1 $2")).replace(/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/gi,"")).replace(/(https*:|www\.)\S+/gi,"")).replace(/\s(k|hok|ko|hk)\s/gi," không ")).replace(/\sj\s/gi," gì ")).replace(/potay/gi,"bó tay")).replace(/\sngta/gi," người ta")).replace(/\sng\s/gi," người ")).replace(/\s(đc)/gi," được")).replace(/\smún/gi," muốn")).replace(/\se\s/gi," em ")).replace(/\sfải\s/gi," phải ")).replace(/\sntn\s/gi," như thế nào ")).replace(/\swa\s/gi," qua ")).replace(/\stp\s/gi," thành phố ")).replace(/\szậy/gi," vậy")).replace(/\sae\s/gi," anh em ")).replace(/\sđôj\s/gi," đôi ")).replace(/\sbjk\s/gi," biết ")).replace(/ak(\s|\.|\?)/gi,"à$1")).replace(/hehe(\S+)/i,":D ")).replace(/\^\^+/gi,"")).replace(/@@+/g,"@")).replace(/haizz+/gi,"")).replace(/[@#$!%][!@#$%]+/gi,"")).replace(/=\)\)*/gi,""))),avatar:ME.getAvatar(),displayname:ME.getDisplayName(),userid:ZA.getVisitorID(),email:ME.getEmail()};var e,r;trackEvent(i.parentid?"Send reply":"Send comment",null,a.comment.length);$.ajax({type:"POST",url:"//user.news.zing.vn/public/v2/submit/comment?action=post&id="+h,cache:!1,data:a}).fail(function(){o&&n("Có lỗi xảy ra khi gửi bình luận. Kiểm tra lại kết nối của bạn và vui lòng thử lại sau vài phút.")}).done(function(e){1!=e.error?e&&e.error?o&&n("Comment submission fail: "+e.message):o&&n(null,{ID:Math.floor(1e5*Math.random()),DisplayName:a.displayname,Avatar:a.avatar,Comment:a.comment,CreationDate:Math.floor((new Date).getTime()/1e3)+25200,Like:0,Dislike:0,ReplyCount:0,Replies:[],moderated:!1}):o&&n("Có lỗi xảy ra khi gửi bình luận. Kiểm tra lại kết nối của bạn và vui lòng thử lại sau vài phút.")})}({comment:t,parentid:r.parentid},function(e,t){if(a.removeClass("processing"),e)new Dialog({icon:"alert",title:"Lỗi khi gửi bình luận",content:"<p>Có lỗi xảy ra khi gửi bình luận của bạn. Nguyên nhân có thể do mạng hoặc hệ thống. Vui lòng thử lại sau vài phút nữa. Ban biên tập xin lỗi về sự bất tiện này.</p>",btnClose:{label:"Đồng ý"},clickClose:!0});else{if(y&&(a.addClass("delayed"),setTimeout(function(){a.removeClass("delayed")},3e4)),t)if(y){var i=g(t);i.addClass("preview");var n=w.find(".comment").get(0);if(n&&0<n.length)n.before(i);else{var o=w.find("> .comments");0<o.length?o.prepend(i):w.find("> .comments ").prepend(i)}l.val(""),l.focus()}else s.addClass("preview"),s.html("").append(g(t,null,"<div>")),s.append('<p class="note">Bình luận đang chờ duyệt. Ban biên tập giữ quyền biên tập nội dung bình luận trước khi đăng.</p>');r&&r.callback&&r.callback()}})):new Dialog({icon:"alert",title:"Viết bình luận bằng tiếng Việt có dấu",content:"<p>Bình luận chỉ được đăng nếu viết bằng tiếng Việt có dấu. Bạn có thể gõ bằng kiểu gõ Telex hoặc VNI trong trình soạn thảo mà không cần cài đặt phần mềm.</p>",btnClose:{label:"Đồng ý"},clickClose:!0}):l.focus()}}),y){var o=$("<a>",{class:"button btnCloseExpand"}).attr("href","#closeform");o.text("Đóng"),o.on("click",function(){s.hasClass("collapsed")||s.addClass("collapsed")})}if(s.append(t),s.append(o),r&&!0===r.btnClose){var a=$("<a>",{class:"button btnClose"}).attr("href","#close");a.text("Đóng"),a.on("click",function(e){e.preventDefault(),s.remove()}),s.append(a)}s.append('<p class="note"><span class="wordcount">Ý kiến của bạn sẽ được biên tập trước khi đăng.<br/> Xin vui lòng gõ tiếng Việt có dấu.</span></p>');var c,d=s.find(".wordcount"),u=function(){var e=_wordCount(l.val());d.text(e+" chữ"),5<=e?d.addClass("passed"):d.removeClass("passed")};return l.on("change input propertychange",function(){c&&clearTimeout(c),c=setTimeout(u,300)}),l.on("focus",function(){d.addClass("show"),s.hasClass("collapsed")&&s.removeClass("collapsed")}).on("blur",function(){d.removeClass("show"),r&&r.autohide&&""==$(this).val().trim()&&s.remove()}),r&&"expanded"==r.mode||s.addClass("collapsed"),s}function t(o,e){w?(w.find(".comments").html(""),w.find(".btnMore").remove()):(w=$("<div>",{class:"comment-list init"}),y?(w.append(p({mode:"collapsed",minWords:5,vietnamese:!0,placeholder:TEXT_COMMENT_INPUT})),w.append('<div class="list-header">'+v(!0)+'</div><ul class="comments"></ul>')):(w.append('<div class="list-header"><h4 class="list-title"> '+TEXT_LIST_LABEL+' <span>(<strong></strong>)</span></h4><div class="list-sort-box"><span class="sort-seleted"><span>Nổi bật</span><ul class="list-sorting"><li class="sort-featured active">Nổi bật</li><li class="sort-time">Mới nhất</li></ul></span></div></div><ul class="comments"></ul>'),w.find(".list-sorting li").on("click",function(){var e=$(this);e.hasClass("active")||(w.find(".list-sorting .active").removeClass("active"),e.addClass("active"),w.find(".sort-seleted > span").text(e.text()),e.hasClass("sort-featured")?t():t({order:"time"}))}),w.find(".list-header").after(p({mode:"expanded",minWords:5,vietnamese:!0,placeholder:TEXT_COMMENT_INPUT})))),o&&"time"==o.order?w.addClass("order-time"):w.removeClass("order-time");var s=w.find(".comments");return w.addClass("loading"),0==w.find("> .loader").length&&s.after(v()),l(o,function(e,t){if(e)w.hasClass("init")&&(0==e.code&&w.after('<p class="empty"><span class="ti-flag-alt-2"></span><br/>Trở thành người đầu tiên bình luận cho bài viết này!</p>'),w.find(".list-header").remove()),w.removeClass("loading");else{var n=s.find(".comment").length;if(_.each(t,function(e){e.addClass("cmt-"+n++),s.append(e)}),w.removeClass("init"),w.removeClass("loading"),n<5||y)s.addClass("expanded");else{var r=$("<a>",{class:"btnMore"}).html("Xem thêm bình luận");s.after(r),n<d&&r.attr("next-page",2),r.on("click",function(e){e.preventDefault();var t=s.find(".comment:hidden");if(0<t.length)return log("Comment --> show hiddens..."),t.show(),b&&(debug("UpdateLayout --> show hiddens"),b()),$(window).resize(),void(n==d&&r.remove());var a=$(this).attr("next-page");if(a)w.addClass("loading"),l({paged:a,order:o&&o.order?o.order:null},function(e,t){if(e){r.remove();var i=p({placeholder:TEXT_COMMENT_INPUT,minWords:5,vietnamese:!0});i.addClass("bottom").removeClass("collapsed"),w.after(i),b&&(debug("UpdateLayout --> get comments list errors"),b())}else{w.attr("paged",a),_.each(t,function(e){e.addClass("cmt-"+n++),s.append(e)});var n=s.find(".comment").length;if(debug("Comments --> update comment list, count = "+n+", total = "+d),n<d)r.attr("next-page",parseInt(a)+1);else{r.remove();var o=p({placeholder:TEXT_COMMENT_INPUT,minWords:5,vietnamese:!0});o.addClass("bottom"),w.after(o),$(this).attr("next-page")||$(this).remove()}b&&(debug("UpdateLayout --> get More"),b()),$(window).resize()}w.removeClass("loading")});else{r.remove();var i=p({placeholder:TEXT_COMMENT_INPUT,minWords:5,vietnamese:!0});i.addClass("bottom"),w.after(i),$(this).attr("next-page")||$(this).remove()}})}0<d&&i.find(".list-title strong").text(d)}b&&(debug("UpdateLayout --> Any"),b()),$(window).resize(),y&&function n(o,a){setTimeout(function(){l({delay:300,order:"time",moderation:c,nocache:!0},function(e,t){if(!e&&t){var i=o.find(".mCSB_container");0==i.length&&(i=o),_.each(t,function(e){i.prepend(e)})}null!=a&&!1===a||n(o)})},1e4)}(s)}),w}function l(n,o){var a="function"==typeof o;m(n,function(e,t){if(e)a?o(e):debug(e);else{var i=[];t.total_comment&&(d=t.total_comment),0!=t.total_comment?t.comments&&0<t.comments.length?(_.each(t.comments,function(e){var t;if(n&&n.delay&&now-Math.round(parseFloat(e.CreationDate)-25200)<n.delay)return;(t=e.ID,0<$("#comment-"+t).length)?function(e){debug("Comments --> update meta comment "+e.ID);var t=$("#comment-"+e.ID);t.length&&(t.find(".author .time").text(formatTime(e.CreationDate,{friendly:!0})),t.find(".comment-actions .btnLike strong").text(e.Like),t.find(".comment-actions .btnDislike strong").text(e.Dislike))}(e):i.push(g(e))}),a&&o(null,i)):a&&o("No more comment"):a&&o({code:0,message:"Comment is empty!"})}})}function f(n,o){var e="//user.news.zing.vn/input/comment.aspx?action=dislike&id="+h;$.ajax({url:e,type:"POST",dataType:"text",data:{commentid:n},success:function(e,t,i){0==e.error?(log("Comment --> dislike comment #"+n),"function"==typeof o&&o()):"function"==typeof o&&o("Unknown error")},fail:function(e,t,i){"function"==typeof o&&o(i)}})}function g(e,t,i){var n=e.Avatar&&0<=e.Avatar.search("icon_mobile"),o=e.Avatar&&""!=e.Avatar.trim()&&!n,a=i||"<li>",r=$("<div>",{class:"comment-meta"}),s=$("<img>",{class:"avatar"}).attr({src:"//znews-static.zadn.vn/images/avatar_silkhouse.gif"}),l=$("<p>",{class:"author"}).append('<span class="author-name">'+e.DisplayName+"</span>"),c=function(e){var t,i=$("<p>",{class:"comment-content"}).data("full-comment",e),n=_splitString(e,50,90);if(1<n.length){var o=$("<a>",{class:"btnShow"}).attr("href","#").attr("title","Xem toàn bộ bình luận").html("+");t=$.trim(n[0]),t=(t=convertTextToEmoji(t)).replace(/\r?\n/g,'<span class="break"></span>'),i.html(t+"..."),o.on("click",function(e){e.preventDefault(),$(this).remove();var t=convertTextToEmoji(i.data("full-comment")).replace(/\r?\n/g,'<span class="break"></span>');i.html(t),b&&(debug("UpdateLayout --> render comment content"),b()),$(window).resize()}),i.append(o)}else t=$.trim(e),t=(t=convertTextToEmoji(t)).replace(/\r?\n/g,'<span class="break"></span>'),i.html(t);return i}(e.Comment),d=$(a,{id:"comment-"+e.ID,class:"comment"});if(t&&(e.parentid=t,d.addClass("reply").attr("parent-id",t)),o){(e.Avatar.search("facebook.com")<0||!0===facebook.isFBAvailable)&&s.attr({src:e.Avatar.replace("http://","//")});var u=new Image;u.src=s.attr("src"),u.onerror=function(){$("#comment-"+e.ID).find(".comment-meta").prepend($("<span>",{class:"avatar"})),$("#comment-"+e.ID).find(".comment-meta img.avatar").remove()}}return l.append('<span class="time">'+formatTime(e.CreationDate,{friendly:!0})+"</span>"),r.append(s),r.append(l),r.append(c),d.append(r),d.append(function(o,a){var r=$("<p>",{class:"comment-actions"}),e=$("<a>",{class:"btnReply"}).html("Trả lời").attr("href","#");o.parentid&&e.attr("parent-id",o.parentid);e.on("click",function(e){e.preventDefault();var t=a.find(".reply-form");if(0<t.length)return t.remove(),b&&(debug("UpdateLayout --> remove reply form"),b()),void $(window).resize();$replyForm=p({mode:"expanded",btnClose:!0,class:"reply-form",submitLabel:"Trả lời",placeholder:"Bạn có đồng ý với "+o.DisplayName+"?",parentid:o.parentid?o.parentid:o.ID}),r.after($replyForm),$replyForm.find("textarea").focus(),b&&(debug("UpdateLayout --> render reply form"),b()),$(window).resize()}),r.append(e),r.append('<span class="separator">&bull;</span>');var s=$("<a>",{class:"btnLike"}).html("<strong></strong> "+TEXT_LIKE).attr("href","#");0<o.Like&&s.html("<strong>"+o.Like+"</strong> "+TEXT_LIKE);s.on("click",function(e){if(e.preventDefault(),!$(this).hasClass("clicked")&&!r.hasClass("answered")){var t,n,i=a.attr("id").replace("comment-",""),o=s.find("strong").text();o=""==o?0:parseInt(o),s.find("strong").text(o+1),s.addClass("clicked"),r.addClass("answered"),t=i,n=function(e){},trackEvent("Like comment"),$.ajax({url:"//user.news.zing.vn/input/comment.aspx?action=like&id="+h,type:"POST",dataType:"text",data:{commentid:t},success:function(e,t,i){0==e.error?"function"==typeof n&&n():"function"==typeof n&&n("Unknown error")},fail:function(e,t,i){"function"==typeof n&&n(i)}})}}),r.append(s),r.append('<span class="separator">&bull;</span>');var l=$("<a>",{class:"btnDislike"}).html("<strong></strong> "+TEXT_DISLIKE).attr("href","#");0<o.Dislike&&l.html("<strong>"+o.Dislike+"</strong> "+TEXT_DISLIKE);return l.on("click",function(e){if(e.preventDefault(),!$(this).hasClass("clicked")&&!r.hasClass("answered")){var t=a.attr("id").replace("comment-",""),i=l.find("strong").text();if(i=""==i?0:parseInt(i),l.find("strong").text(i+1),l.addClass("clicked"),r.addClass("answered"),y)f(t,function(){});else if(!1!==window.DISLIKE_MUST_COMMENT){var n=a.find(".reply-form");0<n.length?n.find("textarea").attr("placehoder","Vì sao bạn không đồng ý với "+o.DisplayName+"?"):($replyForm=p({mode:"expanded",btnClose:!0,class:"reply-form",submitLabel:"Trả lời",placeholder:"Vì sao bạn không đồng ý với "+o.DisplayName+"?",parentid:o.ID,callback:function(){f(t,function(){})}}),r.after($replyForm),$replyForm.find("textarea").focus())}else f(t,function(){})}}),r.append(l),r}(e,d)),0<e.ReplyCount&&d.append(function(i){var n=$("<ul>",{class:"comments replies"});if(0<i.Replies.length&&(n.append(g(i.Replies[0],i.ID)),1<i.ReplyCount)){var e=$("<li>",{class:"btnMore"}).html("Xem thêm "+(i.ReplyCount-1)+" trả lời");e.on("click",function(){e.after(v()),e.remove(),m({parent_id:i.ID},function(e,t){n.html("").addClass("expanded"),e||(_.each(t,function(e){n.append(g(e,i.ID))}),b&&(debug("UpdateLayout --> render reply"),b()),$(window).resize())})}),n.append(e)}return n}(e)),d}function m(e,n){var o="//api.news.zing.vn/api/comment.aspx?action=get&id="+h;e&&e.parent_id&&(o+="&parent_comment_id="+e.parent_id),e&&e.paged&&(o+="&page="+e.paged),e&&"time"==e.order&&(o+="&sortByTime=1"),"unmoderated"===c&&(o+="&moderation=1"),e&&!0===e.nocache&&(o+="&ts="+Math.floor((new Date).getTime()/1e5)),$.ajax({url:o,type:"GET",dataType:"json"}).done(function(e,t,i){log("Comment --> comment fetched"),"function"==typeof n&&n(null,e)}).fail(function(e,t,i){warn("Comment --> error fetching comment: "+o),"function"==typeof n?n("Error fetching comment: "+t):console.error(i)})}function v(e){return e?'<div class="loader loader-inner ball-pulse-sync"><div></div><div></div><div></div></div>':$("<div>",{class:"loader loader-inner ball-pulse-sync"}).html("<div></div><div></div><div></div>")}this.getRenderedWidget=function(){return i},this.getTotalComment=function(){return d};var i=$("<div>",{class:"comment-widget","article-id":h,id:"comment-"+h});e&&e.mode&&i.addClass(e.mode);var w,y=!(!e||!e.isLive)&&e.isLive,c=e&&e.moderation?e.moderation:y?"unmoderated":"moderated",d=0,b=e&&e.updateLayout?e.updateLayout:null,x=window.vietUni?new vietUni:null;i.addClass(c),function(){if(debug("Comment --> init article #"+h),!window.ME)throw"User system must be available for comment to work!";y&&i.addClass("live"),i.append(t({order:y?"time":"weight",moderation:c,nocache:y}))}()}function _splitString(e,t,i){var n=(e=e.replace(/\s+/g," ")).split(/\s/);if(i&&n.length<i)return[e];for(var o=" "+n[t]+" "+n[t+1],a=e.split(o),r=o,s=1;s<a.length;s++)r+=a[s];return[a[0],r]}function _insertCharacter(e,t){var i=e.get(0).selectionStart,n=e.val();e.val(n.substring(0,i)+t+n.substring(i)),e.focus()}function _wordCount(e){return e&&""!=e.trim()?e.trim().split(/\s+/gi).length:0}function Interview(t){var i,o,e,n=t,a=n.hasClass("live"),r=n.hasClass("question"),s=n.find(".timer span"),l=n.find(".stream"),c=n.find(".btnSubmit, .info > a"),d=new Queue,u=$("<input>",{class:"user_name",type:"text",placeholder:"Họ và tên"}),h=$("<input>",{class:"user_email",type:"email",placeholder:"Địa chỉ email (không hiển thị)"}),p=$("<textarea>",{class:"user_question",placeholder:"Nội dung câu hỏi (vui lòng gõ tiếng Việt có dấu..."}),f=function(){n.find("time").each(function(){var e=$(this);e.html(formatTime(e.attr("datetime"),{friendly:!0}))})},g=function(){i?(s.html(15),e=setInterval(function(){var e=parseInt(s.text());0==e?m(function(e){g()}):s.html(e-1)},1e3)):console.error("Interview: no feedlink data")},m=function(r){e&&clearInterval(e),i?_(function(e,t){if(!e&&t){l.find("li").removeClass("exist");var i=l.attr("queue");i||(i="");for(var n=0,o=t.length;n<o;n++){var a=v(t[n].q_id);a?y($(a),t[n]):i.search(t[n].q_id.toString())<0&&(d.enqueue(t[n]),i+=t[n].q_id+" ")}l.attr("queue",$.trim(i))}f(),console.info("Stream updated. Current Queue length: "+d.getLength()),"function"==typeof r&&r()}):console.error("Interview: no feedlink data")},v=function(e){var t=n.find("#"+e);return 0!=t.length&&t.eq(0)},_=function(n){if(i){var e="?ts="+Math.floor((new Date).getTime()/1e4);$.getJSON(i+e,{format:"json"}).done(function(e){e.feeds&&0!=e.feeds.length?"function"==typeof n?n(null,e.feeds):console.log(e.feeds):"function"==typeof n&&n("No feeds available!")}).fail(function(e,t,i){console.error("Interview: fetch stream error",i),"function"==typeof n&&n("Error loading feed: "+t)})}else"function"==typeof n?n("Interview: no feedlink data"):console.error("Interview: no feedlink data")},w=function(){var e=Math.floor(100*Math.random()/5);if(d.isEmpty())setTimeout(w,1e3*e);else{var t=d.dequeue();t.a_content=t.a_content.replace(/http:/gi,window.location.protocol);var i=l.attr("queue");i&&(i=i.replace(t.q_id.toString(),""),l.attr("queue",$.trim(i)));var n=$("<li>",{id:t.q_id,class:"exist"}).html('<div class="question"></div><div class="answer"></div>').css({top:"-50px",opacity:"0.5"});n.find(".question").append('<time datetime="'+t.a_time+'" class="friendly"></time><p class="author">Bạn <span>'+t.q_user+'</span> hỏi:</p><div class="content">'+t.q_content+"</div>"),n.find(".answer").append('<p class="author">'+t.a_name+'</p><div class="content">'+t.a_content+"</div>"),b(n.find(".answer .content")),l.prepend(n),n.transition({top:"0px",opacity:1},500,function(){setTimeout(w,1e3*e)})}},y=function(e,t){0<e.find("video").length||(t.update&&t.update!=t.a_time&&(e.attr("update")&&e.attr("update")==t.update||(e.find(".question .author span").html(t.q_user),e.find(".question .content").html(t.q_content),e.find(".answer .content").html(t.a_content),e.attr("update",t.update),b(e.find(".answer .content")))),e.addClass("exist"))},b=function(i){i.find("> *").filter(function(){return 3==this.nodeType&&""!=$.trim($(this).text())}).wrap('<p class="auto-wrapped"></p>'),i.find("> p ~ br").remove(),i.find("*:not(.formatted):not(.widget)").removeAttr("style"),i.find("> *").filter(function(){return!$(this).hasClass("formatted")&&!$(this).attr("src")&&0==$(this).find("img").length&&0==$(this).find("iframe").length&&""==$.trim($(this).text())}).remove(),i.find("video").each(function(e,t){i.width(),new AdtimaPlayer($(t),{noads:!0,hover:!1,muted:!0})})},x=function(){console.log("Interview --> init interview controller");var e=$("<form>",{class:"question_form"});e.append(u),e.append(h),e.append(p),u.on("input propertychange",function(){4<u.val().trim().length?u.removeClass("error").addClass("validated"):u.removeClass("validated")}),h.on("input propertychange",function(){isValidEmail(h.val().trim())?h.removeClass("error").addClass("validated"):h.removeClass("validated")}),p.on("input propertychange",function(){5<p.val().split(/\s+/).length?p.removeClass("error").addClass("validated"):p.removeClass("validated")}),c.before(e),c.on("click",function(e){if(e.preventDefault(),!c.hasClass("submitting")){var t=u.val().trim(),i=h.val().trim(),n=p.val().trim();""==t?u.addClass("error"):u.removeClass("error"),""==i?h.addClass("error"):h.removeClass("error"),""==n?p.addClass("error"):p.removeClass("error"),""!=t&&""!=i&&""!=n&&(c.addClass("submitting"),c.text("Đang gửi câu hỏi..."),$.ajax({type:"POST",url:o.replace("/api/","/input/"),cache:!1,data:{AUTHOR:t,EMAIL:i,CONTENT:n}}).success(function(){c.removeClass("submitting").addClass("sent"),c.html("Câu hỏi đã được gửi!"),p.val(""),setTimeout(function(){c.removeClass("sent").text("Đặt câu hỏi")},5e3)}).fail(function(){c.removeClass("submitting"),c.html("Gửi câu hỏi"),new Dialog({icon:"alert",title:"Lỗi chưa gửi được",content:"<p>Câu hỏi của bạn chưa được gửi. Bạn vui lòng thử lại, hoặc có thể gửi câu hỏi thông qua phần bình luận của bài viết.</p>"})}))}})};!function(){console.log("Interview --> Initializing",t),n.addClass("interview").removeAttr("id",""),n.attr("submit")&&(o="//user.news.zing.vn"+n.attr("submit")),n.attr("data")&&(i="//api.news.zing.vn"+n.attr("data")),f();var e=n.find(".info .time span").text();n.find(".info .time span").html(formatTime(e)),0<l.length&&l.find(".answer .content").each(function(){b($(this))}),a&&(console.log("Interview --> live mode"),n.find(".timer").addClass("isLoading"),g(),w(),x()),r&&(console.log("Interview --> question mode"),x())}()}function LiveStream(a,i){function s(e){var t=e&&0<e.length?e:g.find("li"),n=t.width();t.each(function(e,t){var i=$(t);i.find(".event-content *:not(.formatted):not(.widget)").removeAttr("font").removeAttr("style"),i.find(".event-content > *").filter(function(){var e=$(this);return!e.prop("tagName").toLowerCase().match(/iframe|img|video|audio/gi)&&(!e.hasClass("formatted")&&(!(0<e.find("img,iframe,audio,video").length)&&""==$.trim(e.text())))}).remove(),i.find(".event-content iframe, .event-content video").each(function(e,t){var i=$(t);"video"==i.prop("tagName").toLowerCase()?new AdtimaPlayer(i,{noads:!0,hover:!1,muted:!1}):"iframe"==i.prop("tagName").toLowerCase()&&i.css({height:Math.round(9*n/16)+"px"})}),0<i.find(".event-content img").length&&i.addClass("picture"),0<i.find(".event-content iframe, .event-content .inner-video, .event-content video").length&&i.addClass("video")})}function r(){var e=g.find('li.featured, li[class*="medal_"], li[class*="footbal_"]').length,t=g.find("li.picture").length,i=g.find("li.video").length,n=g.find("li.phone, li.quotation, li.facebook, li.mail").length;0<e?(u.find(".btnFeatured strong").text(e),u.find(".btnFeatured").show()):u.find(".btnFeatured").hide(),0<t?(u.find(".btnImage strong").text(t),u.find(".btnImage").show()):u.find(".btnImage").hide(),0<i?(u.find(".btnVideo strong").text(i),u.find(".btnVideo").show()):u.find(".btnVideo").hide(),0<n?(u.find(".btnSocial strong").text(n),u.find(".btnSocial").show()):u.find(".btnSocial").hide()}function l(){v=!1,n.text(f),t=setInterval(function(){var e=parseInt(n.text());0==e?d.update():((e-=1)<10&&(e="0"+e),n.text(e))},1e3)}function c(e){e.addClass("highlighted"),setTimeout(function(){e.removeClass("highlighted")},1e3)}var d=this;if(!a||0==a.length)return window.warn("No Live Form found"),!1;var e,t,n,o,u=a.find(".controller"),h=i&&!0===i.isLive,p=h?"newest":"oldest",f=15,g=a.find(".events"),m=g.find(">li").length,v=!1;this.renderFeedList=function(e){var t=e;t.content=t.content.replace(/http:/gi,window.location.protocol),debug("Livestream --> checking feed: "+t.id);var i,n,o,a=function(e){if(g&&0!=g.length){var t=g.find("li#"+e);return 0<t.length?t.eq(0):void 0}}(t.id);if(a)debug("Livestream --> Feed exist",a),a.addClass("exist"),t.update&&function(e,t){if(e&&0!=e.length&&t&&t.update&&t.update!==t.published&&!(0<e.find("iframe, video").length)){var i=e.attr("updateTs");debug("Livestream --> updating existing feed",e);var n=t.title&&""!=$.trim(t.title)?"<h3>"+t.title+"</h3>":"";i&&i==t.update||(e.find(".event-content").html('<time datetime="'+(parseInt(t.published)+25200)+'" class="friendly">'+formatTime(parseInt(t.published)+25200,{friendly:!0})+"</time>"+n+t.content),e.removeClass().addClass(t.type),1==t.featured?e.addClass("featured"):e.removeClass("featured"),c(e)),e.attr("updateTs",t.update),s(e)}}(a,t);else{debug("Livestream --> New feed");var r=(n=(i=t).title&&""!=$.trim(i.title)?"<h3>"+i.title+"</h3>":"",(o=$("<li>",{class:i.type,id:i.id})).html('<div class="event"><div class="event-meta"><p class="type"></p></div><div class="event-content"><time datetime="'+(parseInt(i.published)+25200)+'" class="friendly">'+formatTime(parseInt(i.published)+25200,{friendly:!0})+"</time>"+n+i.content+"</div></div>"),1==i.featured&&o.addClass("featured"),0<o.find(".event-content img").length&&o.addClass("picture"),0<o.find("video, iframe, .inner-video").length&&o.addClass("video"),s(o),o.addClass("exist"),c(o),o);"oldest"===p?g.append(r):g.prepend(r),s(r)}},this.update=function(){var n,o;clearInterval(t),a.addClass("loading"),0!=g.length&&g.find("time").each(function(e){$(this).html(formatTime($(this).attr("datetime"),{friendly:!0}))}),o="function"==typeof(n=function(e,t){if(a.removeClass("loading"),e)warn(e);else{if(t&&0<t.length){g.find("> li").removeClass("exist");for(var i=0;i<t.length;i++)d.renderFeedList(t[i]);r()}h&&l()}}),$.getJSON("//api.news.zing.vn/public/v2/getLivestream",{format:"json",sort:p,c:50,id:e}).done(function(e){var t=e.data.feeds;t?o?n(null,t):debug(t):o&&n("Feed stream is empty")}).fail(function(e,t,i){o?n("Error fetching feed stream: "+t):(warn(t),warn(i))})},this.pause=function(){t&&(clearInterval(t),v=!0)},this.resume=function(){v&&l()},function(){if(0==u.length&&((e=a.attr("id"))?e=e.replace("livestream-",""):warn("No stream id provided!"),function(){if(!u||0==u.length){(u=$("<div>",{class:"controller"})).html('<a class="btnLatest" data-choice="all" href="#latest" title="Nội dung mới nhất"><span class="ti-timer"></span></a><a class="btnFeatured" data-choice="featured" href="#featured" title="Xem tóm tắt những nội dung quan trọng"><span class="ti-star"></span><strong></strong></a><a class="btnImage" data-choice="image" href="#image" title="Xem các nội dung ảnh"><span class="ti-gallery"></span><strong></strong></a><a class="btnVideo" data-choice="video" href="#video" title="Xem các nội dung có video"><span class="ti-video-camera"></span><strong></strong></a><a class="btnSocial" data-choice="social" href="#video" title="Xem các nội dung chia sẻ bởi bạn đọc và mạng xã hội"><span class="ti-facebook"></span><strong></strong></a><a class="btnSort" href="#sort" title="Sắp xếp nội dung"> <span class="text">'+("oldest"===p?"Cũ nhất":"Mới nhất")+'</span> <span class="ti-angle-down"></span></a>');var e='<ul class="controller-sort-content">';e+='<li data-sort="oldest" class="'+("oldest"===p?"active":"")+'">Cũ nhất</li>',e+='<li data-sort="newest" class="'+("newest"===p?"active":"")+'">Mới nhất</li>',e+="</ul>",u.find(".btnSort").append(e),i&&i.isLive&&(u.find(".btnLatest").addClass("active active-live"),a.attr("data-choice","all"),n=$("<span>",{class:"refresh_counter"}),o=$("<a>",{class:"btnRefresh"}).attr({href:"#updateStream",title:"Click để cập nhật ngay"}).append(n),u.append(o)),u.find("a").tooltipster({content:$(this).attr("title"),delay:50,speed:200,position:"top",animation:"fade",trigger:"hover",theme:["zing-tooltip"]}),u.find(".controller-sort-content li").on("click",function(){$(this).hasClass("active")||(p=$(this).attr("data-sort"),u.find(".controller-sort-content li").removeClass("active"),$(this).addClass("active"),u.find(".btnSort span.text").text($(this).text()),g.html(g.find("li").get().reverse()))}),u.find("a").on("click",function(e){e.preventDefault();var t=$(this);t.hasClass("btnSort")?t.find(".controller-sort-content").toggleClass("show"):t.hasClass("btnRefresh")?d.update():(u.find("a").removeClass("active"),t.addClass("active"),a.attr("data-choice",t.attr("data-choice")),g.addClass("expanded"),window.Waypoint&&Waypoint.refreshAll())}),a.prepend(u)}m=g.find(">li").length}()),e&&(debug("Initializing Live Form: #"+e),d.update()),i&&!0===i.isLive?a.addClass("live"):0<g.find('.featured, [class*="medal_"],[class*="footbal_"]').length?(u.find(".active").removeClass("active"),u.find(".btnFeatured").addClass("active"),u.after('<div class="message ending"><strong>Sự kiện đã kết thúc.</strong> Các nội dung quan trọng được tóm tắt bên dưới. Nhấn vào các lựa chọn để xem đầy đủ.</div>'),a.attr("data-choice","featured")):(u.find(".btnLatest").addClass("active"),a.attr("data-choice","all")),s(),r(),20<m){var t=$("<a>",{class:"btnMore",href:"#"}).html("Xem thêm");t.on("click",function(e){e.preventDefault(),g.addClass("expanded"),t.hide()}),g.after(t)}}()}function Gallery(e,r,t){var s,l,i,c,d,n,o,u=this,a=0,h=1;this.slideNext=function(){return u.slideTo(h+1)},this.slidePrev=function(){return u.slideTo(h-1)},this.getCurrentSlide=function(){return l.find("[slide-pos="+h+"]")},this.isEnded=function(){return h==a},this.isStart=function(){return 1==h},this.slideTo=function(e,t){if(!e)return!1;var i=l.find("[slide-pos="+e+"]");if(0==i.length)return!1;h=e,u.isEnded()?s.addClass("ended"):s.removeClass("ended"),u.isStart()?s.addClass("started"):s.removeClass("started");var n=i.prevAll("li").length*d,o=i.attr("data-image");o=d<=1024?o.replace(/\/w\d+\//gi,"/w1024/"):d<=1200?o.replace(/\/w\d+\//gi,"/w1200/"):d<=1600?o.replace(/\/w\d+\//gi,"/w1600/"):d<=2048?o.replace(/\/w\d+\//gi,"/w1920/"):o.replace(/\/w\d+\//gi,"/");var a=200;return!1!==t?(l.transition({left:"-"+n+"px"},300),a=500):l.css({left:"-"+n+"px"}),setTimeout(function(){i.hasClass("img-loaded")||(i.find("img").attr("src",o),i.addClass("img-loaded")),i.data("caption")?c.html(i.data("caption")):r&&r.summary?c.html(r.summary):c.html(""),window.AdtimaZingNews&&AdtimaZingNews.Helpers.reloadBanner&&AdtimaZingNews.Helpers.reloadBanner(AdtimaZingNews.position.r1)},a),!0},this.close=function(){s.hide(),s.remove(),enableScroll(),$(document).unbind("keydown",p)},this.show=function(e){e||(e=1),disableScroll(),$(document).keydown(p),s.show(),v(),u.slideTo(e,!1)};var p=function(e){39==e.which?u.slideNext():37==e.which?u.slidePrev():27==e.which?u.close():32==e.which?u.slideNext():13==e.which&&m()},f=function(e,t){if(isArray(e)){if(0==e.length)return;if(1<e.length){for(var i=0;i<e.length;i++)f(e[i],t);return}e=e[0]}var n=$("<li>",{"data-image":$(e).attr("src")}).html("<img/>").data("caption",t);l.append(n),a++,n.attr("slide-pos",a),$(e).attr("slide-pos",a)},g=function(){0<(s=$("#zgallery")).length&&s.remove(),(s=$("<div>",{id:"zgallery"})).html('<aside class="info"><a href="#" class="btnToogleSidebar">Ẩn nội dung <span class="ti-shift-left"></span></a><h3 class="gallery-title">'+e+'</h3><div class="gallery-caption"></div><div class="gallery-credit"></div><ul class="gallery-social"><li><a href="#" class="btnFacebook"><span class="ti-facebook"></span></a></li><li><a href="#" class="btnZalo"><span class="ti-zalo"></span></a></li></ul><div id="advR1" class="banner size_300x250"></div></aside><div class="slideshow"><a href="#" class="button btnNext"><span class="ti-angle-right"></span></a><a href="#" class="button btnPrev"><span class="ti-angle-left"></span></a><a href="#" class="button btnClose"><span class="ti-close"></span></a><div class="slideshow-images"><ul></ul></div></div>'),$("body").append(s),l=s.find(".slideshow-images ul"),i=s.find(".info"),c=s.find(".gallery-caption"),r&&r.date&&s.find(".gallery-title").before('<p class="gallery-date">'+r.date+"</p>"),r&&r.author&&s.find(".gallery-credit").html(r.author),s.find(".btnNext").on("click",function(e){e.preventDefault(),u.slideNext()}),s.find(".btnPrev").on("click",function(e){e.preventDefault(),u.slidePrev()}),s.find(".btnClose").on("click",function(e){e.preventDefault(),u.close()}),s.find(".btnToogleSidebar").on("click",function(e){e.preventDefault(),m()}),$(window).on("resize",v)},m=function(){s.hasClass("fullscreen")?(i.transition({left:"0px"},300),setTimeout(function(){s.removeClass("fullscreen"),i.find(".btnToogleSidebar").html('Ẩn nội dung <span class="ti-shift-left"></span>'),v()},500)):(i.transition({left:"-"+(i.width()+15)+"px"},300),setTimeout(function(){s.addClass("fullscreen"),i.find(".btnToogleSidebar").html('Luôn hiển thị <span class="ti-pin2"></span>'),v()},500))},v=function(){o=$(window).width()<=1.2*$(window).height()?"portrait":"landscape",s.attr("mode",o),d=s.width(),n=s.height(),l.css({width:(a+1)*d+"px",height:n+"px"});var e=l.find("li");l.css({width:e.length*d+"px"}),e.css({width:d+"px"}),_offset=(h-1)*d,l.css({left:"-"+_offset+"px"})};!function(){if(info("Gallery Initializing"),g(),r&&r.images){for(var e=0,t=0;t<r.images.length;t++){var i=$(r.images[t]).find("img").toArray(),n=$(r.images[t]).find(".caption").html();f(i,n),e+=i.length}debug("Gallery --> "+e+" images added")}if(!r||!1!==r.autoshow){var o=1;isElement(r.autoshow)&&(o=$(r.autoshow).attr("slide-pos"))&&(o=parseInt(o)),u.show(o)}debug("Gallery --> done init")}()}function GridLayout(e,t){var s=window.GRID_LAYOUT||[2,3],m=window.GRID_PADDING||1,l=1440;if(!(e.hasClass("panorama")||0<e.find(".twentytwenty-container").length||!0===window.disableGridLayout)){var i,c=function(e){var t=e.find("img");if(debug("GridLayout --> reflow row with images = "+t.length,e),0==t.length)return e.remove(),void Waypoint.refreshAll();if(1!=t.length)if(2!=t.length&&3!=t.length)if(4==t.length)e.before(u([t.eq(0),t.eq(1)])),Waypoint.refreshAll(),c(e);else{var i=d(0,s.length-1),n=s[i];debug("GridLayout --> random row #"+i+" = "+n);for(var o=[],a=0;a<n;a++)o.push(t.eq(a));e.before(u(o)),Waypoint.refreshAll(),c(e)}else t.each(function(e,t){var i=$(t).attr("src");i.search(/\/w\d+\//gi)<0&&i.search(".gif")<0&&$(t).attr("src",i.replace("/Uploaded/","/w860/Uploaded/"))});else{var r=t.attr("src");r.search(".gif")<0&&(r.search(/\/w\d+\//gi)<0?(t.attr("src",r.replace("/Uploaded/","/w"+l+"/Uploaded/")),debug("full width = "+t.attr("src"))):(t.attr("src",r.replace(/\/w\d+\//gi,"/w"+l+"/")),debug("optimized width = "+t.attr("src"))))}},d=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},u=function(e){debug("GridLayout --> row created",e);var t=$("<tr>").html("<td></td>");if(e.constructor===Array)for(var i=0;i<e.length;i++)t.find("td").append($(e[i]));else t.find("td").append($(e));return t},n=function(){e.find("td:not(.caption)").each(function(e,t){var i=$(t),n=i.find("img"),o=i.find(".photoset-item"),a=i.parent("tr").width();if(0!=o.length){for(var r,s=n.map(function(){var e=$(this);return e.attr("width")&&e.attr("height")?parseInt(e.attr("width"))/parseInt(e.attr("height")):this.naturalWidth/this.naturalHeight}).get(),l=0,c=0,d=Math.min.apply(Math,s),u=0;u<o.length;u++)l+=s[u]/d;var h=(a-(r=2*m*(o.length-1)))/l,p=Math.floor(h/d),f=0;n.each(function(e){f=Math.round(p*s[e]),c+=f,$(this).height(p),$(this).width(f)});var g=a-r-(c-f)-1;n.eq(n.length-1).attr("original-width",f).css({width:g+"px"})}})};1440<=e.width()&&(l=1920),t&&t.layout&&(s=t.layout),t&&t.padding&&(m=t.padding),0<(i=e.hasClass("gallery")?e.find("tr").filter(function(){return 0<$(this).find("td>img").length}):e.find("tr").filter(function(){return 1<$(this).find("td>img").length})).length&&(e.addClass("gallery"),i.each(function(e,t){c($(t))}),e.find("img").wrap('<div class="photoset-item" style="margin: 0 '+m+'px"></div>'),n(),$(window).on("resize",function(){n()}))}}function Article(e){function n(e){e.each(function(e,t){var i=$(t).find("a").attr("href"),n=getArticleId(i);x.hasOwnProperty(n)?($(t).remove(),info("Remove dupplicated article "+i)):x[n]=!0})}var o=this,u=e||$(".the-article");if(u&&0!=u.length){window.TEST_LIVE_ARTICLE&&u.addClass("status-live type-stream");var a=u.attr("article-url")?u.attr("article-url"):window.location.origin+window.location.pathname;u.attr("article-url",a);var t=$.trim(u.find(".the-article-title").text()),i=u.attr("article-id")?u.attr("article-id"):getArticleId(a);i||warn("Cannot identify article id");var r=u.find(".the-article-summary").text(),s=getArticleShortURL(a),h="text";u.hasClass("type-picture")?h="picture":u.hasClass("type-video")?h="video":u.hasClass("type-stream")?h="stream":u.hasClass("type-special")?(h="special",window.disableAdtimaBanner=!0):u.hasClass("type-infographic")?h="infographic":u.hasClass("type-hasvideo")&&(h="hasvideo");var p="regular";u.hasClass("layout-no-sidebar")?p="no-sidebar":u.hasClass("layout-special")&&(p="special");var l,f=u.hasClass("pr"),c=0<u.find(".the-article-comment").length,g=u.hasClass("status-live"),m=u.hasClass("status-ongoing"),v=u.find(".the-article-body"),_=0<v.find("table.picture[align*=left], table.picture[align*=right]").length,d=u.find(".main .sidebar"),w=(d.find("#advR3"),u.find(".recommendation")),y=u.find(".the-article-comment"),b=!0===window.enableLiveComment||g&&"stream"==h&&"no-sidebar"!=p&&"special"!=p,x={},C=function(){var e=v.find(".inner-article"),l=$("<div>",{id:"innerarticle"});e.each(function(e,t){var i=$(t).find(".cover").css("background-image").match(/https:\/\/.+\.jpg/i),n=$(t).find(".title").text(),o=$(t).find("a").attr("href"),a=$(t).find(".summary").text(),r=getArticleId(o);if(i&&n&&o&&!x.hasOwnProperty(r)){x[r]=!0,$(t).parents(".comment").hide(),$(t).remove(),debug("RenderRelatedArticles ->> in live, hide inner articles");var s=$("<article>",{class:"article-item related","article-id":r});s.append('<p class="article-thumbnail"><a href="'+o+'"><img data-src="'+i[0]+'"></a></p>'),s.append('<h3 class="article-title"><a href="'+o+'">'+n+"</a></h3>"),s.append('<p class="article-summary">'+a+"</p>"),l.append(s)}}),l.find(".article-item").length&&(v.append(l),initTrackers(l,!0));var t=$("#mostview-articles .article-item");if(5<t.length&&(t=t.slice(0,4)),n(t),setTimeout(function(){$("#mostview-articles .article-item").length<=1&&(debug("_renderRelatedArticles --> remove most view articles setion on sidebar"),$("#mostview-articles").remove())},0),n($(w.find(".article-item"))),w.find(".article-list .article-item").length||(debug("Article --> remove all children of recommend section"),w.children().remove()),0<w.length&&w.hasClass("has-sidebar")){var i=w.find(".banner");if(0<i.length){if(w.find(".article-item").length<4)return debug("Article --> remove banner ads"),void i.remove();debug("Article --> prepare related banner..."),i.scrollToFixed({marginTop:70,offset:!0,limit:function(){return w.offset().top+w.height()-550},preAbsolute:function(){i.addClass("noscroll")},postAbsolute:function(){i.removeClass("noscroll")},fixed:function(){i.addClass("fixedtop")},unfixed:function(){i.removeClass("fixedtop")}})}}},T=function(){var o=$("#article-nextreads");if(0<o.length&&o.attr("data-source")){var a=o.attr("data-source");window.ME&&(a+="?group="+ME.getBehaviorGroup()),o.html('<div class="ellipsis"><div></div><div></div><div></div><div></div></div>'),o.waypoint({handler:function(e){if(!o.hasClass("inited")){o.addClass("inited"),debug("Infinite --> fetch reading stream for targeting group = #"+ME.getBehaviorGroup());var n=$("<div>");n.load(a+" #trending.page-wrapper",function(e,t){if("error"!=t&&0!=n.find(".page-wrapper").length){if(n.find(".section-content > .article-list .article-item").each(function(e,t){var i=$(t).attr("article-id"),n=$(t).find("a").attr("href");(ME.isRead(i)||x[i])&&(info("Remove read and dupplicated articles "+n),$(t).remove())}),o.html(""),o.append(n),initTrackers(o.find(".section")),o.find("#advR3").attr({id:"advR4",class:"scrollfixed"}).addClass("size_300x600"),o.hasClass("loaded")||(o.addClass("loaded"),o.find(".scrollfixed").scrollToFixed({marginTop:70,offset:!0})),window.AdtimaZingNews&&(debug("Adtima --> reload banner R4..."),AdtimaZingNews.Helpers.reloadBanner(AdtimaZingNews.position.r4)),trackPageviewGA(a,getPageType()),window.za&&za.trackPageview({url:a}),initInfiniteList(o.find(".section-content > .article-list"),function(e){window.AdtimaZingNews&&(debug("Adtima --> reload banner R4..."),AdtimaZingNews.Helpers.reloadBanner(AdtimaZingNews.position.r4))}),FETCHED_ADS){var i=o.find("#news-latest .section-content > .article-list .article-item");i.eq(2).after(renderNativePR(FETCHED_ADS[NATIVE_ARTICLE.infinite1.name])),i.eq(8).after(renderNativePR(FETCHED_ADS[NATIVE_ARTICLE.infinite2.name])),i.eq(13).after(renderNativePR(FETCHED_ADS[NATIVE_ARTICLE.infinite3.name])),i.eq(18).after(renderNativePR(FETCHED_ADS[NATIVE_ARTICLE.infinite4.name])),i.eq(23).after(renderNativePR(FETCHED_ADS[NATIVE_ARTICLE.infinite5.name]))}}else o.remove()})}},offset:"150%"})}},E=function(){var n="";d.find(".topics .author").each(function(e,t){var i=$(t).find("h3 a");0<i.length&&(n+='<a href="'+i.attr("href")+'">',n+=i.text(),n+="</a>")});var e=$(".the-article-credit .author");if(0<e.length){var t=e.text().replace(/\(.*\)/i,"").split(/\s*-\s*/i);debug(t);for(var i=0;i<t.length;i++){var o=t[i].trim();if(debug(o.toLowerCase()),n.toLowerCase().search(o.toLowerCase())<0){var a="https://news.zing.vn/"+o.replace(/\s+/i,"-")+"-tim-kiem.html?type=3";n+='<a href="'+a+'">'+o+"</a>"}}}if(""!=n){var r=$("<li>",{class:"the-article-author"}).html(n);u.find(".the-article-meta").prepend(r)}},S=function(){v.find("p abbr, .caption abbr").each(function(e,t){var i=$(t);if(!(0<i.parents("a, h3, h1").length)&&i.hasClass("rate-usd")){var n=i.text().trim();if(0<v.find('abbr[data-content="'+n+'"]').length)return;i.attr("data-content",n);var o=n.match(/\d+([.,]\d+)*/gi);o&&(o=(o=o[0]).replace(/\./gi,"").replace(/,/gi,"."),o=parseFloat(o),0<=n.search(/triệu/gi)&&(o*=1e6),0<=n.search(/nghìn|ngàn/gi)&&(o*=1e3),0<=n.search(/tỷ|tỉ/gi)&&(o*=1e9),getUSDRate(function(e,t){!e&&t&&""!=(o=1e12<(o=Math.round(o*t.buy))?"":1e9<o?format("#,###.#",o/1e9)+" tỷ đồng":1e6<o?format("#,###.#",o/1e6)+" triệu đồng":format("#,###.",o)+" đồng")&&(i.addClass("quickview"),i.tooltipster({content:o.replace(/\./gi,","),theme:["zing-info-card","currency"],animation:"fade",trigger:"hover",contentAsHTML:!0}))}))}}),d.find("ul.topics li").each(function(e,t){var i=$(t).attr("topic-id");if(i){var n=$(t).find(".stock"),o=$(t).attr("class")||"",a=v.find("p a.autolink[topic-id="+i+"], .caption a.autolink[topic-id="+i+"]");if(0<a.length){var r='<p class="logo-quicklook"><span class="znews-ic-flash"></span> Xem nhanh</p>';r+=$(t).html(),0<n.length&&(a.after(n),r+='<div class="widget-stock">'+n.html()+"</div><br/>"),a.addClass("quickview"),a.tooltipster({content:r,theme:["zing-info-card","profile",o],animation:"fade",trigger:"hover",contentAsHTML:!0})}}})},k=function(){window.INIT_TIMER&&event("Article Content Loaded",{label:getPageType(),value:(new Date).getTime()-INIT_TIMER.getTime()}),log("Article #"+i+" --> body fully loaded"),u.addClass("loaded"),o.updateSidebarLayout(),window.Waypoint&&Waypoint.refreshAll()},A=function(){if(!c)return debug("Article #"+i+" --> comment disabled"),_testImagesLoaded(),!1;var e=window.commentModerationMode?window.commentModerationMode:b?"unmoderated":"moderated";return l=new Comment(i,{isLive:b,mode:b?"simple":"full",moderation:e,updateLayout:function(){Waypoint.refreshAll(),u.hasClass("loaded")?o.updateSidebarLayout():I(v,k)}}),y.append(l.getRenderedWidget()),b&&"special"!==p&&"no-sidebar"!==p&&y.scrollToFixed({marginTop:70,removeOffsets:!0,limit:function(){return w.offset().top-y.height()}}),!0},I=function(e,t){e&&e.waitForImages({finished:t,each:function(e,t,i){if($(this).is("img"))if(i)$(this).addClass("loaded");else{var n=$(this).attr("src");$(this).attr("src",n+"#"+(new Date).getTime()).addClass("reloaded")}},waitForAll:!0})};this.updateSidebarLayout=function(){if(0!=d.length)if("function"!=typeof window.renderSidebarLayout){var e,t=d.height(),i=0;v.height();d.find("> *:visible").each(function(e,t){i+=$(t).height()}),e=t-i;var n=$("#mostview-articles");e<=n.height()?n.hide():(1500<i?n.css({top:"1500px",bottom:"auto"}):n.css({top:i+100+"px",bottom:"auto"}),n.scrollToFixed({marginTop:100,offset:!0,limit:w.offset().top-n.height()-100,preAbsolute:function(){n.addClass("noscroll")},postAbsolute:function(){n.removeClass("noscroll")},fixed:function(){n.addClass("fixedtop")},unfixed:function(){n.removeClass("fixedtop")}}))}else renderSidebarLayout(u)};var O,z,D,P,L,M=function(){0<=window.zaConfig.contentFilter.search(/19/gi)||window.disableAdtimaBanner||window.disableBanner||window.disableNativeAds?debug("Adtima --> disable native PR for special/sensitive content..."):(debug("Article --> loading article native ads..."),loadZaloAds(NATIVE_ARTICLE,{targeting:{articleid:getArticleId(),catename:window.cate_path,cateid:window.zaConfig.pageid,topicid:window.zaConfig.topicid}},function(e,t){if(!e&&t){if(0<w.length&&(t[NATIVE_ARTICLE.recommend1.name]&&w.find(".article-list article").eq(2).before(renderNativePR(t[NATIVE_ARTICLE.recommend1.name])),w.hasClass("has-sidebar")&&t[NATIVE_ARTICLE.recommend2.name]&&w.find(".article-list article").eq(6).before(renderNativePR(t[NATIVE_ARTICLE.recommend2.name]))),t[NATIVE_ARTICLE.related.name]&&(debug("Adtima --> render body native ads"),$("#mostview-articles .article-list").append(renderNativePR(t[NATIVE_ARTICLE.related.name]))),!0===window.isDevMode){var i=u.find(".the-article-body .banner");1<=i.length&&t[NATIVE_ARTICLE.body1.name]&&(i.eq(0).hasClass("size_masthead")||i.eq(0).after(renderNativePR(t[NATIVE_ARTICLE.body1.name]))),2<=i.length&&t[NATIVE_ARTICLE.body2.name]&&i.eq(1).after(renderNativePR(t[NATIVE_ARTICLE.body2.name])),3<=i.length&&t[NATIVE_ARTICLE.body3.name]&&i.eq(2).after(renderNativePR(t[NATIVE_ARTICLE.body3.name])),4<=i.length&&t[NATIVE_ARTICLE.body4.name]&&i.eq(3).after(renderNativePR(t[NATIVE_ARTICLE.body4.name]))}FETCHED_ADS=t}else warn("Adtima --> error loading native ads or no zones")}))},B=function(){"video"!=h&&0!=v.length&&(1e3<DEVICE.screen_width&&(v.bind("copy",Y),v.on("mouseup",function(){setTimeout(function(){var e=getSelectedText();e&&$.trim(e)},10)}),v.find(".inner-article a").on("click",function(e){$(this).attr("href").replace(/#\.*/i,"");$(this).attr("href",_href+"#inner-article")})),"special"!=p&&!0!==window.disableAutoFormat&&V(),function(){if(!0!==window.disableBanner&&!f){if("tablet"!==DEVICE.type)if("function"==typeof window.renderAds)renderAds(u);else{var i="native",n="body-banner";"no-sidebar"!=p||"text"!=h&&"hasvideo"!=h&&"picture"!=h||(i="size_masthead",n="advMiddle");var o=0;if(_)v.find("h3").each(function(e,t){o<4&&3<$(t).prevAll().length&&(o++,$(t).before('<div class="banner '+i+'" id="'+n+o+'"></div>'))});else{var e=v.find(">p,>table.picture, >.notebox, >.video"),t=Math.floor((e.length-2)/4);t<5&&(t=5),debug("Adtima --> article length = "+e.length+", division = "+t);for(var a=3;a<e.length-2&&o<4;a+=t)o++,e.eq(a).after('<div class="banner '+i+'" id="'+n+o+'"></div>'),debug("Adtima --> render body banner ads (pos = "+a+"): "+o)}}var r=$(".the-article");if(!r.hasClass("type-hasvideo")&&!r.hasClass("layout-no-sidebar")&&!_){var s=r.find(".the-article-body > p, .the-article-body .picture td");s=s.filter(function(e,t){return 10<t.innerText.split(" ").length||$(t).hasClass("pic")});var l=0<r.find(".notebox").length?s.length+1:s.length;if(12<=l){debug("Ads inreads --> has "+(l+1)+" paragraphs");var c=$(s[8]),d="<div class='banner' id='advArticleInread'></div>";c.hasClass("caption")||c.hasClass("pic")?c.parents(".picture").after(d):c.after(d)}else debug("Ads inreads --> not enough paragraphs")}M(),"xuat-ban"==window.cate_path&&$(".the-article").after('<iframe src="https://news.zing.vn/interactive/bannerngang/mua-sach-tiki-post2.zing" style="width: 100%;height: 850px;overflow: hidden;margin-top: 50px;"></iframe>')}}(),!0!==window.disableArticleWidget&&(H(),j()),U(),W(),N(),!0!==window.disableAutoFormat&&(v.find(".inner-article a").removeAttr("target"),v.find('a[href="#"]').on("click",function(e){e.preventDefault()})),debug("Article #"+i+" --> prepare article content..."))},N=function(){v.find("table.picture").each(function(e,t){"infographic"!==h&&0==$(t).find(".pic > em").length&&new GridLayout($(t)),0==$(t).find("td.caption").length&&$(t).addClass("nocaption")}),!0!==window.disableImageOptimize&&v.find("img[data-src]").each(function(e,t){$(t).unveil({threshold:250,autoscale:!0},function(){})}),q(),R(),F()},R=function(){!0===window.disablePhotoZoom||window.zaConfig&&"3535"===window.zaConfig.topicid||v.find("table.picture img").on("click",function(e){e.stopPropagation(),e.preventDefault(),new Gallery(t,{date:u.find(".the-article-publish").text(),summary:r,images:v.find(".picture"),author:u.find(".the-article-credit").html(),onLoaded:function(){},autoshow:this})})},F=function(){var e=v.find(".panorama .pic");0<e.length&&(log("Article #"+i+" --> render panorama 360 widget"),loadPlugin(PLUGINS.pano360,function(){e.on("click",function(e){e.preventDefault(),e.stopPropagation(),Detector.webgl?init360Viewer($(this).find("img")):alert("Trình duyệt hoặc thiết bị của bạn không hỗ trợ tính năng này. Vui lòng sử dụng trình duyệt Chrome, Firefox hoặc Safari.")})}))},H=function(){var e=v.find('*[id*="livestream"]');0<e.length&&e.each(function(e){new LiveStream($(this),{isLive:u.hasClass("status-live")||u.hasClass("status-updating")})})},j=function(){var e=v.find('[id="interview"],.interview');0<e.length&&e.each(function(e){new Interview($(this))})},W=function(){v.find("div.audio").each(function(e,t){var i=$(t).find('a[href*="mp3"],a[href*="wav"]');if(0<i.length){var n=i.eq(0).attr("href");n&&(n=n.replace(/w\d+\//i,"")),i.eq(0).after('<table class="audio" align="center"><tr><td><audio controls="" style="width: 100%;"><source src="'+n+'" type="audio/mpeg"></audio></td></tr><tr><td class="caption">'+i.eq(0).text()+"</td></tr></table>"),i.remove()}})},q=function(){v.find(".twentytwenty-container").each(function(e,t){Waypoint.refreshAll(),new Waypoint.Inview({element:t,enter:function(e){i($(t))},entered:function(e){i($(t))},exit:function(e){},exited:function(e){}})});var i=function(t){t.hasClass("inited")||(debug("Article --> init before after widget...",t),t.addClass("inited"),I(t,function(){debug("Article --> images loaded for before after...");var e=t.attr("data-orientation");e&&"verticle"==e?t.twentytwenty({default_offset_pct:.3,orientation:"vertical",before_label:"Trước",after_label:"Sau"}):t.twentytwenty({default_offset_pct:.7,before_label:"Trước",after_label:"Sau"})}))}},V=function(){0!=v.length&&(v.find("*:not(.formatted):not(.widget)").removeAttr("style"),v.find("> p ~ br").remove(),f||v.find("> *:not([class*=widget]):not([class*=formatted])").filter(function(){var e=$(this),t=e.prop("tagName").toLowerCase();return"iframe"!=t&&("img"!=t&&("video"!=t&&("audio"!=t&&(!(0<e.find("img,iframe,audio,video").length)&&""==$.trim(e.text())))))}).remove(),v.find("> *").filter(function(){return 3==this.nodeType&&""!=$.trim($(this).text())}).wrap('<p class="auto-wrapped"></p>'),debug("Article #"+i+" --> content formatted..."))},U=function(){!0!==window.disableVideoPlayer?v.find("video").each(function(e,t){var i=0<$(t).parents('[id*="livestream"]').length,n=0<$(t).parents(".interview").length;if(!i&&!n){var o=$(t).parents(".cms-video"),a=0<o.length?o.find("a"):null;if(0<$(t).parents(".picture").length||!$(t).attr("controls"))return;var r={},s={pageid:zaConfig.pageid,cate:window.cate_path,postid:getArticleId(),topicid:zaConfig.topicid};a&&0<a.length&&(r={url:a.attr("href"),title:a.text(),cateid:a.attr("cate-id"),catename:a.attr("cate-name"),hash:"#inlinevideo"},Boolean(r&&r.url)&&(s.postid=getArticleId(r.url)),a.attr("cate-id")&&(s.pageid=a.attr("cate-id")),a.attr("cate-name")&&(s.cate=a.attr("cate-name")),a.attr("topic-id")&&(s.topicid=a.attr("topic-id")));var l=Boolean(r&&r.url),c={videoId:getArticleId(),popPlayer:!0,shareLink:!!l&&r.url,tracking:!!l&&r,title:!!l&&(r&&r.title),noads:0<$(t).parents("h1").length||"special"==p||"false"==o.attr("allowads")||"false"==u.attr("allowads"),ads:s,eventTracking:!0};debug("Article --> render inner video",c),new AdtimaPlayer($(t),c)}}):debug("Article #"+i+" --> disable video player")},Y=function(){var e=document.getElementsByTagName("body")[0],t=o.getSelection();if(!1!==t&&!(t.toString().length<300)){var i=t+("<br /><br /> Bài viết: <a href='"+a+"' target='_blank'>"+a+"</a>"),n=document.createElement("div");n.style.position="absolute",n.style.left="-99999px",e.appendChild(n),n.innerHTML=i,t.selectAllChildren(n),window.setTimeout(function(){e.removeChild(n)},0)}};info("Article #"+i+" --> initializing: "+h),window.ME&&!MODE_PREVIEW&&ME.markRead(),u.attr("cate-id")?(u.attr("cate-id"),u.attr("cate-name")):(window.zaConfig.pageid,window.cate_path),g&&(info('meta[http-equiv="REFRESH"] is removed'),$('meta[http-equiv="REFRESH"]').remove()),"desktop"===window.DEVICE.type&&$(window).on("DOMContentLoaded",function(){var e=$("#zing-header"),c=null,d=!1,t=0,i=$(".the-article"),n=i.find(".the-article-title"),o=i.find(".the-article-body"),u=70,h=500;if("special"===p&&o.length){var a=o.find(">h1");a.length&&(a=a.eq(0),h=a.find("img,video").length?window.innerHeight:a.offset().top+a.height()-u)}else n.length&&(h=Math.floor(n.offset().top)+n.height()-u);h<=0&&(h=500),function(){c=$("<div>",{class:"sticky-header"});var e="";g?e="sticky-header__title--live":m&&(e="sticky-header__title--ongoing");var t=$(".the-article-title").text(),i=window.cate_name?window.cate_name:$(".the-article-category").text(),n=window.location.origin+"/"+window.cate_path+".html",o=$("<a>",{href:"/",class:"sticky-header__logo"}).append($("<img>",{src:"//static-znews.zadn.vn/images/logo-zing-v6.svg",alt:"ZingNews"})).append("<span>Tri thức trực tuyến</span>"),a=$("<div>",{class:"sticky-header__title "+e}).append('<p><a href="'+n+'">'+i+"</a><span>"+t+"</span></p>"),r=$("<div>",{class:"sticky-header__share"}),s=$("<div>",{class:"sticky-header__container"}),l=function(){var e=0;if("special"===p)e=h;else{var t=$(".the-article-meta");e=t.offset().top}return e-u}();warn("distanceTop: "+l),a.on("click",function(){d=!0,$("html, body").animate({scrollTop:l},1e3,function(){setTimeout(function(){d=!1},100)})}),a.find("a").on("click",function(e){e.stopPropagation()}),r.append(renderArticleTools({hasZalo:!0,hasFace:!0,hasComments:!0,hasMoreList:!0})),c.append(s.append(o).append(a).append(r)),$("body").append(c)}();var r=$(".js-more-list");$(window).on("scroll",function(){!d&&c&&(d=!0,window.requestAnimFrame(function(){window.scrollY>t?window.scrollY>h&&(c.addClass("sticky-header--show"),e.addClass("zing-header-hide")):(c.removeClass("sticky-header--show"),e.removeClass("zing-header-hide")),r.hide(),d=!1,t=window.scrollY}))})}),B(),E(),O="",z=$(".the-article-title, .the-article-summary, .the-article-body"),D=$("<div>",{id:"error-report"}),P=$("<button>",{id:"btn-report-share"}).text("Chia sẻ"),L=$("<button>",{id:"btn-report-error"}).text("Báo lỗi"),D.append(L).append(P),$("body").append(D),z.on("mouseup",function(){O!=getSelectedText()?setTimeout(function(){if(""!==(O=getSelectedText())&&(t=window.getSelection()).anchorNode.parentNode.innerText===t.focusNode.parentNode.innerText){var e=window.getSelection().getRangeAt(0).getBoundingClientRect();D.css({top:e.top+window.scrollY-50,left:e.left+e.width/2}).fadeIn(100),event("Report Error",{label:"Show Error Popup"})}else D.hide();var t},50):D.hide()}),P.on("click",function(){shareFacebook(s+"?utm_source=facebook&utm_campaign=article&utm_medium=desktop_float_menu"),D.hide(),event("Report Error",{label:"Click Share Button"})}),L.on("click",function(){showReportDialog(),D.hide(),event("Report error --> ",{label:"Click Report Button"})}),0==u.find(".the-article-credit .source").length&&u.addClass("zing"),c?(b?(debug("Article --> article enable live comment"),d.find("> *:not(.pr-articles)").remove(),y.attr("status","live"),d.append(y)):debug("Article --> article disable live comment"),A()):debug("Article --> article disabled comment"),debug("Article --> add target=_blank to all external links"),$(".the-article-body a").filter(function(e,t){var i=$(t).attr("href");return!(!i||-1===i.indexOf("http")||-1!==i.indexOf("news.zing.vn")||-1!==i.indexOf("zdn.vn")||-1!==i.indexOf("zadn.vn")||"#"===i||-1!==i.indexOf("[name]"))}).attr("target","_blank").addClass("external-link"),function(){var e=$(".the-article .sidebar"),i=260;if(e.length){e.find(">*").each(function(e,t){i+=$(t).outerHeight()});var t=$(".the-article .main");t.length&&t.height()<i&&e.find(".banners").hide()}}(),S(),C(),hideRead($("#mostview-articles")),"special"!=p&&T(),u.find(".the-article-viral-count").tooltipster({content:"Chia sẻ",delay:50,speed:200,position:"bottom",theme:"zing-tooltip"}),u.find(".the-article-comment-count, .comment-count").tooltipster({content:"Bình luận",delay:50,speed:200,position:"bottom",theme:"zing-tooltip"}),u.find(".the-article-tags *").on("click",function(e){e.preventDefault();var t=$(this).text().trim();t="https://news.zing.vn/"+t.replace(/\s+/gi,"-")+"-tim-kiem.html?type=2",window.location.href=t})}else warn("Article #"+i+" --> No article provided or found!")}function showReportDialog(){var s,l=getSelectedText(),e='<h5>Góp ý</h5><form><textarea placeholder="Điền nội dung góp ý ..."></textarea></form>';l&&(e='<h5>Nội dung lỗi:</h5><div class="selected-text">'+l+'</div><h5>Sửa lỗi</h5><form><textarea placeholder="Điền nội dung báo lỗi ..."></textarea></form>'),s=new Dialog({className:"feedback-error",icon:'<span class="'+(l?"ti-alert":"ti-marker-alt")+'"></span>',title:l?"Báo lỗi bài viết":"Góp ý bài viết",content:e,btnConfirm:{label:l?"GỬI BÁO LỖI":"GỬI GÓP Ý",default:!0,action:function(){var e,t,i,n=s.getBody(),o=n.find("textarea"),a=o.val(),r=n.find(".note");""==$.trim(a)||a.length<4?(o.addClass("error"),0==r.length?n.find("form").append('<p class="note error">Vui lòng nhập thông tin lỗi chi tiết.</p>'):r.addClass("error").text("Vui lòng nhập thông tin lỗi chi tiết.")):(o.hide(),r.remove(),s.addLoader(),s.hideButton("btnConfirm"),e={articleId:getArticleId(),type:"content",error:l,feedback:a},i="function"==typeof(t=function(){new Dialog({className:"success-sent-error",icon:'<span class="ti-check"></span>',title:"Đã gửi báo lỗi",content:"<p>Cám ơn bạn đã gửi báo lỗi. Tòa soạn sẽ kiểm tra và khắc phục lỗi trong thời gian sớm nhất.</p>"})}),isEmpty(e)?i&&t("No content provided!"):$.ajax({type:"POST",url:"//api.news.zing.vn/public/v2/submit/feedback",cache:!1,data:{articleid:e.articleId,type:e.type,error:e.error,feedback:e.feedback}}).done(function(){i&&t()}).fail(function(){i&&t("Fail")}))}},btnClose:{label:"HỦY"}})}function getWeatherIcon(e){return e?(debug("Weather --> fetch icon = "+e),e.match(/mây/gi)?t=WEATHER_ICONS.cloudy:e.match(/mưa/gi)?t=WEATHER_ICONS.rain:e.match(/trời trong/gi)?t=WEATHER_ICONS.clear:e.match(/nắng/gi)?t=WEATHER_ICONS.sunny:e.match(/gió/gi)?t=WEATHER_ICONS.windy:e.match(/giông/gi)?t=WEATHER_ICONS.tstorms:e.match(/tuyết/gi)?t=WEATHER_ICONS.snow:e.match(/sương/gi)&&(t=WEATHER_ICONS.fog),t?'<img src="'+URL_BASED+t+'" />':""):"";var t}function Utilities(){var i="znUtilities",n=function(){var e=$("#widget-ticker .latest-news"),t=e.find(".active");if(0==t.length)e.find("li").eq(0).addClass("active");else{var i=t.next("li");0==i.length&&(i=e.find("li").eq(0)),t.removeClass("active"),i.addClass("active")}requestAnimFrame(function(){setTimeout(n,2500)})},o=function(e){var t=$("#widget-finance");0==t.length&&(t=$("<div>",{id:"widget-finance"}),$("#section-latest .section-sidebar").prepend(t));var i=0<=parseFloat(e.stock[0].percent)?"positive":"negative",n=0<=parseFloat(e.stock[0].percent)?"positive":"negative";t.html('<ul class="stock"><li><strong>VNIndex</strong><span>'+e.stock[0].index+'</span> <em class="'+i+'">'+e.stock[0].change+"</em></li><li><strong>HNXIndex</strong><span>"+e.stock[1].index+'</span> <em class="'+n+'">'+e.stock[1].change+'</em></li></ul><ul class="exchange"><li><strong>Mua vào</strong><span>'+format("#,###.",e.exchange[0].buy)+"</span></li><li><strong>Bán ra</strong><span>"+format("#,###.",e.exchange[0].sell)+"</span></li></ul>")},a=function(e){if(e){var t=zGetCookie("znLocation"),i=$("<ul>",{id:"widget-weather"});if(t);else{var n=s("hanoi",e),o=s("tphochiminh",e);i.html('<li city="hanoi"><strong>Hà Nội</strong><em>'+n.CT+"&deg;C</em> / <span>"+n.MinT+"-"+n.MaxT+"&deg;C</span>"+getWeatherIcon(n.CI)+'</li><li city="tphochiminh"><strong>TP.HCM</strong><em>'+o.CT+"&deg;C</em> / <span>"+o.MinT+"-"+o.MaxT+"&deg;C</span>"+getWeatherIcon(o.CI)+"</li>")}$("#widget-ticker").append(i),r(i)}},r=function(e){if(e&&0!=e.length){var t,i=e.find("li"),n=e.find("li.active");0==n.length?(t=i.eq(0)).addClass("active"):(0==(t=n.next("li")).length&&(t=i.eq(0)),n.removeClass("active"),t.addClass("active")),setTimeout(function(){r(e)},3e3)}},s=function(e,t){if(e&&t)for(var i=0;i<t.length;i++)if(t[i].Code==e||t[i].City.toLowerCase()==e.toLowerCase())return t[i]},e=function(n){debug("Utilities --> fetch data...");var e=DBLOCAL.load(i);if(!e)return debug("Utilities --> no cache exist, fetch live..."),void $.getJSON("https://api.news.zing.vn/public/v2/getUtilities").done(function(e){if(e.err)n(msg);else{var t=e.data;DBLOCAL.insert(i,JSON.stringify(t),1800),n(null,t)}}).fail(function(e,t,i){DBLOCAL.warn("Utilities --> fetch data failed"),n(t)});try{debug("Utilities --> cache available"),n(null,JSON.parse(e))}catch(e){n("Utilities --> Fail to parse data")}};n(),e(function(e,t){e||(a(t.weather),o(t))})}function initTrackers(e,t){(e=e||$(".section")).each(function(e,t){var i=$(t),a=i.attr("id")||"latest";if("category"===getPageType()){var n="category"+zaConfig.pageid+"_";a=-1!==a.indexOf("category")?n+(a.split("-")[1]?a.split("-")[1]:"")+"_":i.hasClass("topic")?n+"topic"+a+"_":n+a+"_"}var r=i.data("count")||0,o=i.find(".article-item[article-id]:not([data-tracker])");0<o.length&&(info("Initializing section #"+a),o.each(function(e,t){var i=$(t);r++;var n=i.attr("article-id");if(""!=n){var o=generateHash({zone:a.replace(/\-/gi,""),position:r});i.attr("data-tracker",o),i.find("a").on("click",function(e){var t=$(this).attr("href").replace(/\#.*/gi,"")+"#"+i.attr("data-tracker");$(this).attr("href",t)}),i.append('<img data-src="https://log.news.zing.vn/imps?type=article&appid='+window.ZAPPID+"&id="+n+"&pos="+o+'" class="tracking" />'),i.find("img.tracking").unveil(0,{})}}),0==i.find(".article-item").length&&i.remove(),i.data("count",r))}),t||(debug("initTrackers --> init lazyload image"),$(".article-thumbnail img[data-src]").each(function(e,t){$(t).unveil({threshold:800,autoscale:!0},function(){})}))}function adtimaUpdateLayout(){_adRenderTimer&&clearTimeout(_adRenderTimer),debug("Adtima --> updated rendering"),window.INIT_TIMER&&(_adRenderTime=(new Date).getTime()-INIT_TIMER.getTime(),_adRenderTimer=setTimeout(function(){event("Advertising rendered",{label:getPageType(),value:_adRenderTime})},5e3)),window.Waypoint&&Waypoint.refreshAll()}function renderArticleTools(e){if(e&&Object.keys(e).length){var t,i,n,o,a,r,s,l,c,d,u=$("<ul>",{class:"the-article-share"}),h=getArticleShortURL(window.location.href),p=!!$(".the-article-comment").length;return e.hasZalo&&u.append(((t=$("<li>").attr({class:"btnZalo blue zalo-share-button","data-href":h+"?utm_source=zalo&utm_medium=zalomsg&utm_campaign=zingdesktop","data-oaid":"4564080408575020426","data-layout":"icon-text","data-customize":"true"}).html('<a href="#" title="Chia sẻ Zalo"><span class="ti-zalo"></span> <span>Zalo</span></a>')).find("a").on("click",function(e){e.preventDefault(),event("Share Zalo",{category:getPageType().toUpperCase(),label:getArticleId()})}),t)),e.hasFace&&u.append(((i=$("<li>",{class:"btnFacebook"}).html('<a href="#" title="Chia sẻ Facebook"><span class="ti-facebook"></span><span>Facebook</span></a>')).find("a").on("click",function(e){e.preventDefault(),shareFacebook(h+"?utm_source=facebook&utm_campaign=articlebottom&utm_medium=desktop_sharebutton#bottom")}),i)),e.hasCopyLink&&u.append(((n=$("<li>",{class:"btnCopyLink"}).html('<a href="#" title="Copy link"><span class="znews-ic-copy-link"></span></a><span class="copy-link-label">Đã copy link</span>')).find("a").on("click",function(e){e.preventDefault(),copyLinkToClipboard(),n.addClass("copy-sucess"),setTimeout(function(){n.removeClass("copy-sucess")},1e3)}),n)),e.hasComments&&p&&u.append((o=$("<li>",{class:"btnComments"}).html('<a href="#" title="Bình luận"><span class="ti-comment"></span></a>'),a=$("#divComment .comment-input"),r=$(".the-article").hasClass("status-live")&&$(".the-article").hasClass("type-stream"),o.find("a").on("click",function(e){e.preventDefault(),r?a.focus():$("html, body").animate({scrollTop:a.offset().top-Math.floor(window.innerHeight/4)},1e3,function(){a.focus()})}),o)),e.hasMoreList&&u.append((s=$("<li>",{class:"btnMoreList"}).html('<a href="#"><span class="znews-ic-more-vertical"></span></a>'),l=$("<ul>",{class:"sticky-header__more-list js-more-list"}),c=$("<li>").text("Góp ý bài viết"),d=$("<li>").text("Liên hệ toà soạn"),c.on("click",function(){showReportDialog()}),d.on("click",function(){showPhoneBox()}),s.on("click",function(e){e.preventDefault(),l.toggle()}),l.append(c).append(d),s.append(l),s)),u}}function shareFacebook(e){window.facebook&&window.facebook.isFBAvailable&&(debug("Share Facebook: "+e),facebook.share(e,{hashtag:function(){var e=$(".the-article .the-article-tags").find("strong, span, a");if(e.length){for(var t,i,n=0;n<e.length;n++)if((i=$.trim(e.eq(n).text())).split(/\s+/).length<7){t=toTitleCase(i).replace(/\s+/g,"");break}return t?"#"+t:null}}(),quote:""!=getSelectedText()?getSelectedText():null},function(e){event(e?"Share Facebook Fail":"Share Facebook Success",{category:getPageType().toUpperCase(),label:getArticleId()})}))}!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(h){function t(e){var t,i=e||window.event,n=v.call(arguments,1),o=0,a=0,r=0,s=0,l=0;if((e=h.event.fix(i)).type="mousewheel","detail"in i&&(r=-1*i.detail),"wheelDelta"in i&&(r=i.wheelDelta),"wheelDeltaY"in i&&(r=i.wheelDeltaY),"wheelDeltaX"in i&&(a=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(a=-1*r,r=0),o=0===r?a:r,"deltaY"in i&&(o=r=-1*i.deltaY),"deltaX"in i&&(a=i.deltaX,0===r&&(o=-1*a)),0!==r||0!==a){if(1===i.deltaMode){var c=h.data(this,"mousewheel-line-height");o*=c,r*=c,a*=c}else if(2===i.deltaMode){var d=h.data(this,"mousewheel-page-height");o*=d,r*=d,a*=d}if(t=Math.max(Math.abs(r),Math.abs(a)),(!m||t<m)&&f(i,m=t)&&(m/=40),f(i,t)&&(o/=40,a/=40,r/=40),o=Math[1<=o?"floor":"ceil"](o/m),a=Math[1<=a?"floor":"ceil"](a/m),r=Math[1<=r?"floor":"ceil"](r/m),_.settings.normalizeOffset&&this.getBoundingClientRect){var u=this.getBoundingClientRect();s=e.clientX-u.left,l=e.clientY-u.top}return e.deltaX=a,e.deltaY=r,e.deltaFactor=m,e.offsetX=s,e.offsetY=l,e.deltaMode=0,n.unshift(e,o,a,r),g&&clearTimeout(g),g=setTimeout(p,200),(h.event.dispatch||h.event.handle).apply(this,n)}}function p(){m=null}function f(e,t){return _.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var g,m,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],v=Array.prototype.slice;if(h.event.fixHooks)for(var n=e.length;n;)h.event.fixHooks[e[--n]]=h.event.mouseHooks;var _=h.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],t,!1);else this.onmousewheel=t;h.data(this,"mousewheel-line-height",_.getLineHeight(this)),h.data(this,"mousewheel-page-height",_.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],t,!1);else this.onmousewheel=null;h.removeData(this,"mousewheel-line-height"),h.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=h(e),i=t["offsetParent"in h.fn?"offsetParent":"parent"]();return i.length||(i=h("body")),parseInt(i.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return h(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};h.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(u){function e(e){if(e in a.style)return e;for(var t=["Moz","Webkit","O","ms"],i=e.charAt(0).toUpperCase()+e.substr(1),n=0;n<t.length;++n){var o=t[n]+i;if(o in a.style)return o}}function n(e){return"string"==typeof e&&this.parse(e),this}function h(e,t,i){!0===t?e.queue(i):t?e.queue(t,i):e.each(function(){i.call(this)})}function p(e,t,i,n){var o,a,r=(o=e,a=[],u.each(o,function(e){e=u.camelCase(e),e=c(e=u.transit.propertyMap[e]||u.cssProps[e]||e),g[e]&&(e=c(g[e])),-1===u.inArray(e,a)&&a.push(e)}),a);u.cssEase[i]&&(i=u.cssEase[i]);var s=f(t)+" "+i;0<parseInt(n,10)&&(s+=" "+f(n));var l=[];return u.each(r,function(e,t){l.push(t+" "+s)}),l.join(", ")}function t(n,e){e||(u.cssNumber[n]=!0),u.transit.propertyMap[n]=g.transform,u.cssHooks[n]={get:function(e){return u(e).css("transit:transform").get(n)},set:function(e,t){var i=u(e).css("transit:transform");i.setFromString(n,t),u(e).css({"transit:transform":i})}}}function c(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function i(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function f(e){var t=e;return"string"!=typeof t||t.match(/^[\-0-9\.]+/)||(t=u.fx.speeds[t]||u.fx.speeds._default),i(t,"ms")}u.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var a=document.createElement("div"),g={},o=-1<navigator.userAgent.toLowerCase().indexOf("chrome");g.transition=e("transition"),g.transitionDelay=e("transitionDelay"),g.transform=e("transform"),g.transformOrigin=e("transformOrigin"),g.filter=e("Filter"),g.transform3d=(a.style[g.transform]="",a.style[g.transform]="rotateY(90deg)",""!==a.style[g.transform]);var m=g.transitionEnd={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[g.transition]||null;for(var r in g)g.hasOwnProperty(r)&&void 0===u.support[r]&&(u.support[r]=g[r]);return a=null,u.cssEase={_default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},u.cssHooks["transit:transform"]={get:function(e){return u(e).data("transform")||new n},set:function(e,t){var i=t;i instanceof n||(i=new n(i)),"WebkitTransform"!==g.transform||o?e.style[g.transform]=i.toString():e.style[g.transform]=i.toString(!0),u(e).data("transform",i)}},u.cssHooks.transform={set:u.cssHooks["transit:transform"].set},u.cssHooks.filter={get:function(e){return e.style[g.filter]},set:function(e,t){e.style[g.filter]=t}},u.fn.jquery<"1.8"&&(u.cssHooks.transformOrigin={get:function(e){return e.style[g.transformOrigin]},set:function(e,t){e.style[g.transformOrigin]=t}},u.cssHooks.transition={get:function(e){return e.style[g.transition]},set:function(e,t){e.style[g.transition]=t}}),t("scale"),t("scaleX"),t("scaleY"),t("translate"),t("rotate"),t("rotateX"),t("rotateY"),t("rotate3d"),t("perspective"),t("skewX"),t("skewY"),t("x",!0),t("y",!0),n.prototype={setFromString:function(e,t){var i="string"==typeof t?t.split(","):t.constructor===Array?t:[t];i.unshift(e),n.prototype.set.apply(this,i)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=i(e,"deg")},rotateX:function(e){this.rotateX=i(e,"deg")},rotateY:function(e){this.rotateY=i(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=i(e,"deg")},skewY:function(e){this.skewY=i(e,"deg")},perspective:function(e){this.perspective=i(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!=e&&(this._translateX=i(e,"px")),null!=t&&(this._translateY=i(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;t<=3;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=i(e[3],"deg")),e}},parse:function(e){var n=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,t,i){n.setFromString(t,i)})},toString:function(e){var t=[];for(var i in this)if(this.hasOwnProperty(i)){if(!g.transform3d&&("rotateX"===i||"rotateY"===i||"perspective"===i||"transformOrigin"===i))continue;"_"!==i[0]&&(e&&"scale"===i?t.push(i+"3d("+this[i]+",1)"):e&&"translate"===i?t.push(i+"3d("+this[i]+",0)"):t.push(i+"("+this[i]+")"))}return t.join(" ")}},u.fn.transition=u.fn.transit=function(e,t,i,o){var a=this,n=0,r=!0,s=u.extend(!0,{},e);"function"==typeof t&&(o=t,t=void 0),"object"==typeof t&&(i=t.easing,n=t.delay||0,r=void 0===t.queue||t.queue,o=t.complete,t=t.duration),"function"==typeof i&&(o=i,i=void 0),void 0!==s.easing&&(i=s.easing,delete s.easing),void 0!==s.duration&&(t=s.duration,delete s.duration),void 0!==s.complete&&(o=s.complete,delete s.complete),void 0!==s.queue&&(r=s.queue,delete s.queue),void 0!==s.delay&&(n=s.delay,delete s.delay),void 0===t&&(t=u.fx.speeds._default),void 0===i&&(i=u.cssEase._default),t=f(t);var l=p(s,t,i,n),c=u.transit.enabled&&g.transition?parseInt(t,10)+parseInt(n,10):0;if(0===c){return h(a,r,function(e){a.css(s),o&&o.apply(a),e&&e()}),a}var d={};return h(a,r,function(e){var t,i,n;this.offsetWidth=this.offsetWidth,t=e,i=!1,n=function(){i&&a.unbind(m,n),0<c&&a.each(function(){this.style[g.transition]=d[this]||null}),"function"==typeof o&&o.apply(a),"function"==typeof t&&t()},0<c&&m&&u.transit.useTransitionEnd?(i=!0,a.bind(m,n)):window.setTimeout(n,c),a.each(function(){0<c&&(this.style[g.transition]=l),u(this).css(s)})}),this},u.transit.getTransitionValue=p,u}),vietUni.prototype.setMethod=function(e){this.method=e,this.typer&&(this.typer.keyMode=this.initKeys())},vietUni.prototype.initKeys=function(){switch(this.method){case 1:return this.telexKeys||(this.telexKeys=new vietKeysTelex),this.telexKeys;case 2:return this.vniKeys||(this.vniKeys=new vietKeysVni),this.vniKeys;case 3:return this.viqrKeys||(this.viqrKeys=new vietKeysViqr),this.viqrKeys;case 4:return this.allKeys||(this.allKeys=new vietKeysAll),this.allKeys;default:return this.vkOff||(this.vkOff=new vietKeysOff),this.vkOff}},vietUni.prototype.initTyper=function(t){if(t){this.typer||(this.typer=new vietTyper,this.typer.keyMode=this.initKeys());var i=this;if(t.attachEvent)t.attachEvent("onkeypress",function(e){return vietUni.vietTyping(e,i,t)});else if(t.addEventListener)t.addEventListener("keypress",function(e){return vietUni.vietTyping(e,i,t)},!0);else if(t.onkeypress){var n=t.onkeypress;t.onkeypress="function"!=typeof n?function(e){return vietUni.vietTyping(e,i,t)}:function(e){return!!n(e)&&vietUni.vietTyping(e,i,t)}}}},vietUni.vietTyping=function(e,t,i){if(!t||t.typer.keyMode.off)return!0;e||(e=event);var n=document.all?e.keyCode:e.which||e.charCode;if(n<49&&16!=n&&20!=n)return!0;var o,a=t.getCurrentWord(i);return!!(null==a||(o=a.length)<1||a.match(/\s+$/))||(t.typer.value=a,32<n&&t.typer.typing(n)&&((a=t.typer.value).length==o+1&&n==a.charCodeAt(o)&&(t.typer.value=a.substr(0,o),o=0),t.replaceWord(i,t.typer.value),0<o)?(void 0!==e.cancelBubble&&(e.cancelBubble=!0),e.stopPropagation&&(e.preventDefault(),e.stopPropagation()),!1):!e.cancelBubble)},vietUni.prototype.getCurrentWord=function(e){if(document.selection&&!e.createRange){var t,i=e.selection?e.selection.createRange():e.document.selection.createRange();if(i.text)return null;try{(t=i.duplicate()).moveStart("word",-1)}catch(e){for(var n=-10;(t=i.duplicate()).moveStart("character",n++),!t.text&&n<0;);}return e.curWord=t.duplicate(),t.text}if(e.setSelectionRange){var o=e.selectionStart;return o!=(s=e.selectionEnd)?null:(o=Math.max(0,s-10),e.pos1=o,e.pos2=s,e.value.substr(o,s-o))}if(window.getSelection){var a=e.defaultView.getSelection(),r=a.getRangeAt(a.rangeCount-1).cloneRange();if(r.toString())return null;var s=r.startOffset,l=r.endContainer;r.setEnd(l,s),r.setStart(l,Math.max(0,s-10)),e.rng1=r,e.nod1=l,e.pos1=r.startOffset,e.pos2=s;var c=r.toString();return r.setStart(l,s),c}return void 0!==e.value?e.value:null},vietUni.prototype.replaceWord=function(e,t){if(document.selection&&!e.createRange&&e.curWord)e.curWord.text=t,e.curWord.collapse(!1);else if(e.setSelectionRange){var i=e.pos1,n=e.pos2,o=e.value;e.value=o.substr(0,i)+t+o.substr(n),e.setSelectionRange(i+t.length,i+t.length)}else window.getSelection&&e.nod1&&e.nod1.insertData?(e.rng1.setStart(e.nod1,e.pos1),e.nod1.insertData(e.pos1,t),e.nod1.deleteData(e.pos1+t.length,e.pos2-e.pos1),e.rng1.setEnd(e.nod1,e.pos2),e.rng1.setStart(e.nod1,e.pos2)):void 0!==e.value&&(e.value=t)},vietTyper.prototype.typing=function(e){return this.changed=0,this.ctrlChar=String.fromCharCode(e),this.keyMode.getAction(this),this.correct(),this.changed},vietTyper.prototype.compose=function(e){if(this.value){var t,i=this.findCharToChange(e);if(i&&i[0])t="\\"==i[0]?[1,this.ctrlChar,1]:6<e?this.charMap.getAEOWD(i[0],e,i[3]):this.charMap.getDau(i[0],e),(this.changed=t[0])&&(this.value=this.value.substr(0,i[1])+t[1]+this.value.substr(i[1]+i[2]),t[2]||(this.value+=this.ctrlChar))}},vietTyper.prototype.correct=function(){var e=this.value;0<="nNcC".indexOf(this.ctrlChar)&&(e+=this.ctrlChar);var t=/[^\x01-\x7f](hn|hc|gn)$/i.exec(e);if(t)this.value=e.substr(0,e.length-2)+t[1].charAt(1)+t[1].charAt(0),this.changed=1;else if(!this.changed)return 0;if(!(t=/\w([^\x01-\x7f])(\w*)([^\x01-\x7f])\S*$/.exec(this.value)))return 0;var i=this.charMap.isVowel(t[1]),n=(i-1)%24+1,o=(i-n)/24,a=this.charMap.isVowel(t[3]);if(!o||!a)return 0;var r=(a-1)%24+1,s=this.charMap.charAt(n)+t[2]+this.charMap.charAt(24*o+r);this.value=this.value.replace(new RegExp(t[1]+t[2]+t[3],"g"),s)},vietTyper.prototype.findCharToChange=function(e){var t=this.charMap.lastCharsOf(this.value,5),i=0,n=t[0][0],o=0;if("\\"==n)return[n,this.value.length-1,1];if(15==e){for(;!(o=this.charMap.isVD(n));)if(n<"A"||4<=i||!(n=t[++i][0]))return null}else for(;0<="cghmnptCGHMNPT".indexOf(n);)if(n<"A"||2<=i||!(n=t[++i][0]))return null;n=t[0][0].toLowerCase();var a=t[1][0].toLowerCase(),r=t[2][0].toLowerCase();if(0==i&&15!=e&&((o=this.charMap.isVowel(t[1][0]))&&0<="uyoia".indexOf(n)&&!this.charMap.isUO(a,n)&&!("o"==a&&"a"==n||"u"==a&&"y"==n)&&!("q"==r&&"u"==a||"g"==r&&"i"==a)&&i++,"a"!=n||9!=e&&7!=e||(i=0)),n=t[i][0],0!=i&&0!=o||15==e||(o=this.charMap.isVowel(n)),!o)return null;var s=t[i][1],l=0;0<i&&(7==e||8==e||11==e)&&(l=this.charMap.isUO(t[i+1][0],n))&&(o=l,s+=t[++i][1],l=1);for(var c=this.value.length,d=0;d<=i;d++)c-=t[d][1];return[o,c,s,l]},vietCharMap.prototype.charAt=function(e){var t=this.vietChars[e];return t?String.fromCharCode(t):null},vietCharMap.prototype.isVowel=function(e){for(var t=0;t<20&&e!=this.chrCache[t];)t++;if(t<20)return this.indCache[t];for(t=this.length-5;e!=this.charAt(t)&&t;)t--;return this.caching(e,t),t},vietCharMap.prototype.isVD=function(e){for(var t=this.length-5;e!=this.charAt(t)&&t<this.length;)t++;return t<this.length?t:0},vietCharMap.prototype.isUO=function(e,t){if(!e||!t)return 0;var i=this.isVowel(e),n=(i-1)%12;if(9!=n&&10!=n)return 0;var o=this.isVowel(t);return 6!=(n=(o-1)%12)&&7!=n&&8!=n?0:[i,o]},vietCharMap.prototype.getDau=function(e,t){var i=(e-1)%24+1;if(6==t&&!(e<25?0:1))return[0];var n=24*(6==t?0:t)+i;n==e&&(n=i);var o=this.charAt(n);return o||(o=this.lowerCaseOf(0,n)),[1,o,24<n||6==t]},vietCharMap.prototype.getAEOWD=function(e,t,i){var n=0,o=i?e[0]:e,a=15==t?(o-1)%2:(o-1)%12;if(i){var r=e[1]-(e[1]-1)%12;return 7==t||11==t?n=this.charAt(o-a+9)+this.charAt(r+7):8==t&&(n=this.charAt(o-a+10)+this.charAt(r+8)),[0!=n,n,1]}for(var s=-1,l=0,c=0;0==l&&++s<this.vmap[0].length;)this.vmap[0][s]==t&&(this.vmap[1][s]==a?l=this.vmap[2][s]-a:this.vmap[2][s]==a&&(l=this.vmap[1][s]-a));0==l?(7!=t||2!=a&&8!=a?9==t&&2==a||11==t&&8==a?l=-1:8!=t||1!=a&&7!=a||(l=1):l=-1,c=1):c=0<l,o+=l;var d=this.charAt(o);return o<145&&this.caching(d,o),d||(d=this.lowerCaseOf(0,o)),[0!=l,d,c]},vietCharMap.prototype.lastCharsOf=function(e,t){if(!t)return[e.charAt(e.length-1),1];for(var i=new Array(t),n=0;n<t;n++)i[n]=[e.charAt(e.length-n-1),1];return i},function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(p){var f="waitForImages";p.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]},p.expr[":"]["has-src"]=function(e){return p(e).is('img[src][src!=""]')},p.expr[":"].uncached=function(e){return!!p(e).is(":has-src")&&!e.complete},p.fn.waitForImages=function(){var l,c,i,d=0,u=0,h=p.Deferred();if(p.isPlainObject(arguments[0])?(i=arguments[0].waitForAll,c=arguments[0].each,l=arguments[0].finished):1===arguments.length&&"boolean"===p.type(arguments[0])?i=arguments[0]:(l=arguments[0],c=arguments[1],i=arguments[2]),l=l||p.noop,c=c||p.noop,i=!!i,!p.isFunction(l)||!p.isFunction(c))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var a=p(this),r=[],e=p.waitForImages.hasImageProperties||[],t=p.waitForImages.hasImageAttributes||[],s=/url\(\s*(['"]?)(.*?)\1\s*\)/g;i?a.find("*").addBack().each(function(){var o=p(this);o.is("img:has-src")&&r.push({src:o.attr("src"),element:o[0]}),p.each(e,function(e,t){var i,n=o.css(t);if(!n)return!0;for(;i=s.exec(n);)r.push({src:i[2],element:o[0]})}),p.each(t,function(e,t){var i,n=o.attr(t);if(!n)return!0;i=n.split(","),p.each(i,function(e,t){t=p.trim(t).split(" ")[0],r.push({src:t,element:o[0]})})})}):a.find("img:has-src").each(function(){r.push({src:this.src,element:this})}),d=r.length,(u=0)===d&&(l.call(a[0]),h.resolveWith(a[0])),p.each(r,function(e,n){var t=new Image,o="load."+f+" error."+f;p(t).one(o,function e(t){var i=[u,d,"load"==t.type];if(u++,c.apply(n.element,i),h.notifyWith(n.element,i),p(this).off(o,e),u==d)return l.call(a[0]),h.resolveWith(a[0]),!1}),t.src=n.src})}),h.promise()}}),function(){function e(s){return function(e,t,i,n){t=w(t,n,4);var o=!E(e)&&_.keys(e),a=(o||e).length,r=0<s?0:a-1;return arguments.length<3&&(i=e[o?o[r]:r],r+=s),function(e,t,i,n,o,a){for(;0<=o&&o<a;o+=s){var r=n?n[o]:o;i=t(i,e[r],r,e)}return i}(e,t,i,o,r,a)}}function t(a){return function(e,t,i){t=y(t,i);for(var n=$(e),o=0<a?0:n-1;0<=o&&o<n;o+=a)if(t(e[o],o,e))return o;return-1}}function i(a,r,s){return function(e,t,i){var n=0,o=$(e);if("number"==typeof i)0<a?n=0<=i?i:Math.max(i+o,n):o=0<=i?Math.min(i+1,o):i+o+1;else if(s&&i&&o)return e[i=s(e,t)]===t?i:-1;if(t!=t)return 0<=(i=r(d.call(e,n,o),_.isNaN))?i+n:-1;for(i=0<a?n:o-1;0<=i&&i<o;i+=a)if(e[i]===t)return i;return-1}}function n(e,t){var i=O.length,n=e.constructor,o=_.isFunction(n)&&n.prototype||s,a="constructor";for(_.has(e,a)&&!_.contains(t,a)&&t.push(a);i--;)(a=O[i])in e&&e[a]!==o[a]&&!_.contains(t,a)&&t.push(a)}var o=this,a=o._,r=Array.prototype,s=Object.prototype,l=Function.prototype,c=r.push,d=r.slice,u=s.toString,h=s.hasOwnProperty,p=Array.isArray,f=Object.keys,g=l.bind,m=Object.create,v=function(){},_=function(e){return e instanceof _?e:this instanceof _?void(this._wrapped=e):new _(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):o._=_,_.VERSION="1.8.3";var w=function(o,a,e){if(void 0===a)return o;switch(null==e?3:e){case 1:return function(e){return o.call(a,e)};case 2:return function(e,t){return o.call(a,e,t)};case 3:return function(e,t,i){return o.call(a,e,t,i)};case 4:return function(e,t,i,n){return o.call(a,e,t,i,n)}}return function(){return o.apply(a,arguments)}},y=function(e,t,i){return null==e?_.identity:_.isFunction(e)?w(e,t,i):_.isObject(e)?_.matcher(e):_.property(e)};_.iteratee=function(e,t){return y(e,t,1/0)};var b=function(l,c){return function(e){var t=arguments.length;if(t<2||null==e)return e;for(var i=1;i<t;i++)for(var n=arguments[i],o=l(n),a=o.length,r=0;r<a;r++){var s=o[r];c&&void 0!==e[s]||(e[s]=n[s])}return e}},x=function(e){if(!_.isObject(e))return{};if(m)return m(e);v.prototype=e;var t=new v;return v.prototype=null,t},C=function(t){return function(e){return null==e?void 0:e[t]}},T=Math.pow(2,53)-1,$=C("length"),E=function(e){var t=$(e);return"number"==typeof t&&0<=t&&t<=T};_.each=_.forEach=function(e,t,i){var n,o;if(t=w(t,i),E(e))for(n=0,o=e.length;n<o;n++)t(e[n],n,e);else{var a=_.keys(e);for(n=0,o=a.length;n<o;n++)t(e[a[n]],a[n],e)}return e},_.map=_.collect=function(e,t,i){t=y(t,i);for(var n=!E(e)&&_.keys(e),o=(n||e).length,a=Array(o),r=0;r<o;r++){var s=n?n[r]:r;a[r]=t(e[s],s,e)}return a},_.reduce=_.foldl=_.inject=e(1),_.reduceRight=_.foldr=e(-1),_.find=_.detect=function(e,t,i){var n;if(void 0!==(n=E(e)?_.findIndex(e,t,i):_.findKey(e,t,i))&&-1!==n)return e[n]},_.filter=_.select=function(e,n,t){var o=[];return n=y(n,t),_.each(e,function(e,t,i){n(e,t,i)&&o.push(e)}),o},_.reject=function(e,t,i){return _.filter(e,_.negate(y(t)),i)},_.every=_.all=function(e,t,i){t=y(t,i);for(var n=!E(e)&&_.keys(e),o=(n||e).length,a=0;a<o;a++){var r=n?n[a]:a;if(!t(e[r],r,e))return!1}return!0},_.some=_.any=function(e,t,i){t=y(t,i);for(var n=!E(e)&&_.keys(e),o=(n||e).length,a=0;a<o;a++){var r=n?n[a]:a;if(t(e[r],r,e))return!0}return!1},_.contains=_.includes=_.include=function(e,t,i,n){return E(e)||(e=_.values(e)),("number"!=typeof i||n)&&(i=0),0<=_.indexOf(e,t,i)},_.invoke=function(e,i){var n=d.call(arguments,2),o=_.isFunction(i);return _.map(e,function(e){var t=o?i:e[i];return null==t?t:t.apply(e,n)})},_.pluck=function(e,t){return _.map(e,_.property(t))},_.where=function(e,t){return _.filter(e,_.matcher(t))},_.findWhere=function(e,t){return _.find(e,_.matcher(t))},_.max=function(e,n,t){var i,o,a=-1/0,r=-1/0;if(null==n&&null!=e)for(var s=0,l=(e=E(e)?e:_.values(e)).length;s<l;s++)i=e[s],a<i&&(a=i);else n=y(n,t),_.each(e,function(e,t,i){o=n(e,t,i),(r<o||o===-1/0&&a===-1/0)&&(a=e,r=o)});return a},_.min=function(e,n,t){var i,o,a=1/0,r=1/0;if(null==n&&null!=e)for(var s=0,l=(e=E(e)?e:_.values(e)).length;s<l;s++)(i=e[s])<a&&(a=i);else n=y(n,t),_.each(e,function(e,t,i){((o=n(e,t,i))<r||o===1/0&&a===1/0)&&(a=e,r=o)});return a},_.shuffle=function(e){for(var t,i=E(e)?e:_.values(e),n=i.length,o=Array(n),a=0;a<n;a++)(t=_.random(0,a))!==a&&(o[a]=o[t]),o[t]=i[a];return o},_.sample=function(e,t,i){return null==t||i?(E(e)||(e=_.values(e)),e[_.random(e.length-1)]):_.shuffle(e).slice(0,Math.max(0,t))},_.sortBy=function(e,n,t){return n=y(n,t),_.pluck(_.map(e,function(e,t,i){return{value:e,index:t,criteria:n(e,t,i)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(n<i||void 0===i)return 1;if(i<n||void 0===n)return-1}return e.index-t.index}),"value")};var S=function(r){return function(n,o,e){var a={};return o=y(o,e),_.each(n,function(e,t){var i=o(e,t,n);r(a,e,i)}),a}};_.groupBy=S(function(e,t,i){_.has(e,i)?e[i].push(t):e[i]=[t]}),_.indexBy=S(function(e,t,i){e[i]=t}),_.countBy=S(function(e,t,i){_.has(e,i)?e[i]++:e[i]=1}),_.toArray=function(e){return e?_.isArray(e)?d.call(e):E(e)?_.map(e,_.identity):_.values(e):[]},_.size=function(e){return null==e?0:E(e)?e.length:_.keys(e).length},_.partition=function(e,n,t){n=y(n,t);var o=[],a=[];return _.each(e,function(e,t,i){(n(e,t,i)?o:a).push(e)}),[o,a]},_.first=_.head=_.take=function(e,t,i){if(null!=e)return null==t||i?e[0]:_.initial(e,e.length-t)},_.initial=function(e,t,i){return d.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},_.last=function(e,t,i){if(null!=e)return null==t||i?e[e.length-1]:_.rest(e,Math.max(0,e.length-t))},_.rest=_.tail=_.drop=function(e,t,i){return d.call(e,null==t||i?1:t)},_.compact=function(e){return _.filter(e,_.identity)};var k=function(e,t,i,n){for(var o=[],a=0,r=n||0,s=$(e);r<s;r++){var l=e[r];if(E(l)&&(_.isArray(l)||_.isArguments(l))){t||(l=k(l,t,i));var c=0,d=l.length;for(o.length+=d;c<d;)o[a++]=l[c++]}else i||(o[a++]=l)}return o};_.flatten=function(e,t){return k(e,t,!1)},_.without=function(e){return _.difference(e,d.call(arguments,1))},_.uniq=_.unique=function(e,t,i,n){_.isBoolean(t)||(n=i,i=t,t=!1),null!=i&&(i=y(i,n));for(var o=[],a=[],r=0,s=$(e);r<s;r++){var l=e[r],c=i?i(l,r,e):l;t?(r&&a===c||o.push(l),a=c):i?_.contains(a,c)||(a.push(c),o.push(l)):_.contains(o,l)||o.push(l)}return o},_.union=function(){return _.uniq(k(arguments,!0,!0))},_.intersection=function(e){for(var t=[],i=arguments.length,n=0,o=$(e);n<o;n++){var a=e[n];if(!_.contains(t,a)){for(var r=1;r<i&&_.contains(arguments[r],a);r++);r===i&&t.push(a)}}return t},_.difference=function(e){var t=k(arguments,!0,!0,1);return _.filter(e,function(e){return!_.contains(t,e)})},_.zip=function(){return _.unzip(arguments)},_.unzip=function(e){for(var t=e&&_.max(e,$).length||0,i=Array(t),n=0;n<t;n++)i[n]=_.pluck(e,n);return i},_.object=function(e,t){for(var i={},n=0,o=$(e);n<o;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},_.findIndex=t(1),_.findLastIndex=t(-1),_.sortedIndex=function(e,t,i,n){for(var o=(i=y(i,n,1))(t),a=0,r=$(e);a<r;){var s=Math.floor((a+r)/2);i(e[s])<o?a=s+1:r=s}return a},_.indexOf=i(1,_.findIndex,_.sortedIndex),_.lastIndexOf=i(-1,_.findLastIndex),_.range=function(e,t,i){null==t&&(t=e||0,e=0),i=i||1;for(var n=Math.max(Math.ceil((t-e)/i),0),o=Array(n),a=0;a<n;a++,e+=i)o[a]=e;return o};var A=function(e,t,i,n,o){if(!(n instanceof t))return e.apply(i,o);var a=x(e.prototype),r=e.apply(a,o);return _.isObject(r)?r:a};_.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,d.call(arguments,1));if(!_.isFunction(e))throw new TypeError("Bind must be called on a function");var i=d.call(arguments,2),n=function(){return A(e,n,t,this,i.concat(d.call(arguments)))};return n},_.partial=function(o){var a=d.call(arguments,1),r=function(){for(var e=0,t=a.length,i=Array(t),n=0;n<t;n++)i[n]=a[n]===_?arguments[e++]:a[n];for(;e<arguments.length;)i.push(arguments[e++]);return A(o,r,this,this,i)};return r},_.bindAll=function(e){var t,i,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)e[i=arguments[t]]=_.bind(e[i],e);return e},_.memoize=function(n,o){var a=function(e){var t=a.cache,i=""+(o?o.apply(this,arguments):e);return _.has(t,i)||(t[i]=n.apply(this,arguments)),t[i]};return a.cache={},a},_.delay=function(e,t){var i=d.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},_.defer=_.partial(_.delay,_,1),_.throttle=function(i,n,o){var a,r,s,l=null,c=0;o||(o={});var d=function(){c=!1===o.leading?0:_.now(),l=null,s=i.apply(a,r),l||(a=r=null)};return function(){var e=_.now();c||!1!==o.leading||(c=e);var t=n-(e-c);return a=this,r=arguments,t<=0||n<t?(l&&(clearTimeout(l),l=null),c=e,s=i.apply(a,r),l||(a=r=null)):l||!1===o.trailing||(l=setTimeout(d,t)),s}},_.debounce=function(t,i,n){var o,a,r,s,l,c=function(){var e=_.now()-s;e<i&&0<=e?o=setTimeout(c,i-e):(o=null,n||(l=t.apply(r,a),o||(r=a=null)))};return function(){r=this,a=arguments,s=_.now();var e=n&&!o;return o||(o=setTimeout(c,i)),e&&(l=t.apply(r,a),r=a=null),l}},_.wrap=function(e,t){return _.partial(t,e)},_.negate=function(e){return function(){return!e.apply(this,arguments)}},_.compose=function(){var i=arguments,n=i.length-1;return function(){for(var e=n,t=i[n].apply(this,arguments);e--;)t=i[e].call(this,t);return t}},_.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},_.before=function(e,t){var i;return function(){return 0<--e&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}},_.once=_.partial(_.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];_.keys=function(e){if(!_.isObject(e))return[];if(f)return f(e);var t=[];for(var i in e)_.has(e,i)&&t.push(i);return I&&n(e,t),t},_.allKeys=function(e){if(!_.isObject(e))return[];var t=[];for(var i in e)t.push(i);return I&&n(e,t),t},_.values=function(e){for(var t=_.keys(e),i=t.length,n=Array(i),o=0;o<i;o++)n[o]=e[t[o]];return n},_.mapObject=function(e,t,i){t=y(t,i);for(var n,o=_.keys(e),a=o.length,r={},s=0;s<a;s++)r[n=o[s]]=t(e[n],n,e);return r},_.pairs=function(e){for(var t=_.keys(e),i=t.length,n=Array(i),o=0;o<i;o++)n[o]=[t[o],e[t[o]]];return n},_.invert=function(e){for(var t={},i=_.keys(e),n=0,o=i.length;n<o;n++)t[e[i[n]]]=i[n];return t},_.functions=_.methods=function(e){var t=[];for(var i in e)_.isFunction(e[i])&&t.push(i);return t.sort()},_.extend=b(_.allKeys),_.extendOwn=_.assign=b(_.keys),_.findKey=function(e,t,i){t=y(t,i);for(var n,o=_.keys(e),a=0,r=o.length;a<r;a++)if(t(e[n=o[a]],n,e))return n},_.pick=function(e,t,i){var n,o,a={},r=e;if(null==r)return a;_.isFunction(t)?(o=_.allKeys(r),n=w(t,i)):(o=k(arguments,!1,!1,1),n=function(e,t,i){return t in i},r=Object(r));for(var s=0,l=o.length;s<l;s++){var c=o[s],d=r[c];n(d,c,r)&&(a[c]=d)}return a},_.omit=function(e,t,i){if(_.isFunction(t))t=_.negate(t);else{var n=_.map(k(arguments,!1,!1,1),String);t=function(e,t){return!_.contains(n,t)}}return _.pick(e,t,i)},_.defaults=b(_.allKeys,!0),_.create=function(e,t){var i=x(e);return t&&_.extendOwn(i,t),i},_.clone=function(e){return _.isObject(e)?_.isArray(e)?e.slice():_.extend({},e):e},_.tap=function(e,t){return t(e),e},_.isMatch=function(e,t){var i=_.keys(t),n=i.length;if(null==e)return!n;for(var o=Object(e),a=0;a<n;a++){var r=i[a];if(t[r]!==o[r]||!(r in o))return!1}return!0};var z=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof _&&(e=e._wrapped),t instanceof _&&(t=t._wrapped);var o=u.call(e);if(o!==u.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var a="[object Array]"===o;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var r=e.constructor,s=t.constructor;if(r!==s&&!(_.isFunction(r)&&r instanceof r&&_.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[];for(var l=(i=i||[]).length;l--;)if(i[l]===e)return n[l]===t;if(i.push(e),n.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!z(e[l],t[l],i,n))return!1}else{var c,d=_.keys(e);if(l=d.length,_.keys(t).length!==l)return!1;for(;l--;)if(c=d[l],!_.has(t,c)||!z(e[c],t[c],i,n))return!1}return i.pop(),n.pop(),!0};_.isEqual=function(e,t){return z(e,t)},_.isEmpty=function(e){return null==e||(E(e)&&(_.isArray(e)||_.isString(e)||_.isArguments(e))?0===e.length:0===_.keys(e).length)},_.isElement=function(e){return!(!e||1!==e.nodeType)},_.isArray=p||function(e){return"[object Array]"===u.call(e)},_.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){_["is"+t]=function(e){return u.call(e)==="[object "+t+"]"}}),_.isArguments(arguments)||(_.isArguments=function(e){return _.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(e){return"function"==typeof e||!1}),_.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},_.isNaN=function(e){return _.isNumber(e)&&e!==+e},_.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===u.call(e)},_.isNull=function(e){return null===e},_.isUndefined=function(e){return void 0===e},_.has=function(e,t){return null!=e&&h.call(e,t)},_.noConflict=function(){return o._=a,this},_.identity=function(e){return e},_.constant=function(e){return function(){return e}},_.noop=function(){},_.property=C,_.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},_.matcher=_.matches=function(t){return t=_.extendOwn({},t),function(e){return _.isMatch(e,t)}},_.times=function(e,t,i){var n=Array(Math.max(0,e));t=w(t,i,1);for(var o=0;o<e;o++)n[o]=t(o);return n},_.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},_.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=_.invert(D),L=function(t){var i=function(e){return t[e]},e="(?:"+_.keys(t).join("|")+")",n=RegExp(e),o=RegExp(e,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(o,i):e}};_.escape=L(D),_.unescape=L(P),_.result=function(e,t,i){var n=null==e?void 0:e[t];return void 0===n&&(n=i),_.isFunction(n)?n.call(e):n};var M=0;_.uniqueId=function(e){var t=++M+"";return e?e+t:t},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\u2028|\u2029/g,F=function(e){return"\\"+N[e]};_.template=function(a,e,t){!e&&t&&(e=t),e=_.defaults({},e,_.templateSettings);var i=RegExp([(e.escape||B).source,(e.interpolate||B).source,(e.evaluate||B).source].join("|")+"|$","g"),r=0,s="__p+='";a.replace(i,function(e,t,i,n,o){return s+=a.slice(r,o).replace(R,F),r=o+e.length,t?s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":n&&(s+="';\n"+n+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var n=new Function(e.variable||"obj","_",s)}catch(e){throw e.source=s,e}var o=function(e){return n.call(this,e,_)},l=e.variable||"obj";return o.source="function("+l+"){\n"+s+"}",o},_.chain=function(e){var t=_(e);return t._chain=!0,t};var H=function(e,t){return e._chain?_(t).chain():t};_.mixin=function(i){_.each(_.functions(i),function(e){var t=_[e]=i[e];_.prototype[e]=function(){var e=[this._wrapped];return c.apply(e,arguments),H(this,t.apply(_,e))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=r[t];_.prototype[t]=function(){var e=this._wrapped;return i.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],H(this,e)}}),_.each(["concat","join","slice"],function(e){var t=r[e];_.prototype[e]=function(){return H(this,t.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}.call(this),function(e){"undefined"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(B){var N,p,R,n,o,s,a,g,F,y,f,c,l,d,u,h,m,v,_,w,b,x,E,C,T,$,S,k,H,r,A,I,O,j,z,D,P,L,M,W,q,V,U,Y,X,G,K,Z,Q,J,ee,te,ie,ne,e,t,i;e="function"==typeof define&&define.amd,t="undefined"!=typeof module&&module.exports,i="https:"==document.location.protocol?"https:":"http:",e||(t?require("jquery-mousewheel")(B):B.event.special.mousewheel||B("head").append(decodeURI("%3Cscript src="+i+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.12/jquery.mousewheel.min.js%3E%3C/script%3E"))),p="mCustomScrollbar",R="mCS",n=".mCustomScrollbar",o={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},s=0,a={},g=window.attachEvent&&!window.addEventListener?1:0,F=!1,y=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],f={init:function(r){var r=B.extend(!0,{},o,r),e=c.call(this);if(r.live){var t=r.liveSelector||this.selector||n,i=B(t);if("off"===r.live)return void d(t);a[t]=setTimeout(function(){i.mCustomScrollbar(r),"once"===r.live&&i.length&&d(t)},500)}else d(t);return r.setWidth=r.set_width?r.set_width:r.setWidth,r.setHeight=r.set_height?r.set_height:r.setHeight,r.axis=r.horizontalScroll?"x":u(r.axis),r.scrollInertia=0<r.scrollInertia&&r.scrollInertia<17?17:r.scrollInertia,"object"!=typeof r.mouseWheel&&1==r.mouseWheel&&(r.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),r.mouseWheel.scrollAmount=r.mouseWheelPixels?r.mouseWheelPixels:r.mouseWheel.scrollAmount,r.mouseWheel.normalizeDelta=r.advanced.normalizeMouseWheelDelta?r.advanced.normalizeMouseWheelDelta:r.mouseWheel.normalizeDelta,r.scrollButtons.scrollType=h(r.scrollButtons.scrollType),l(r),B(e).each(function(){var e=B(this);if(!e.data(R)){e.data(R,{idx:++s,opt:r,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:e.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var t=e.data(R),i=t.opt,n=e.data("mcs-axis"),o=e.data("mcs-scrollbar-position"),a=e.data("mcs-theme");n&&(i.axis=n),o&&(i.scrollbarPosition=o),a&&(i.theme=a,l(i)),m.call(this),t&&i.callbacks.onCreate&&"function"==typeof i.callbacks.onCreate&&i.callbacks.onCreate.call(this),B("#mCSB_"+t.idx+"_container img:not(."+y[2]+")").addClass(y[2]),f.update.call(null,e)}})},update:function(e,s){var t=e||c.call(this);return B(t).each(function(){var e=B(this);if(e.data(R)){var t=e.data(R),i=t.opt,n=B("#mCSB_"+t.idx+"_container"),o=B("#mCSB_"+t.idx),a=[B("#mCSB_"+t.idx+"_dragger_vertical"),B("#mCSB_"+t.idx+"_dragger_horizontal")];if(!n.length)return;t.tweenRunning&&X(e),s&&t&&i.callbacks.onBeforeUpdate&&"function"==typeof i.callbacks.onBeforeUpdate&&i.callbacks.onBeforeUpdate.call(this),e.hasClass(y[3])&&e.removeClass(y[3]),e.hasClass(y[4])&&e.removeClass(y[4]),o.height()!==e.height()&&o.css("max-height",e.height()),_.call(this),"y"===i.axis||i.advanced.autoExpandHorizontalScroll||n.css("width",v(n)),t.overflowed=C.call(this),k.call(this),i.autoDraggerLength&&b.call(this),x.call(this),$.call(this);var r=[Math.abs(n[0].offsetTop),Math.abs(n[0].offsetLeft)];"x"!==i.axis&&(t.overflowed[0]?a[0].height()>a[0].parent().height()?T.call(this):(G(e,r[0].toString(),{dir:"y",dur:0,overwrite:"none"}),t.contentReset.y=null):(T.call(this),"y"===i.axis?S.call(this):"yx"===i.axis&&t.overflowed[1]&&G(e,r[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==i.axis&&(t.overflowed[1]?a[1].width()>a[1].parent().width()?T.call(this):(G(e,r[1].toString(),{dir:"x",dur:0,overwrite:"none"}),t.contentReset.x=null):(T.call(this),"x"===i.axis?S.call(this):"yx"===i.axis&&t.overflowed[0]&&G(e,r[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),s&&t&&(2===s&&i.callbacks.onImageLoad&&"function"==typeof i.callbacks.onImageLoad?i.callbacks.onImageLoad.call(this):3===s&&i.callbacks.onSelectorChange&&"function"==typeof i.callbacks.onSelectorChange?i.callbacks.onSelectorChange.call(this):i.callbacks.onUpdate&&"function"==typeof i.callbacks.onUpdate&&i.callbacks.onUpdate.call(this)),Y.call(this)}})},scrollTo:function(s,l){if(void 0!==s&&null!=s){var e=c.call(this);return B(e).each(function(){var e=B(this);if(e.data(R)){var t=e.data(R),i=t.opt,n={trigger:"external",scrollInertia:i.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},o=B.extend(!0,{},n,l),a=V.call(this,s),r=0<o.scrollInertia&&o.scrollInertia<17?17:o.scrollInertia;a[0]=U.call(this,a[0],"y"),a[1]=U.call(this,a[1],"x"),o.moveDragger&&(a[0]*=t.scrollRatio.y,a[1]*=t.scrollRatio.x),o.dur=r,setTimeout(function(){null!==a[0]&&void 0!==a[0]&&"x"!==i.axis&&t.overflowed[0]&&(o.dir="y",o.overwrite="all",G(e,a[0].toString(),o)),null!==a[1]&&void 0!==a[1]&&"y"!==i.axis&&t.overflowed[1]&&(o.dir="x",o.overwrite="none",G(e,a[1].toString(),o))},o.timeout)}})}},stop:function(){var e=c.call(this);return B(e).each(function(){var e=B(this);e.data(R)&&X(e)})},disable:function(t){var e=c.call(this);return B(e).each(function(){var e=B(this);e.data(R)&&(e.data(R),Y.call(this,"remove"),S.call(this),t&&T.call(this),k.call(this,!0),e.addClass(y[3]))})},destroy:function(){var r=c.call(this);return B(r).each(function(){var e=B(this);if(e.data(R)){var t=e.data(R),i=t.opt,n=B("#mCSB_"+t.idx),o=B("#mCSB_"+t.idx+"_container"),a=B(".mCSB_"+t.idx+"_scrollbar");i.live&&d(i.liveSelector||B(r).selector),Y.call(this,"remove"),S.call(this),T.call(this),e.removeData(R),J(this,"mcs"),a.remove(),o.find("img."+y[2]).removeClass(y[2]),n.replaceWith(o.contents()),e.removeClass(p+" _"+R+"_"+t.idx+" "+y[6]+" "+y[7]+" "+y[5]+" "+y[3]).addClass(y[4])}})}},c=function(){return"object"!=typeof B(this)||B(this).length<1?n:this},l=function(e){e.autoDraggerLength=!(-1<B.inArray(e.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"]))&&e.autoDraggerLength,e.autoExpandScrollbar=!(-1<B.inArray(e.theme,["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"]))&&e.autoExpandScrollbar,e.scrollButtons.enable=!(-1<B.inArray(e.theme,["minimal","minimal-dark"]))&&e.scrollButtons.enable,e.autoHideScrollbar=-1<B.inArray(e.theme,["minimal","minimal-dark"])||e.autoHideScrollbar,e.scrollbarPosition=-1<B.inArray(e.theme,["minimal","minimal-dark"])?"outside":e.scrollbarPosition},d=function(e){a[e]&&(clearTimeout(a[e]),J(a,e))},u=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},h=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},m=function(){var e=B(this),t=e.data(R),i=t.opt,n=i.autoExpandScrollbar?" "+y[1]+"_expand":"",o=["<div id='mCSB_"+t.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+t.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_vertical"+n+"'><div class='"+y[12]+"'><div id='mCSB_"+t.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+t.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+t.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_horizontal"+n+"'><div class='"+y[12]+"'><div id='mCSB_"+t.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],a="yx"===i.axis?"mCSB_vertical_horizontal":"x"===i.axis?"mCSB_horizontal":"mCSB_vertical",r="yx"===i.axis?o[0]+o[1]:"x"===i.axis?o[1]:o[0],s="yx"===i.axis?"<div id='mCSB_"+t.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",l=i.autoHideScrollbar?" "+y[6]:"",c="x"!==i.axis&&"rtl"===t.langDir?" "+y[7]:"";i.setWidth&&e.css("width",i.setWidth),i.setHeight&&e.css("height",i.setHeight),i.setLeft="y"!==i.axis&&"rtl"===t.langDir?"989999px":i.setLeft,e.addClass(p+" _"+R+"_"+t.idx+l+c).wrapInner("<div id='mCSB_"+t.idx+"' class='mCustomScrollBox mCS-"+i.theme+" "+a+"'><div id='mCSB_"+t.idx+"_container' class='mCSB_container' style='position:relative; top:"+i.setTop+"; left:"+i.setLeft+";' dir="+t.langDir+" /></div>");var d=B("#mCSB_"+t.idx),u=B("#mCSB_"+t.idx+"_container");"y"===i.axis||i.advanced.autoExpandHorizontalScroll||u.css("width",v(u)),"outside"===i.scrollbarPosition?("static"===e.css("position")&&e.css("position","relative"),e.css("overflow","visible"),d.addClass("mCSB_outside").after(r)):(d.addClass("mCSB_inside").append(r),u.wrap(s)),w.call(this);var h=[B("#mCSB_"+t.idx+"_dragger_vertical"),B("#mCSB_"+t.idx+"_dragger_horizontal")];h[0].css("min-height",h[0].height()),h[1].css("min-width",h[1].width())},v=function(e){var t=[e[0].scrollWidth,Math.max.apply(Math,e.children().map(function(){return B(this).outerWidth(!0)}).get())],i=e.parent().width();return t[0]>i?t[0]:t[1]>i?t[1]:"100%"},_=function(){var e=B(this),t=e.data(R),i=t.opt,n=B("#mCSB_"+t.idx+"_container");if(i.advanced.autoExpandHorizontalScroll&&"y"!==i.axis){n.css({width:"auto","min-width":0,"overflow-x":"scroll"});var o=Math.ceil(n[0].scrollWidth);3===i.advanced.autoExpandHorizontalScroll||2!==i.advanced.autoExpandHorizontalScroll&&o>n.parent().width()?n.css({width:o,"min-width":"100%","overflow-x":"inherit"}):n.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(n[0].getBoundingClientRect().right+.4)-Math.floor(n[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},w=function(){var e=B(this),t=e.data(R),i=t.opt,n=B(".mCSB_"+t.idx+"_scrollbar:first"),o=ie(i.scrollButtons.tabindex)?"tabindex='"+i.scrollButtons.tabindex+"'":"",a=["<a href='#' class='"+y[13]+"' oncontextmenu='return false;' "+o+" />","<a href='#' class='"+y[14]+"' oncontextmenu='return false;' "+o+" />","<a href='#' class='"+y[15]+"' oncontextmenu='return false;' "+o+" />","<a href='#' class='"+y[16]+"' oncontextmenu='return false;' "+o+" />"],r=["x"===i.axis?a[2]:a[0],"x"===i.axis?a[3]:a[1],a[2],a[3]];i.scrollButtons.enable&&n.prepend(r[0]).append(r[1]).next(".mCSB_scrollTools").prepend(r[2]).append(r[3])},b=function(){var e=B(this),t=e.data(R),i=B("#mCSB_"+t.idx),n=B("#mCSB_"+t.idx+"_container"),o=[B("#mCSB_"+t.idx+"_dragger_vertical"),B("#mCSB_"+t.idx+"_dragger_horizontal")],a=[i.height()/n.outerHeight(!1),i.width()/n.outerWidth(!1)],r=[parseInt(o[0].css("min-height")),Math.round(a[0]*o[0].parent().height()),parseInt(o[1].css("min-width")),Math.round(a[1]*o[1].parent().width())],s=g&&r[1]<r[0]?r[0]:r[1],l=g&&r[3]<r[2]?r[2]:r[3];o[0].css({height:s,"max-height":o[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":r[0]+"px"}),o[1].css({width:l,"max-width":o[1].parent().width()-10})},x=function(){var e=B(this),t=e.data(R),i=B("#mCSB_"+t.idx),n=B("#mCSB_"+t.idx+"_container"),o=[B("#mCSB_"+t.idx+"_dragger_vertical"),B("#mCSB_"+t.idx+"_dragger_horizontal")],a=[n.outerHeight(!1)-i.height(),n.outerWidth(!1)-i.width()],r=[a[0]/(o[0].parent().height()-o[0].height()),a[1]/(o[1].parent().width()-o[1].width())];t.scrollRatio={y:r[0],x:r[1]}},E=function(e,t,i){var n=i?y[0]+"_expanded":"",o=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(y[0]+" "+n),o.toggleClass(y[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(y[0]),o.removeClass(y[1])):(e.addClass(y[0]),o.addClass(y[1])))},C=function(){var e=B(this),t=e.data(R),i=B("#mCSB_"+t.idx),n=B("#mCSB_"+t.idx+"_container"),o=null==t.overflowed?n.height():n.outerHeight(!1),a=null==t.overflowed?n.width():n.outerWidth(!1),r=n[0].scrollHeight,s=n[0].scrollWidth;return o<r&&(o=r),a<s&&(a=s),[o>i.height(),a>i.width()]},T=function(){var e=B(this),t=e.data(R),i=t.opt,n=B("#mCSB_"+t.idx),o=B("#mCSB_"+t.idx+"_container"),a=[B("#mCSB_"+t.idx+"_dragger_vertical"),B("#mCSB_"+t.idx+"_dragger_horizontal")];if(X(e),("x"!==i.axis&&!t.overflowed[0]||"y"===i.axis&&t.overflowed[0])&&(a[0].add(o).css("top",0),G(e,"_resetY")),"y"!==i.axis&&!t.overflowed[1]||"x"===i.axis&&t.overflowed[1]){var r=dx=0;"rtl"===t.langDir&&(r=n.width()-o.outerWidth(!1),dx=Math.abs(r/t.scrollRatio.x)),o.css("left",r),a[1].css("left",dx),G(e,"_resetX")}},$=function(){var t,i=B(this),e=i.data(R),n=e.opt;e.bindEvents||(r.call(this),n.contentTouchScroll&&A.call(this),I.call(this),n.mouseWheel.enable&&function e(){t=setTimeout(function(){B.event.special.mousewheel?(clearTimeout(t),O.call(i[0])):e()},100)}(),D.call(this),L.call(this),n.advanced.autoScrollOnFocus&&P.call(this),n.scrollButtons.enable&&M.call(this),n.keyboard.enable&&W.call(this),e.bindEvents=!0)},S=function(){var e=B(this),t=e.data(R),i=t.opt,n="mCS_"+t.idx,o=".mCSB_"+t.idx+"_scrollbar",a=B("#mCSB_"+t.idx+",#mCSB_"+t.idx+"_container,#mCSB_"+t.idx+"_container_wrapper,"+o+" ."+y[12]+",#mCSB_"+t.idx+"_dragger_vertical,#mCSB_"+t.idx+"_dragger_horizontal,"+o+">a"),r=B("#mCSB_"+t.idx+"_container");i.advanced.releaseDraggableSelectors&&a.add(B(i.advanced.releaseDraggableSelectors)),t.bindEvents&&(B(document).unbind("."+n),a.each(function(){B(this).unbind("."+n)}),clearTimeout(e[0]._focusTimeout),J(e[0],"_focusTimeout"),clearTimeout(t.sequential.step),J(t.sequential,"step"),clearTimeout(r[0].onCompleteTimeout),J(r[0],"onCompleteTimeout"),t.bindEvents=!1)},k=function(e){var t=B(this),i=t.data(R),n=i.opt,o=B("#mCSB_"+i.idx+"_container_wrapper"),a=o.length?o:B("#mCSB_"+i.idx+"_container"),r=[B("#mCSB_"+i.idx+"_scrollbar_vertical"),B("#mCSB_"+i.idx+"_scrollbar_horizontal")],s=[r[0].find(".mCSB_dragger"),r[1].find(".mCSB_dragger")];"x"!==n.axis&&(i.overflowed[0]&&!e?(r[0].add(s[0]).add(r[0].children("a")).css("display","block"),a.removeClass(y[8]+" "+y[10])):(n.alwaysShowScrollbar?(2!==n.alwaysShowScrollbar&&s[0].css("display","none"),a.removeClass(y[10])):(r[0].css("display","none"),a.addClass(y[10])),a.addClass(y[8]))),"y"!==n.axis&&(i.overflowed[1]&&!e?(r[1].add(s[1]).add(r[1].children("a")).css("display","block"),a.removeClass(y[9]+" "+y[11])):(n.alwaysShowScrollbar?(2!==n.alwaysShowScrollbar&&s[1].css("display","none"),a.removeClass(y[11])):(r[1].css("display","none"),a.addClass(y[11])),a.addClass(y[9]))),i.overflowed[0]||i.overflowed[1]?t.removeClass(y[5]):t.addClass(y[5])},H=function(e){var t=e.type;switch(t){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return e.target.ownerDocument!==document?[e.originalEvent.screenY,e.originalEvent.screenX,!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var i=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],n=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return e.target.ownerDocument!==document?[i.screenY,i.screenX,1<n]:[i.pageY,i.pageX,1<n];default:return[e.pageY,e.pageX,!1]}},r=function(){function r(e){var t=f.find("iframe");if(t.length){var i=e?"auto":"none";t.css("pointer-events",i)}}function o(e,t,i,n){if(f[0].idleTimer=h.scrollInertia<233?250:0,s.attr("id")===p[1])var o="x",a=(s[0].offsetLeft-t+n)*u.scrollRatio.x;else var o="y",a=(s[0].offsetTop-e+i)*u.scrollRatio.y;G(d,a.toString(),{dir:o,drag:!0})}var s,l,c,d=B(this),u=d.data(R),h=u.opt,e="mCS_"+u.idx,p=["mCSB_"+u.idx+"_dragger_vertical","mCSB_"+u.idx+"_dragger_horizontal"],f=B("#mCSB_"+u.idx+"_container"),t=B("#"+p[0]+",#"+p[1]),i=h.advanced.releaseDraggableSelectors?t.add(B(h.advanced.releaseDraggableSelectors)):t;t.bind("mousedown."+e+" touchstart."+e+" pointerdown."+e+" MSPointerDown."+e,function(e){if(e.stopImmediatePropagation(),e.preventDefault(),ee(e)){F=!0,g&&(document.onselectstart=function(){return!1}),r(!1),X(d);var t=(s=B(this)).offset(),i=H(e)[0]-t.top,n=H(e)[1]-t.left,o=s.height()+t.top,a=s.width()+t.left;i<o&&0<i&&n<a&&0<n&&(l=i,c=n),E(s,"active",h.autoExpandScrollbar)}}).bind("touchmove."+e,function(e){e.stopImmediatePropagation(),e.preventDefault();var t=s.offset(),i=H(e)[0]-t.top,n=H(e)[1]-t.left;o(l,c,i,n)}),B(document).bind("mousemove."+e+" pointermove."+e+" MSPointerMove."+e,function(e){if(s){var t=s.offset(),i=H(e)[0]-t.top,n=H(e)[1]-t.left;if(l===i)return;o(l,c,i,n)}}).add(i).bind("mouseup."+e+" touchend."+e+" pointerup."+e+" MSPointerUp."+e,function(e){s&&(E(s,"active",h.autoExpandScrollbar),s=null),F=!1,g&&(document.onselectstart=null),r(!0)})},A=function(){function t(e){if(!te(e)||F||H(e)[2])N=0;else{T=C=0,h=N=1,$.removeClass("mCS_touch_action");var t=A.offset();c=H(e)[0]-t.top,p=H(e)[1]-t.left,L=[H(e)[0],H(e)[1]]}}function i(e){if(te(e)&&!F&&!H(e)[2]&&(e.stopImmediatePropagation(),(!T||C)&&h)){v=Z();var t=k.offset(),i=H(e)[0]-t.top,n=H(e)[1]-t.left,o="mcsLinearOut";if(O.push(i),z.push(n),L[2]=Math.abs(H(e)[0]-L[0]),L[3]=Math.abs(H(e)[1]-L[1]),E.overflowed[0])var a=I[0].parent().height()-I[0].height(),r=0<c-i&&i-c>-a*E.scrollRatio.y&&(2*L[3]<L[2]||"yx"===S.axis);if(E.overflowed[1])var s=I[1].parent().width()-I[1].width(),l=0<p-n&&n-p>-s*E.scrollRatio.x&&(2*L[2]<L[3]||"yx"===S.axis);r||l?(M||e.preventDefault(),C=1):(T=1,$.addClass("mCS_touch_action")),M&&e.preventDefault(),b="yx"===S.axis?[c-i,p-n]:"x"===S.axis?[null,p-n]:[c-i,null],A[0].idleTimer=250,E.overflowed[0]&&u(b[0],D,o,"y","all",!0),E.overflowed[1]&&u(b[1],D,o,"x",P,!0)}}function n(e){if(!te(e)||F||H(e)[2])N=0;else{N=1,e.stopImmediatePropagation(),X($),m=Z();var t=k.offset();f=H(e)[0]-t.top,g=H(e)[1]-t.left,O=[],z=[]}}function o(e){if(te(e)&&!F&&!H(e)[2]){h=0,e.stopImmediatePropagation(),T=C=0,_=Z();var t=k.offset(),i=H(e)[0]-t.top,n=H(e)[1]-t.left;if(!(30<_-v)){var o="mcsEaseOut",a=(y=1e3/(_-m))<2.5,r=a?[O[O.length-2],z[z.length-2]]:[0,0];w=a?[i-r[0],n-r[1]]:[i-f,n-g];var s=[Math.abs(w[0]),Math.abs(w[1])];y=a?[Math.abs(w[0]/4),Math.abs(w[1]/4)]:[y,y];var l=[Math.abs(A[0].offsetTop)-w[0]*d(s[0]/y[0],y[0]),Math.abs(A[0].offsetLeft)-w[1]*d(s[1]/y[1],y[1])];b="yx"===S.axis?[l[0],l[1]]:"x"===S.axis?[null,l[1]]:[l[0],null],x=[4*s[0]+S.scrollInertia,4*s[1]+S.scrollInertia];var c=parseInt(S.contentTouchScroll)||0;b[0]=s[0]>c?b[0]:0,b[1]=s[1]>c?b[1]:0,E.overflowed[0]&&u(b[0],x[0],o,"y",P,!1),E.overflowed[1]&&u(b[1],x[1],o,"x",P,!1)}}}function d(e,t){var i=[1.5*t,2*t,t/1.5,t/2];return 90<e?4<t?i[0]:i[3]:60<e?3<t?i[3]:i[2]:30<e?8<t?i[1]:6<t?i[0]:4<t?t:i[2]:8<t?t:i[3]}function u(e,t,i,n,o,a){e&&G($,e.toString(),{dur:t,scrollEasing:i,dir:n,overwrite:o,drag:a})}var h,c,p,f,g,m,v,_,w,y,b,x,C,T,$=B(this),E=$.data(R),S=E.opt,e="mCS_"+E.idx,k=B("#mCSB_"+E.idx),A=B("#mCSB_"+E.idx+"_container"),I=[B("#mCSB_"+E.idx+"_dragger_vertical"),B("#mCSB_"+E.idx+"_dragger_horizontal")],O=[],z=[],D=0,P="yx"===S.axis?"none":"all",L=[],a=A.find("iframe"),r=["touchstart."+e+" pointerdown."+e+" MSPointerDown."+e,"touchmove."+e+" pointermove."+e+" MSPointerMove."+e,"touchend."+e+" pointerup."+e+" MSPointerUp."+e],M=void 0!==document.body.style.touchAction;A.bind(r[0],function(e){t(e)}).bind(r[1],function(e){i(e)}),k.bind(r[0],function(e){n(e)}).bind(r[2],function(e){o(e)}),a.length&&a.each(function(){B(this).load(function(){j(this)&&B(this.contentDocument||this.contentWindow.document).bind(r[0],function(e){t(e),n(e)}).bind(r[1],function(e){i(e)}).bind(r[2],function(e){o(e)})})})},I=function(){function o(e,t,i){l.type=i&&a?"stepped":"stepless",l.scrollAmount=10,q(n,e,t,"mcsLinearOut",i?60:null)}var a,n=B(this),r=n.data(R),s=r.opt,l=r.sequential,e="mCS_"+r.idx,c=B("#mCSB_"+r.idx+"_container"),d=c.parent();c.bind("mousedown."+e,function(e){N||a||(a=1,F=!0)}).add(document).bind("mousemove."+e,function(e){if(!N&&a&&(window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&document.selection.createRange().text)){var t=c.offset(),i=H(e)[0]-t.top+c[0].offsetTop,n=H(e)[1]-t.left+c[0].offsetLeft;0<i&&i<d.height()&&0<n&&n<d.width()?l.step&&o("off",null,"stepped"):("x"!==s.axis&&r.overflowed[0]&&(i<0?o("on",38):i>d.height()&&o("on",40)),"y"!==s.axis&&r.overflowed[1]&&(n<0?o("on",37):n>d.width()&&o("on",39)))}}).bind("mouseup."+e+" dragend."+e,function(e){N||(a&&(a=0,o("off",null)),F=!1)})},O=function(){function i(e,t){if(X(d),!z(d,e.target)){var i="auto"!==h.mouseWheel.deltaFactor?parseInt(h.mouseWheel.deltaFactor):g&&e.deltaFactor<100?100:e.deltaFactor||100;if("x"===h.axis||"x"===h.mouseWheel.axis)var n="x",o=[Math.round(i*u.scrollRatio.x),parseInt(h.mouseWheel.scrollAmount)],a="auto"!==h.mouseWheel.scrollAmount?o[1]:o[0]>=p.width()?.9*p.width():o[0],r=Math.abs(B("#mCSB_"+u.idx+"_container")[0].offsetLeft),s=f[1][0].offsetLeft,l=f[1].parent().width()-f[1].width(),c=e.deltaX||e.deltaY||t;else var n="y",o=[Math.round(i*u.scrollRatio.y),parseInt(h.mouseWheel.scrollAmount)],a="auto"!==h.mouseWheel.scrollAmount?o[1]:o[0]>=p.height()?.9*p.height():o[0],r=Math.abs(B("#mCSB_"+u.idx+"_container")[0].offsetTop),s=f[0][0].offsetTop,l=f[0].parent().height()-f[0].height(),c=e.deltaY||t;"y"===n&&!u.overflowed[0]||"x"===n&&!u.overflowed[1]||((h.mouseWheel.invert||e.webkitDirectionInvertedFromDevice)&&(c=-c),h.mouseWheel.normalizeDelta&&(c=c<0?-1:1),(0<c&&0!==s||c<0&&s!==l||h.mouseWheel.preventDefault)&&(e.stopImmediatePropagation(),e.preventDefault()),G(d,(r-c*a).toString(),{dir:n}))}}if(B(this).data(R)){var d=B(this),u=d.data(R),h=u.opt,e="mCS_"+u.idx,p=B("#mCSB_"+u.idx),f=[B("#mCSB_"+u.idx+"_dragger_vertical"),B("#mCSB_"+u.idx+"_dragger_horizontal")],t=B("#mCSB_"+u.idx+"_container").find("iframe");t.length&&t.each(function(){B(this).load(function(){j(this)&&B(this.contentDocument||this.contentWindow.document).bind("mousewheel."+e,function(e,t){i(e,t)})})}),p.bind("mousewheel."+e,function(e,t){i(e,t)})}},j=function(e){var t=null;try{var i=e.contentDocument||e.contentWindow.document;t=i.body.innerHTML}catch(e){}return null!==t},z=function(e,t){var i=t.nodeName.toLowerCase(),n=e.data(R).opt.mouseWheel.disableOver;return-1<B.inArray(i,n)&&!(-1<B.inArray(i,["select","textarea"])&&!B(t).is(":focus"))},D=function(){var r=B(this),s=r.data(R),e="mCS_"+s.idx,l=B("#mCSB_"+s.idx+"_container"),c=l.parent(),t=B(".mCSB_"+s.idx+"_scrollbar ."+y[12]);t.bind("touchstart."+e+" pointerdown."+e+" MSPointerDown."+e,function(e){F=!0}).bind("touchend."+e+" pointerup."+e+" MSPointerUp."+e,function(e){F=!1}).bind("click."+e,function(e){if(B(e.target).hasClass(y[12])||B(e.target).hasClass("mCSB_draggerRail")){X(r);var t=B(this),i=t.find(".mCSB_dragger");if(0<t.parent(".mCSB_scrollTools_horizontal").length){if(!s.overflowed[1])return;var n="x",o=e.pageX>i.offset().left?-1:1,a=Math.abs(l[0].offsetLeft)-o*(.9*c.width())}else{if(!s.overflowed[0])return;var n="y",o=e.pageY>i.offset().top?-1:1,a=Math.abs(l[0].offsetTop)-o*(.9*c.height())}G(r,a.toString(),{dir:n,scrollEasing:"mcsEaseInOut"})}})},P=function(){var a=B(this),e=a.data(R),r=e.opt,t="mCS_"+e.idx,s=B("#mCSB_"+e.idx+"_container"),l=s.parent();s.bind("focusin."+t,function(e){var o=B(document.activeElement),t=s.find(".mCustomScrollBox").length;o.is(r.advanced.autoScrollOnFocus)&&(X(a),clearTimeout(a[0]._focusTimeout),a[0]._focusTimer=t?17*t:0,a[0]._focusTimeout=setTimeout(function(){var e=[ne(o)[0],ne(o)[1]],t=[s[0].offsetTop,s[0].offsetLeft],i=[0<=t[0]+e[0]&&t[0]+e[0]<l.height()-o.outerHeight(!1),0<=t[1]+e[1]&&t[0]+e[1]<l.width()-o.outerWidth(!1)],n="yx"!==r.axis||i[0]||i[1]?"all":"none";"x"===r.axis||i[0]||G(a,e[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:n,dur:0}),"y"===r.axis||i[1]||G(a,e[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:n,dur:0})},a[0]._focusTimer))})},L=function(){var e=B(this),t=e.data(R),i="mCS_"+t.idx,n=B("#mCSB_"+t.idx+"_container").parent();n.bind("scroll."+i,function(e){0===n.scrollTop()&&0===n.scrollLeft()||B(".mCSB_"+t.idx+"_scrollbar").css("visibility","hidden")})},M=function(){var n=B(this),o=n.data(R),a=o.opt,r=o.sequential,e="mCS_"+o.idx,t=".mCSB_"+o.idx+"_scrollbar",i=B(t+">a");i.bind("mousedown."+e+" touchstart."+e+" pointerdown."+e+" MSPointerDown."+e+" mouseup."+e+" touchend."+e+" pointerup."+e+" MSPointerUp."+e+" mouseout."+e+" pointerout."+e+" MSPointerOut."+e+" click."+e,function(e){function t(e,t){r.scrollAmount=a.snapAmount||a.scrollButtons.scrollAmount,q(n,e,t)}if(e.preventDefault(),ee(e)){var i=B(this).attr("class");switch(r.type=a.scrollButtons.scrollType,e.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===r.type)return;F=!0,o.tweenRunning=!1,t("on",i);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===r.type)return;F=!1,r.dir&&t("off",i);break;case"click":if("stepped"!==r.type||o.tweenRunning)return;t("on",i)}}})},W=function(){function t(e){function t(e,t){d.type=c.keyboard.scrollType,d.scrollAmount=c.snapAmount||c.keyboard.scrollAmount,"stepped"===d.type&&l.tweenRunning||q(s,e,t)}switch(e.type){case"blur":l.tweenRunning&&d.dir&&t("off",null);break;case"keydown":case"keyup":var i=e.keyCode?e.keyCode:e.which,n="on";if("x"!==c.axis&&(38===i||40===i)||"y"!==c.axis&&(37===i||39===i)){if((38===i||40===i)&&!l.overflowed[0]||(37===i||39===i)&&!l.overflowed[1])return;"keyup"===e.type&&(n="off"),B(document.activeElement).is(p)||(e.preventDefault(),e.stopImmediatePropagation(),t(n,i))}else if(33===i||34===i){if((l.overflowed[0]||l.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type){X(s);var o=34===i?-1:1;if("x"===c.axis||"yx"===c.axis&&l.overflowed[1]&&!l.overflowed[0])var a="x",r=Math.abs(u[0].offsetLeft)-o*(.9*h.width());else var a="y",r=Math.abs(u[0].offsetTop)-o*(.9*h.height());G(s,r.toString(),{dir:a,scrollEasing:"mcsEaseInOut"})}}else if((35===i||36===i)&&!B(document.activeElement).is(p)&&((l.overflowed[0]||l.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type)){if("x"===c.axis||"yx"===c.axis&&l.overflowed[1]&&!l.overflowed[0])var a="x",r=35===i?Math.abs(h.width()-u.outerWidth(!1)):0;else var a="y",r=35===i?Math.abs(h.height()-u.outerHeight(!1)):0;G(s,r.toString(),{dir:a,scrollEasing:"mcsEaseInOut"})}}}var s=B(this),l=s.data(R),c=l.opt,d=l.sequential,e="mCS_"+l.idx,i=B("#mCSB_"+l.idx),u=B("#mCSB_"+l.idx+"_container"),h=u.parent(),p="input,textarea,select,datalist,keygen,[contenteditable='true']",n=u.find("iframe"),o=["blur."+e+" keydown."+e+" keyup."+e];n.length&&n.each(function(){B(this).load(function(){j(this)&&B(this.contentDocument||this.contentWindow.document).bind(o[0],function(e){t(e)})})}),i.attr("tabindex","0").bind(o[0],function(e){t(e)})},q=function(u,e,t,h,p){function f(e){var t="stepped"!==m.type,i=p||(e?t?_/1.5:w:1e3/60),n=e?t?7.5:40:2.5,o=[Math.abs(v[0].offsetTop),Math.abs(v[0].offsetLeft)],a=[10<g.scrollRatio.y?10:g.scrollRatio.y,10<g.scrollRatio.x?10:g.scrollRatio.x],r="x"===m.dir[0]?o[1]+m.dir[1]*(a[1]*n):o[0]+m.dir[1]*(a[0]*n),s="x"===m.dir[0]?o[1]+m.dir[1]*parseInt(m.scrollAmount):o[0]+m.dir[1]*parseInt(m.scrollAmount),l="auto"!==m.scrollAmount?s:r,c=h||(e?t?"mcsLinearOut":"mcsEaseInOut":"mcsLinear"),d=!!e;e&&i<17&&(l="x"===m.dir[0]?o[1]:o[0]),G(u,l.toString(),{dir:m.dir[0],scrollEasing:c,dur:i,onComplete:d}),e?m.dir=!1:(clearTimeout(m.step),m.step=setTimeout(function(){f()},i))}var g=u.data(R),i=g.opt,m=g.sequential,v=B("#mCSB_"+g.idx+"_container"),n="stepped"===m.type,_=i.scrollInertia<26?26:i.scrollInertia,w=i.scrollInertia<1?17:i.scrollInertia;switch(e){case"on":if(m.dir=[t===y[16]||t===y[15]||39===t||37===t?"x":"y",t===y[13]||t===y[15]||38===t||37===t?-1:1],X(u),ie(t)&&"stepped"===m.type)return;f(n);break;case"off":clearTimeout(m.step),J(m,"step"),X(u),(n||g.tweenRunning&&m.dir)&&f(!0)}},V=function(e){var t=B(this).data(R).opt,i=[];return"function"==typeof e&&(e=e()),e instanceof Array?i=1<e.length?[e[0],e[1]]:"x"===t.axis?[null,e[0]]:[e[0],null]:(i[0]=e.y?e.y:e.x||"x"===t.axis?null:e,i[1]=e.x?e.x:e.y||"y"===t.axis?null:e),"function"==typeof i[0]&&(i[0]=i[0]()),"function"==typeof i[1]&&(i[1]=i[1]()),i},U=function(e,t){if(null!=e&&void 0!==e){var i=B(this),n=i.data(R),o=n.opt,a=B("#mCSB_"+n.idx+"_container"),r=a.parent(),s=typeof e;t||(t="x"===o.axis?"x":"y");var l="x"===t?a.outerWidth(!1):a.outerHeight(!1),c="x"===t?a[0].offsetLeft:a[0].offsetTop,d="x"===t?"left":"top";switch(s){case"function":return e();case"object":var u=e.jquery?e:B(e);if(!u.length)return;return"x"===t?ne(u)[1]:ne(u)[0];case"string":case"number":if(ie(e))return Math.abs(e);if(-1!==e.indexOf("%"))return Math.abs(l*parseInt(e)/100);if(-1!==e.indexOf("-="))return Math.abs(c-parseInt(e.split("-=")[1]));if(-1!==e.indexOf("+=")){var h=c+parseInt(e.split("+=")[1]);return 0<=h?0:Math.abs(h)}if(-1!==e.indexOf("px")&&ie(e.split("px")[0]))return Math.abs(e.split("px")[0]);if("top"===e||"left"===e)return 0;if("bottom"===e)return Math.abs(r.height()-a.outerHeight(!1));if("right"===e)return Math.abs(r.width()-a.outerWidth(!1));if("first"===e||"last"===e){var u=a.find(":"+e);return"x"===t?ne(u)[1]:ne(u)[0]}return B(e).length?"x"===t?ne(B(e))[1]:ne(B(e))[0]:(a.css(d,e),void f.update.call(null,i[0]))}}},Y=function(e){function o(e){clearTimeout(a[0].autoUpdate),f.update.call(null,t[0],e)}var t=B(this),i=t.data(R),n=i.opt,a=B("#mCSB_"+i.idx+"_container");if(e)return clearTimeout(a[0].autoUpdate),void J(a[0],"autoUpdate");!function e(){clearTimeout(a[0].autoUpdate),0!==t.parents("html").length?a[0].autoUpdate=setTimeout(function(){return n.advanced.updateOnSelectorChange&&(i.poll.change.n=function(){!0===n.advanced.updateOnSelectorChange&&(n.advanced.updateOnSelectorChange="*");var e=0,t=a.find(n.advanced.updateOnSelectorChange);return n.advanced.updateOnSelectorChange&&0<t.length&&t.each(function(){e+=this.offsetHeight+this.offsetWidth}),e}(),i.poll.change.n!==i.poll.change.o)?(i.poll.change.o=i.poll.change.n,void o(3)):n.advanced.updateOnContentResize&&(i.poll.size.n=t[0].scrollHeight+t[0].scrollWidth+a[0].offsetHeight+t[0].offsetHeight,i.poll.size.n!==i.poll.size.o)?(i.poll.size.o=i.poll.size.n,void o(1)):!n.advanced.updateOnImageLoad||"auto"===n.advanced.updateOnImageLoad&&"y"===n.axis||(i.poll.img.n=a.find("img").length,i.poll.img.n===i.poll.img.o)?void((n.advanced.updateOnSelectorChange||n.advanced.updateOnContentResize||n.advanced.updateOnImageLoad)&&e()):(i.poll.img.o=i.poll.img.n,void a.find("img").each(function(){!function(e){if(B(e).hasClass(y[2]))return o();var t,i,n=new Image;n.onload=(t=n,i=function(){this.onload=null,B(e).addClass(y[2]),o(2)},function(){return i.apply(t,arguments)}),n.src=e.src}(this)}))},n.advanced.autoUpdateTimeout):t=null}()},X=function(e){var t=e.data(R),i=B("#mCSB_"+t.idx+"_container,#mCSB_"+t.idx+"_container_wrapper,#mCSB_"+t.idx+"_dragger_vertical,#mCSB_"+t.idx+"_dragger_horizontal");i.each(function(){Q.call(this)})},G=function(o,e,a){function t(e){return n&&r.callbacks[e]&&"function"==typeof r.callbacks[e]}function i(){var e=[d[0].offsetTop,d[0].offsetLeft],t=[v[0].offsetTop,v[0].offsetLeft],i=[d.outerHeight(!1),d.outerWidth(!1)],n=[c.height(),c.width()];o[0].mcs={content:d,top:e[0],left:e[1],draggerTop:t[0],draggerLeft:t[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(i[0])-n[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(i[1])-n[1])),direction:a.dir}}var n=o.data(R),r=n.opt,s={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:r.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},a=B.extend(s,a),l=[a.dur,a.drag?0:a.dur],c=B("#mCSB_"+n.idx),d=B("#mCSB_"+n.idx+"_container"),u=d.parent(),h=r.callbacks.onTotalScrollOffset?V.call(o,r.callbacks.onTotalScrollOffset):[0,0],p=r.callbacks.onTotalScrollBackOffset?V.call(o,r.callbacks.onTotalScrollBackOffset):[0,0];if(n.trigger=a.trigger,0===u.scrollTop()&&0===u.scrollLeft()||(B(".mCSB_"+n.idx+"_scrollbar").css("visibility","visible"),u.scrollTop(0).scrollLeft(0)),"_resetY"!==e||n.contentReset.y||(t("onOverflowYNone")&&r.callbacks.onOverflowYNone.call(o[0]),n.contentReset.y=1),"_resetX"!==e||n.contentReset.x||(t("onOverflowXNone")&&r.callbacks.onOverflowXNone.call(o[0]),n.contentReset.x=1),"_resetY"!==e&&"_resetX"!==e){var f,g,m;switch(!n.contentReset.y&&o[0].mcs||!n.overflowed[0]||(t("onOverflowY")&&r.callbacks.onOverflowY.call(o[0]),n.contentReset.x=null),!n.contentReset.x&&o[0].mcs||!n.overflowed[1]||(t("onOverflowX")&&r.callbacks.onOverflowX.call(o[0]),n.contentReset.x=null),r.snapAmount&&(f=e,g=r.snapAmount,m=r.snapOffset,e=Math.round(f/g)*g-m),a.dir){case"x":var v=B("#mCSB_"+n.idx+"_dragger_horizontal"),_="left",w=d[0].offsetLeft,y=[c.width()-d.outerWidth(!1),v.parent().width()-v.width()],b=[e,0===e?0:e/n.scrollRatio.x],x=h[1],C=p[1],T=0<x?x/n.scrollRatio.x:0,$=0<C?C/n.scrollRatio.x:0;break;case"y":var v=B("#mCSB_"+n.idx+"_dragger_vertical"),_="top",w=d[0].offsetTop,y=[c.height()-d.outerHeight(!1),v.parent().height()-v.height()],b=[e,0===e?0:e/n.scrollRatio.y],x=h[0],C=p[0],T=0<x?x/n.scrollRatio.y:0,$=0<C?C/n.scrollRatio.y:0}b[1]<0||0===b[0]&&0===b[1]?b=[0,0]:b[1]>=y[1]?b=[y[0],y[1]]:b[0]=-b[0],o[0].mcs||(i(),t("onInit")&&r.callbacks.onInit.call(o[0])),clearTimeout(d[0].onCompleteTimeout),!n.tweenRunning&&(0===w&&0<=b[0]||w===y[0]&&b[0]<=y[0])||(K(v[0],_,Math.round(b[1]),l[1],a.scrollEasing),K(d[0],_,Math.round(b[0]),l[0],a.scrollEasing,a.overwrite,{onStart:function(){a.callbacks&&a.onStart&&!n.tweenRunning&&(t("onScrollStart")&&(i(),r.callbacks.onScrollStart.call(o[0])),n.tweenRunning=!0,E(v),n.cbOffsets=[r.callbacks.alwaysTriggerOffsets||w>=y[0]+x,r.callbacks.alwaysTriggerOffsets||w<=-C])},onUpdate:function(){a.callbacks&&a.onUpdate&&t("whileScrolling")&&(i(),r.callbacks.whileScrolling.call(o[0]))},onComplete:function(){if(a.callbacks&&a.onComplete){"yx"===r.axis&&clearTimeout(d[0].onCompleteTimeout);var e=d[0].idleTimer||0;d[0].onCompleteTimeout=setTimeout(function(){t("onScroll")&&(i(),r.callbacks.onScroll.call(o[0])),t("onTotalScroll")&&b[1]>=y[1]-T&&n.cbOffsets[0]&&(i(),r.callbacks.onTotalScroll.call(o[0])),t("onTotalScrollBack")&&b[1]<=$&&n.cbOffsets[1]&&(i(),r.callbacks.onTotalScrollBack.call(o[0])),n.tweenRunning=!1,d[0].idleTimer=0,E(v,"hide")},e)}}}))}},K=function(e,t,i,n,o,a,r){function s(){_.stop||(g||u.call(),g=Z()-f,l(),g>=_.time&&(_.time=g>_.time?g+c-(g-_.time):g+c-1,_.time<g+1&&(_.time=g+1)),_.time<n?_.id=d(s):p.call())}function l(){0<n?(_.currVal=function(e,t,i,n,o){switch(o){case"linear":case"mcsLinear":return i*e/n+t;case"mcsLinearOut":return e/=n,e--,i*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t;case"easeInOutStrong":return(e/=n/2)<1?i/2*Math.pow(2,10*(e-1))+t:(e--,i/2*(2-Math.pow(2,-10*e))+t);case"easeInOut":case"mcsEaseInOut":return(e/=n/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t;case"easeOutSmooth":return e/=n,-i*(--e*e*e*e-1)+t;case"easeOutStrong":return i*(1-Math.pow(2,-10*e/n))+t;case"easeOut":case"mcsEaseOut":default:var a=(e/=n)*e,r=a*e;return t+i*(.499999999999997*r*a+-2.5*a*a+5.5*r+-6.5*a+4*e)}}(_.time,m,w,n,o),v[t]=Math.round(_.currVal)+"px"):v[t]=i+"px",h.call()}e._mTween||(e._mTween={top:{},left:{}});var c,d,r=r||{},u=r.onStart||function(){},h=r.onUpdate||function(){},p=r.onComplete||function(){},f=Z(),g=0,m=e.offsetTop,v=e.style,_=e._mTween[t];"left"===t&&(m=e.offsetLeft);var w=i-m;_.stop=0,"none"!==a&&null!=_.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(_.id):clearTimeout(_.id),_.id=null),c=1e3/60,_.time=g+c,d=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return l(),setTimeout(e,.01)},_.id=d(s)},Z=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},Q=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],i=0;i<t.length;i++){var n=t[i];e._mTween[n].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[n].id):clearTimeout(e._mTween[n].id),e._mTween[n].id=null,e._mTween[n].stop=1)}},J=function(t,i){try{delete t[i]}catch(e){t[i]=null}},ee=function(e){return!(e.which&&1!==e.which)},te=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},ie=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ne=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]},B.fn[p]=function(e){return f[e]?f[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void B.error("Method "+e+" does not exist"):f.init.apply(this,arguments)},B[p]=function(e){return f[e]?f[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void B.error("Method "+e+" does not exist"):f.init.apply(this,arguments)},B[p].defaults=o,window[p]=!0,B(window).load(function(){B(n)[p](),B.extend(B.expr[":"],{mcsInView:B.expr[":"].mcsInView||function(e){var t,i,n=B(e),o=n.parents(".mCSB_container");if(o.length)return t=o.parent(),0<=(i=[o[0].offsetTop,o[0].offsetLeft])[0]+ne(n)[0]&&i[0]+ne(n)[0]<t.height()-n.outerHeight(!1)&&0<=i[1]+ne(n)[1]&&i[1]+ne(n)[1]<t.width()-n.outerWidth(!1)},mcsOverflow:B.expr[":"].mcsOverflow||function(e){var t=B(e).data(R);if(t)return t.overflowed[0]||t.overflowed[1]}})})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(n,t){function e(){return!0}function o(){return!1}function i(e){e.preventDefault()}function a(e){S[e.target.tagName.toLowerCase()]||e.preventDefault()}function r(e,t){var i,n;if(e.identifiedTouch)return e.identifiedTouch(t);for(i=-1,n=e.length;++i<n;)if(e[i].identifier===t)return e[i]}function s(e,t){var i=r(e.changedTouches,t.identifier);if(i&&(i.pageX!==t.pageX||i.pageY!==t.pageY))return i}function l(e){f(e,e.data,e,d)}function c(e){d()}function d(){T(document,k.move,l),T(document,k.cancel,c)}function u(e){var t=e.data,i=s(e,t);i&&f(e,t,i,p)}function h(e){var t=e.data;r(e.changedTouches,t.identifier)&&p(t.identifier)}function p(e){T(document,"."+e,u),T(document,"."+e,h)}function f(e,t,i,n){var o=i.pageX-t.startX,a=i.pageY-t.startY;o*o+a*a<x*x||function(e,t,i,n,o,a){var r,s;t.target;r=e.targetTouches,s=e.timeStamp-t.timeStamp,t.type="movestart",t.distX=n,t.distY=o,t.deltaX=n,t.deltaY=o,t.pageX=i.pageX,t.pageY=i.pageY,t.velocityX=n/s,t.velocityY=o/s,t.targetTouches=r,t.finger=r?r.length:1,t._handled=g,t._preventTouchmoveDefault=function(){e.preventDefault()},$(t.target,t),a(t.identifier)}(e,t,i,o,a,n)}function g(){return this._handled=e,!1}function m(e){e._handled()}function v(e){var t=e.data.timer;(e.data.touch=e).data.timeStamp=e.timeStamp,t.kick()}function _(e){var t=e.data.event,i=e.data.timer;T(document,k.move,v),T(document,k.end,_),b(t,i,function(){setTimeout(function(){T(t.target,"click",o)},0)})}function w(e){var t=e.data.event,i=e.data.timer,n=s(e,t);n&&(e.preventDefault(),t.targetTouches=e.targetTouches,e.data.touch=n,e.data.timeStamp=e.timeStamp,i.kick())}function y(e){var t,i=e.data.event,n=e.data.timer;r(e.changedTouches,i.identifier)&&(t=i,T(document,"."+t.identifier,w),T(document,"."+t.identifier,y),b(i,n))}function b(e,t,i){t.end(function(){return e.type="moveend",$(e.target,e),i&&i()})}var x=6,C=n.event.add,T=n.event.remove,$=function(e,t,i){n.event.trigger(t,i,e)},E=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(function(){e()},25)},S={textarea:!0,input:!0,select:!0,button:!0},k={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},A={move:"touchmove",cancel:"touchend",end:"touchend"};n.event.special.movestart={setup:function(e,t,i){return C(this,"movestart.move",m),!0},teardown:function(e){return T(this,"dragstart drag",i),T(this,"mousedown touchstart",a),T(this,"movestart",m),!0},add:function(e){"move"!==e.namespace&&"moveend"!==e.namespace&&(C(this,"dragstart."+e.guid+" drag."+e.guid,i,t,e.selector),C(this,"mousedown."+e.guid,a,t,e.selector))},remove:function(e){"move"!==e.namespace&&"moveend"!==e.namespace&&(T(this,"dragstart."+e.guid+" drag."+e.guid),T(this,"mousedown."+e.guid))},_default:function(a){var r,s;a._handled()&&(r={target:a.target,startX:a.startX,startY:a.startY,pageX:a.pageX,pageY:a.pageY,distX:a.distX,distY:a.distY,deltaX:a.deltaX,deltaY:a.deltaY,velocityX:a.velocityX,velocityY:a.velocityY,timeStamp:a.timeStamp,identifier:a.identifier,targetTouches:a.targetTouches,finger:a.finger},s={event:r,timer:new function(e){function t(e){n?(i(),E(t),n=!(o=!0)):o=!1}var i=e,n=!1,o=!1;this.kick=function(e){n=!0,o||t()},this.end=function(e){var t=i;e&&(o?(i=n?function(){t(),e()}:e,n=!0):e())}}(function(e){var t,i,n,o;t=r,i=s.touch,n=s.timeStamp,o=n-t.timeStamp,t.type="move",t.distX=i.pageX-t.startX,t.distY=i.pageY-t.startY,t.deltaX=i.pageX-t.pageX,t.deltaY=i.pageY-t.pageY,t.velocityX=.3*t.velocityX+.7*t.deltaX/o,t.velocityY=.3*t.velocityY+.7*t.deltaY/o,t.pageX=i.pageX,t.pageY=i.pageY,$(a.target,r)}),touch:t,timeStamp:t},a.identifier===t?(C(a.target,"click",o),C(document,k.move,v,s),C(document,k.end,_,s)):(a._preventTouchmoveDefault(),C(document,A.move+"."+a.identifier,w,s),C(document,A.end+"."+a.identifier,y,s)))}},n.event.special.move={setup:function(){C(this,"movestart.move",n.noop)},teardown:function(){T(this,"movestart.move",n.noop)}},n.event.special.moveend={setup:function(){C(this,"movestart.moveend",n.noop)},teardown:function(){T(this,"movestart.moveend",n.noop)}},C(document,"mousedown.move",function(e){var t,i;1!==(i=e).which||i.ctrlKey||i.altKey||(t={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:e.timeStamp},C(document,k.move,l,t),C(document,k.cancel,c,t))}),C(document,"touchstart.move",function(e){var t,i;S[e.target.tagName.toLowerCase()]||(i={target:(t=e.changedTouches[0]).target,startX:t.pageX,startY:t.pageY,timeStamp:e.timeStamp,identifier:t.identifier},C(document,A.move+"."+t.identifier,u,i),C(document,A.cancel+"."+t.identifier,h,i))}),"function"==typeof Array.prototype.indexOf&&function(e,t){for(var i=["changedTouches","targetTouches"],n=i.length;n--;)-1===e.event.props.indexOf(i[n])&&e.event.props.push(i[n])}(n)}),function(p){p.fn.twentytwenty=function(h){h=p.extend({default_offset_pct:.5,orientation:"horizontal"},h);return this.each(function(){var t=h.default_offset_pct,r=p(this),s=h.orientation,e="vertical"===s?"down":"left",i="vertical"===s?"up":"right";r.wrap("<div class='twentytwenty-wrapper twentytwenty-"+s+"'></div>"),r.append("<div class='twentytwenty-overlay'></div>");var l=r.find("img:first"),n=r.find("img:last");r.append("<div class='twentytwenty-handle'></div>");var c=r.find(".twentytwenty-handle");c.append("<span class='twentytwenty-"+e+"-arrow'></span>"),c.append("<span class='twentytwenty-"+i+"-arrow'></span>"),r.addClass("twentytwenty-container"),l.addClass("twentytwenty-before"),n.addClass("twentytwenty-after");var o=r.find(".twentytwenty-overlay");o.append("<div class='twentytwenty-before-label'></div>"),o.append("<div class='twentytwenty-after-label'></div>");var a=function(e){var t,i,n,o,a=(t=e,i=l.width(),n=l.height(),{w:i+"px",h:n+"px",cw:t*i+"px",ch:t*n+"px"});c.css("vertical"===s?"top":"left","vertical"===s?a.ch:a.cw),o=a,"vertical"===s?l.css("clip","rect(0,"+o.w+","+o.ch+",0)"):l.css("clip","rect(0,"+o.cw+","+o.h+",0)"),r.css("height",o.h)};p(window).on("resize.twentytwenty",function(e){a(t)});var d=0,u=0;c.on("movestart",function(e){(e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY)&&"vertical"!==s?e.preventDefault():(e.distX<e.distY&&e.distX<-e.distY||e.distX>e.distY&&e.distX>-e.distY)&&"vertical"===s&&e.preventDefault(),r.addClass("active"),d=r.offset().left,offsetY=r.offset().top,u=l.width(),imgHeight=l.height()}),c.on("moveend",function(e){r.removeClass("active")}),c.on("move",function(e){r.hasClass("active")&&((t="vertical"===s?(e.pageY-offsetY)/imgHeight:(e.pageX-d)/u)<0&&(t=0),1<t&&(t=1),a(t))}),r.on("mousemove",function(e){d=r.offset().left,offsetY=r.offset().top,u=l.width(),imgHeight=l.height(),r.addClass("active"),(t="vertical"===s?(e.pageY-offsetY)/imgHeight:(e.pageX-d)/u)<0&&(t=0),1<t&&(t=1),a(t)}),r.find("img").on("mousedown",function(e){e.preventDefault()}),p(window).trigger("resize.twentytwenty")})}}(jQuery),function(S){S.isScrollToFixed=function(e){return!!S(e).data("ScrollToFixed")},S.ScrollToFixed=function(e,t){function o(){var e=f.options.limit;return e?"function"==typeof e?e.apply(w):e:0}function a(){return"fixed"===g}function r(){return"absolute"===g}function s(){return!(a()||r())}function l(){a()||(T.css({display:w.css("display"),width:w.outerWidth(!0),height:w.outerHeight(!0),float:w.css("float")}),cssOptions={"z-index":f.options.zIndex,position:"fixed",top:-1==f.options.bottom?h():"",bottom:-1==f.options.bottom?"":f.options.bottom,"margin-left":"0px"},f.options.dontSetWidth||(cssOptions.width=w.width()),w.css(cssOptions),w.addClass(f.options.baseClassName),f.options.className&&w.addClass(f.options.className),g="fixed")}function c(){var e=o(),t=b;f.options.removeOffsets&&(t="",e-=y),cssOptions={position:"absolute",top:e,left:t,"margin-left":"0px",bottom:""},f.options.dontSetWidth||(cssOptions.width=w.width()),w.css(cssOptions),g="absolute"}function d(){s()||(C=-1,T.css("display","none"),w.css({"z-index":v,width:"",position:m,left:"",top:n,"margin-left":""}),w.removeClass("scroll-to-fixed-fixed"),f.options.className&&w.removeClass(f.options.className),g=null)}function u(e){e!=C&&(w.css("left",b-e),C=e)}function h(){var e=f.options.marginTop;return e?"function"==typeof e?e.apply(w):e:0}function i(){if(S.isScrollToFixed(w)){var e=_;_?s()&&(y=w.offset().top,b=w.offset().left):(w.trigger("preUnfixed.ScrollToFixed"),d(),w.trigger("unfixed.ScrollToFixed"),C=-1,y=w.offset().top,b=w.offset().left,f.options.offsets&&(b+=w.offset().left-w.position().left),-1==x&&(x=b),g=w.css("position"),_=!0,-1!=f.options.bottom&&(w.trigger("preFixed.ScrollToFixed"),l(),w.trigger("fixed.ScrollToFixed")));var t=S(window).scrollLeft(),i=S(window).scrollTop(),n=o();f.options.minWidth&&S(window).width()<f.options.minWidth?s()&&e||(p(),w.trigger("preUnfixed.ScrollToFixed"),d(),w.trigger("unfixed.ScrollToFixed")):f.options.maxWidth&&S(window).width()>f.options.maxWidth?s()&&e||(p(),w.trigger("preUnfixed.ScrollToFixed"),d(),w.trigger("unfixed.ScrollToFixed")):-1==f.options.bottom?0<n&&i>=n-h()?r()&&e||(p(),w.trigger("preAbsolute.ScrollToFixed"),c(),w.trigger("unfixed.ScrollToFixed")):i>=y-h()?(a()&&e||(p(),w.trigger("preFixed.ScrollToFixed"),l(),C=-1,w.trigger("fixed.ScrollToFixed")),u(t)):s()&&e||(p(),w.trigger("preUnfixed.ScrollToFixed"),d(),w.trigger("unfixed.ScrollToFixed")):0<n?i+S(window).height()-w.outerHeight(!0)>=n-(h()||-(f.options.bottom?f.options.bottom:0))?a()&&(p(),w.trigger("preUnfixed.ScrollToFixed"),"absolute"===m?c():d(),w.trigger("unfixed.ScrollToFixed")):(a()||(p(),w.trigger("preFixed.ScrollToFixed"),l()),u(t),w.trigger("fixed.ScrollToFixed")):u(t)}}function p(){var e=w.css("position");"absolute"==e?w.trigger("postAbsolute.ScrollToFixed"):"fixed"==e?w.trigger("postFixed.ScrollToFixed"):w.trigger("postUnfixed.ScrollToFixed")}var f=this;f.$el=S(e),f.el=e,f.$el.data("ScrollToFixed",f);var g,m,n,v,_=!1,w=f.$el,y=0,b=0,x=-1,C=-1,T=null,$=function(e){w.is(":visible")&&(_=!1,i())},E=function(e){window.requestAnimationFrame?requestAnimationFrame(i):i()};f.init=function(){f.options=S.extend({},S.ScrollToFixed.defaultOptions,t),v=w.css("z-index"),f.$el.css("z-index",f.options.zIndex),T=S("<div />"),g=w.css("position"),m=w.css("position"),n=w.css("top"),s()&&f.$el.after(T),S(window).bind("resize.ScrollToFixed",$),S(window).bind("scroll.ScrollToFixed",E),"ontouchmove"in window&&S(window).bind("touchmove.ScrollToFixed",i),f.options.preFixed&&w.bind("preFixed.ScrollToFixed",f.options.preFixed),f.options.postFixed&&w.bind("postFixed.ScrollToFixed",f.options.postFixed),f.options.preUnfixed&&w.bind("preUnfixed.ScrollToFixed",f.options.preUnfixed),f.options.postUnfixed&&w.bind("postUnfixed.ScrollToFixed",f.options.postUnfixed),f.options.preAbsolute&&w.bind("preAbsolute.ScrollToFixed",f.options.preAbsolute),f.options.postAbsolute&&w.bind("postAbsolute.ScrollToFixed",f.options.postAbsolute),f.options.fixed&&w.bind("fixed.ScrollToFixed",f.options.fixed),f.options.unfixed&&w.bind("unfixed.ScrollToFixed",f.options.unfixed),f.options.spacerClass&&T.addClass(f.options.spacerClass),w.bind("resize.ScrollToFixed",function(){T.height(w.height())}),w.bind("scroll.ScrollToFixed",function(){w.trigger("preUnfixed.ScrollToFixed"),d(),w.trigger("unfixed.ScrollToFixed"),i()}),w.bind("detach.ScrollToFixed",function(e){var t;(t=(t=e)||window.event).preventDefault&&t.preventDefault(),t.returnValue=!1,w.trigger("preUnfixed.ScrollToFixed"),d(),w.trigger("unfixed.ScrollToFixed"),S(window).unbind("resize.ScrollToFixed",$),S(window).unbind("scroll.ScrollToFixed",E),w.unbind(".ScrollToFixed"),T.remove(),f.$el.removeData("ScrollToFixed")}),$()},f.init()},S.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3,baseClassName:"scroll-to-fixed-fixed"},S.fn.scrollToFixed=function(e){return this.each(function(){new S.ScrollToFixed(this,e)})}}(jQuery),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(0,function(S){function t(e){this.$container,this.constraints=null,this.__$tooltip,this.__init(e)}function a(i,n){var o=!0;return S.each(i,function(e,t){return void 0===n[e]||i[e]!==n[e]?o=!1:void 0}),o}function d(e){var t=e.attr("id"),i=t?k.window.document.getElementById(t):null;return i?i===e[0]:S.contains(k.window.document.body,e[0])}var u={animation:"fade",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:null,plugins:["sideTip"],repositionOnScroll:!1,restoration:"none",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:"hover",triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:"rotate",zIndex:9999999},o="undefined"!=typeof window?window:null,k={hasTouchCapability:!(!o||!("ontouchstart"in o||o.DocumentTouch&&o.document instanceof o.DocumentTouch||o.navigator.maxTouchPoints)),hasTransitions:function(){if(!o)return!1;var e=(o.document.body||o.document.documentElement).style,t="transition",i=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof e[t])return!0;t=t.charAt(0).toUpperCase()+t.substr(1);for(var n=0;n<i.length;n++)if("string"==typeof e[i[n]+t])return!0;return!1}(),IE:!1,semVer:"4.2.6",window:o},e=function(){this.__$emitterPrivate=S({}),this.__$emitterPublic=S({}),this.__instancesLatestArr=[],this.__plugins={},this._env=k};e.prototype={__bridge:function(e,i,n){if(!i[n]){var t=function(){};t.prototype=e;var o=new t;o.__init&&o.__init(i),S.each(e,function(e,t){0!=e.indexOf("__")&&(i[e]?u.debug&&console.log("The "+e+" method of the "+n+" plugin conflicts with another plugin or native methods"):(i[e]=function(){return o[e].apply(o,Array.prototype.slice.apply(arguments))},i[e].bridged=o))}),i[n]=o}return this},__setWindow:function(e){return k.window=e,this},_getRuler:function(e){return new t(e)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_plugin:function(e){var t=this;if("string"==typeof e){var i=e,n=null;return 0<i.indexOf(".")?n=t.__plugins[i]:S.each(t.__plugins,function(e,t){return t.name.substring(t.name.length-i.length-1)=="."+i?(n=t,!1):void 0}),n}if(e.name.indexOf(".")<0)throw new Error("Plugins must be namespaced");return(t.__plugins[e.name]=e).core&&t.__bridge(e.core,t,e.name),this},_trigger:function(){var e=Array.prototype.slice.apply(arguments);return"string"==typeof e[0]&&(e[0]={type:e[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,e),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,e),this},instances:function(e){var n=[];return S(e||".tooltipstered").each(function(){var i=S(this),e=i.data("tooltipster-ns");e&&S.each(e,function(e,t){n.push(i.data(t))})}),n},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(e){return S((e?e+" ":"")+".tooltipstered").toArray()},setDefaults:function(e){return S.extend(u,e),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},S.tooltipster=new e,S.Tooltipster=function(e,t){this.__callbacks={close:[],open:[]},this.__closingTime,this.__Content,this.__contentBcr,this.__destroyed=!1,this.__$emitterPrivate=S({}),this.__$emitterPublic=S({}),this.__enabled=!0,this.__garbageCollector,this.__Geometry,this.__lastPosition,this.__namespace="tooltipster-"+Math.round(1e6*Math.random()),this.__options,this.__$originParents,this.__pointerIsOverOrigin=!1,this.__previousThemes=[],this.__state="closed",this.__timeouts={close:[],open:null},this.__touchEvents=[],this.__tracker=null,this._$origin,this._$tooltip,this.__init(e,t)},S.Tooltipster.prototype={__init:function(e,t){var i=this;if(i._$origin=S(e),i.__options=S.extend(!0,{},u,t),i.__optionsFormat(),!k.IE||k.IE>=i.__options.IEmin){var n=null;if(void 0===i._$origin.data("tooltipster-initialTitle")&&(void 0===(n=i._$origin.attr("title"))&&(n=null),i._$origin.data("tooltipster-initialTitle",n)),null!==i.__options.content)i.__contentSet(i.__options.content);else{var o,a=i._$origin.attr("data-tooltip-content");a&&(o=S(a)),o&&o[0]?i.__contentSet(o.first()):i.__contentSet(n)}i._$origin.removeAttr("title").addClass("tooltipstered"),i.__prepareOrigin(),i.__prepareGC(),S.each(i.__options.plugins,function(e,t){i._plug(t)}),k.hasTouchCapability&&S(k.window.document.body).on("touchmove."+i.__namespace+"-triggerOpen",function(e){i._touchRecordEvent(e)}),i._on("created",function(){i.__prepareTooltip()})._on("repositioned",function(e){i.__lastPosition=e.position})}else i.__options.disabled=!0},__contentInsert:function(){var e=this,t=e._$tooltip.find(".tooltipster-content"),i=e.__Content;return e._trigger({type:"format",content:e.__Content,format:function(e){i=e}}),e.__options.functionFormat&&(i=e.__options.functionFormat.call(e,e,{origin:e._$origin[0]},e.__Content)),"string"!=typeof i||e.__options.contentAsHTML?t.empty().append(i):t.text(i),e},__contentSet:function(e){return e instanceof S&&this.__options.contentCloning&&(e=e.clone(!0)),this.__Content=e,this._trigger({type:"updated",content:e}),this},__destroyError:function(){throw new Error("This tooltip has been destroyed and cannot execute your method call.")},__geometry:function(){var e=this,t=e._$origin,i=e._$origin.is("area");if(i){var n=e._$origin.parent().attr("name");t=S('img[usemap="#'+n+'"]')}var o=t[0].getBoundingClientRect(),a=S(k.window.document),r=S(k.window),s=t,l={available:{document:null,window:null},document:{size:{height:a.height(),width:a.width()}},window:{scroll:{left:k.window.scrollX||k.window.document.documentElement.scrollLeft,top:k.window.scrollY||k.window.document.documentElement.scrollTop},size:{height:r.height(),width:r.width()}},origin:{fixedLineage:!1,offset:{},size:{height:o.bottom-o.top,width:o.right-o.left},usemapImage:i?t[0]:null,windowOffset:{bottom:o.bottom,left:o.left,right:o.right,top:o.top}}};if(i){var c=e._$origin.attr("shape"),d=e._$origin.attr("coords");if(d&&(d=d.split(","),S.map(d,function(e,t){d[t]=parseInt(e)})),"default"!=c)switch(c){case"circle":var u=d[0],h=d[1],p=d[2],f=h-p,g=u-p;l.origin.size.height=2*p,l.origin.size.width=l.origin.size.height,l.origin.windowOffset.left+=g,l.origin.windowOffset.top+=f;break;case"rect":var m=d[0],v=d[1],_=d[2],w=d[3];l.origin.size.height=w-v,l.origin.size.width=_-m,l.origin.windowOffset.left+=m,l.origin.windowOffset.top+=v;break;case"poly":for(var y=0,b=0,x=0,C=0,T="even",$=0;$<d.length;$++){var E=d[$];"even"==T?(x<E&&(x=E,0===$&&(y=x)),E<y&&(y=E),T="odd"):(C<E&&(C=E,1==$&&(b=C)),E<b&&(b=E),T="even")}l.origin.size.height=C-b,l.origin.size.width=x-y,l.origin.windowOffset.left+=y,l.origin.windowOffset.top+=b}}for(e._trigger({type:"geometry",edit:function(e){l.origin.size.height=e.height,l.origin.windowOffset.left=e.left,l.origin.windowOffset.top=e.top,l.origin.size.width=e.width},geometry:{height:l.origin.size.height,left:l.origin.windowOffset.left,top:l.origin.windowOffset.top,width:l.origin.size.width}}),l.origin.windowOffset.right=l.origin.windowOffset.left+l.origin.size.width,l.origin.windowOffset.bottom=l.origin.windowOffset.top+l.origin.size.height,l.origin.offset.left=l.origin.windowOffset.left+l.window.scroll.left,l.origin.offset.top=l.origin.windowOffset.top+l.window.scroll.top,l.origin.offset.bottom=l.origin.offset.top+l.origin.size.height,l.origin.offset.right=l.origin.offset.left+l.origin.size.width,l.available.document={bottom:{height:l.document.size.height-l.origin.offset.bottom,width:l.document.size.width},left:{height:l.document.size.height,width:l.origin.offset.left},right:{height:l.document.size.height,width:l.document.size.width-l.origin.offset.right},top:{height:l.origin.offset.top,width:l.document.size.width}},l.available.window={bottom:{height:Math.max(l.window.size.height-Math.max(l.origin.windowOffset.bottom,0),0),width:l.window.size.width},left:{height:l.window.size.height,width:Math.max(l.origin.windowOffset.left,0)},right:{height:l.window.size.height,width:Math.max(l.window.size.width-Math.max(l.origin.windowOffset.right,0),0)},top:{height:Math.max(l.origin.windowOffset.top,0),width:l.window.size.width}};"html"!=s[0].tagName.toLowerCase();){if("fixed"==s.css("position")){l.origin.fixedLineage=!0;break}s=s.parent()}return l},__optionsFormat:function(){return"number"==typeof this.__options.animationDuration&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),"number"==typeof this.__options.delay&&(this.__options.delay=[this.__options.delay,this.__options.delay]),"number"==typeof this.__options.delayTouch&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),"string"==typeof this.__options.theme&&(this.__options.theme=[this.__options.theme]),null===this.__options.parent?this.__options.parent=S(k.window.document.body):"string"==typeof this.__options.parent&&(this.__options.parent=S(this.__options.parent)),"hover"==this.__options.trigger?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):"click"==this.__options.trigger&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger("options"),this},__prepareGC:function(){var e=this;return e.__options.selfDestruction?e.__garbageCollector=setInterval(function(){var i=(new Date).getTime();e.__touchEvents=S.grep(e.__touchEvents,function(e,t){return 6e4<i-e.time}),d(e._$origin)||e.close(function(){e.destroy()})},2e4):clearInterval(e.__garbageCollector),e},__prepareOrigin:function(){var t=this;if(t._$origin.off("."+t.__namespace+"-triggerOpen"),k.hasTouchCapability&&t._$origin.on("touchstart."+t.__namespace+"-triggerOpen touchend."+t.__namespace+"-triggerOpen touchcancel."+t.__namespace+"-triggerOpen",function(e){t._touchRecordEvent(e)}),t.__options.triggerOpen.click||t.__options.triggerOpen.tap&&k.hasTouchCapability){var e="";t.__options.triggerOpen.click&&(e+="click."+t.__namespace+"-triggerOpen "),t.__options.triggerOpen.tap&&k.hasTouchCapability&&(e+="touchend."+t.__namespace+"-triggerOpen"),t._$origin.on(e,function(e){t._touchIsMeaningfulEvent(e)&&t._open(e)})}if(t.__options.triggerOpen.mouseenter||t.__options.triggerOpen.touchstart&&k.hasTouchCapability){e="";t.__options.triggerOpen.mouseenter&&(e+="mouseenter."+t.__namespace+"-triggerOpen "),t.__options.triggerOpen.touchstart&&k.hasTouchCapability&&(e+="touchstart."+t.__namespace+"-triggerOpen"),t._$origin.on(e,function(e){!t._touchIsTouchEvent(e)&&t._touchIsEmulatedEvent(e)||(t.__pointerIsOverOrigin=!0,t._openShortly(e))})}if(t.__options.triggerClose.mouseleave||t.__options.triggerClose.touchleave&&k.hasTouchCapability){e="";t.__options.triggerClose.mouseleave&&(e+="mouseleave."+t.__namespace+"-triggerOpen "),t.__options.triggerClose.touchleave&&k.hasTouchCapability&&(e+="touchend."+t.__namespace+"-triggerOpen touchcancel."+t.__namespace+"-triggerOpen"),t._$origin.on(e,function(e){t._touchIsMeaningfulEvent(e)&&(t.__pointerIsOverOrigin=!1)})}return t},__prepareTooltip:function(){var i=this,e=i.__options.interactive?"auto":"";return i._$tooltip.attr("id",i.__namespace).css({"pointer-events":e,zIndex:i.__options.zIndex}),S.each(i.__previousThemes,function(e,t){i._$tooltip.removeClass(t)}),S.each(i.__options.theme,function(e,t){i._$tooltip.addClass(t)}),i.__previousThemes=S.merge([],i.__options.theme),i},__scrollHandler:function(e){var t=this;if(t.__options.triggerClose.scroll)t._close(e);else if(d(t._$origin)&&d(t._$tooltip)){var r=null;if(e.target===k.window.document)t.__Geometry.origin.fixedLineage||t.__options.repositionOnScroll&&t.reposition(e);else{r=t.__geometry();var s=!1;if("fixed"!=t._$origin.css("position")&&t.__$originParents.each(function(e,t){var i=S(t),n=i.css("overflow-x"),o=i.css("overflow-y");if("visible"!=n||"visible"!=o){var a=t.getBoundingClientRect();if("visible"!=n&&(r.origin.windowOffset.left<a.left||r.origin.windowOffset.right>a.right))return!(s=!0);if("visible"!=o&&(r.origin.windowOffset.top<a.top||r.origin.windowOffset.bottom>a.bottom))return!(s=!0)}return"fixed"!=i.css("position")&&void 0}),s)t._$tooltip.css("visibility","hidden");else if(t._$tooltip.css("visibility","visible"),t.__options.repositionOnScroll)t.reposition(e);else{var i=r.origin.offset.left-t.__Geometry.origin.offset.left,n=r.origin.offset.top-t.__Geometry.origin.offset.top;t._$tooltip.css({left:t.__lastPosition.coord.left+i,top:t.__lastPosition.coord.top+n})}}t._trigger({type:"scroll",event:e,geo:r})}return t},__stateSet:function(e){return this.__state=e,this._trigger({type:"state",state:e}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,S.each(this.__timeouts.close,function(e,t){clearTimeout(t)}),this.__timeouts.close=[],this},__trackerStart:function(){var n=this,o=n._$tooltip.find(".tooltipster-content");return n.__options.trackTooltip&&(n.__contentBcr=o[0].getBoundingClientRect()),n.__tracker=setInterval(function(){if(d(n._$origin)&&d(n._$tooltip)){if(n.__options.trackOrigin){var e=n.__geometry(),t=!1;a(e.origin.size,n.__Geometry.origin.size)&&(n.__Geometry.origin.fixedLineage?a(e.origin.windowOffset,n.__Geometry.origin.windowOffset)&&(t=!0):a(e.origin.offset,n.__Geometry.origin.offset)&&(t=!0)),t||(n.__options.triggerClose.mouseleave?n._close():n.reposition())}if(n.__options.trackTooltip){var i=o[0].getBoundingClientRect();i.height===n.__contentBcr.height&&i.width===n.__contentBcr.width||(n.reposition(),n.__contentBcr=i)}}else n._close()},n.__options.trackerInterval),n},_close:function(i,e,t){var n=this,o=!0;if(n._trigger({type:"close",event:i,stop:function(){o=!1}}),o||t){e&&n.__callbacks.close.push(e),n.__callbacks.open=[],n.__timeoutsClear();var a=function(){S.each(n.__callbacks.close,function(e,t){t.call(n,n,{event:i,origin:n._$origin[0]})}),n.__callbacks.close=[]};if("closed"!=n.__state){var r=!0,s=(new Date).getTime()+n.__options.animationDuration[1];if("disappearing"==n.__state&&s>n.__closingTime&&0<n.__options.animationDuration[1]&&(r=!1),r){n.__closingTime=s,"disappearing"!=n.__state&&n.__stateSet("disappearing");var l=function(){clearInterval(n.__tracker),n._trigger({type:"closing",event:i}),n._$tooltip.off("."+n.__namespace+"-triggerClose").removeClass("tooltipster-dying"),S(k.window).off("."+n.__namespace+"-triggerClose"),n.__$originParents.each(function(e,t){S(t).off("scroll."+n.__namespace+"-triggerClose")}),n.__$originParents=null,S(k.window.document.body).off("."+n.__namespace+"-triggerClose"),n._$origin.off("."+n.__namespace+"-triggerClose"),n._off("dismissable"),n.__stateSet("closed"),n._trigger({type:"after",event:i}),n.__options.functionAfter&&n.__options.functionAfter.call(n,n,{event:i,origin:n._$origin[0]}),a()};k.hasTransitions?(n._$tooltip.css({"-moz-animation-duration":n.__options.animationDuration[1]+"ms","-ms-animation-duration":n.__options.animationDuration[1]+"ms","-o-animation-duration":n.__options.animationDuration[1]+"ms","-webkit-animation-duration":n.__options.animationDuration[1]+"ms","animation-duration":n.__options.animationDuration[1]+"ms","transition-duration":n.__options.animationDuration[1]+"ms"}),n._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"),0<n.__options.animationDuration[1]&&n._$tooltip.delay(n.__options.animationDuration[1]),n._$tooltip.queue(l)):n._$tooltip.stop().fadeOut(n.__options.animationDuration[1],l)}}else a()}return n},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(e,t){var i=this;if(!i.__destroying&&d(i._$origin)&&i.__enabled){var n=!0;if("closed"==i.__state&&(i._trigger({type:"before",event:e,stop:function(){n=!1}}),n&&i.__options.functionBefore&&(n=i.__options.functionBefore.call(i,i,{event:e,origin:i._$origin[0]}))),!1!==n&&null!==i.__Content){t&&i.__callbacks.open.push(t),i.__callbacks.close=[],i.__timeoutsClear();var o,a=function(){"stable"!=i.__state&&i.__stateSet("stable"),S.each(i.__callbacks.open,function(e,t){t.call(i,i,{origin:i._$origin[0],tooltip:i._$tooltip[0]})}),i.__callbacks.open=[]};if("closed"!==i.__state)o=0,"disappearing"===i.__state?(i.__stateSet("appearing"),k.hasTransitions?(i._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"),0<i.__options.animationDuration[0]&&i._$tooltip.delay(i.__options.animationDuration[0]),i._$tooltip.queue(a)):i._$tooltip.stop().fadeIn(a)):"stable"==i.__state&&a();else{if(i.__stateSet("appearing"),o=i.__options.animationDuration[0],i.__contentInsert(),i.reposition(e,!0),k.hasTransitions?(i._$tooltip.addClass("tooltipster-"+i.__options.animation).addClass("tooltipster-initial").css({"-moz-animation-duration":i.__options.animationDuration[0]+"ms","-ms-animation-duration":i.__options.animationDuration[0]+"ms","-o-animation-duration":i.__options.animationDuration[0]+"ms","-webkit-animation-duration":i.__options.animationDuration[0]+"ms","animation-duration":i.__options.animationDuration[0]+"ms","transition-duration":i.__options.animationDuration[0]+"ms"}),setTimeout(function(){"closed"!=i.__state&&(i._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"),0<i.__options.animationDuration[0]&&i._$tooltip.delay(i.__options.animationDuration[0]),i._$tooltip.queue(a))},0)):i._$tooltip.css("display","none").fadeIn(i.__options.animationDuration[0],a),i.__trackerStart(),S(k.window).on("resize."+i.__namespace+"-triggerClose",function(e){var t=S(document.activeElement);(t.is("input")||t.is("textarea"))&&S.contains(i._$tooltip[0],t[0])||i.reposition(e)}).on("scroll."+i.__namespace+"-triggerClose",function(e){i.__scrollHandler(e)}),i.__$originParents=i._$origin.parents(),i.__$originParents.each(function(e,t){S(t).on("scroll."+i.__namespace+"-triggerClose",function(e){i.__scrollHandler(e)})}),i.__options.triggerClose.mouseleave||i.__options.triggerClose.touchleave&&k.hasTouchCapability){i._on("dismissable",function(e){e.dismissable?e.delay?(c=setTimeout(function(){i._close(e.event)},e.delay),i.__timeouts.close.push(c)):i._close(e):clearTimeout(c)});var r=i._$origin,s="",l="",c=null;i.__options.interactive&&(r=r.add(i._$tooltip)),i.__options.triggerClose.mouseleave&&(s+="mouseenter."+i.__namespace+"-triggerClose ",l+="mouseleave."+i.__namespace+"-triggerClose "),i.__options.triggerClose.touchleave&&k.hasTouchCapability&&(s+="touchstart."+i.__namespace+"-triggerClose",l+="touchend."+i.__namespace+"-triggerClose touchcancel."+i.__namespace+"-triggerClose"),r.on(l,function(e){if(i._touchIsTouchEvent(e)||!i._touchIsEmulatedEvent(e)){var t="mouseleave"==e.type?i.__options.delay:i.__options.delayTouch;i._trigger({delay:t[1],dismissable:!0,event:e,type:"dismissable"})}}).on(s,function(e){!i._touchIsTouchEvent(e)&&i._touchIsEmulatedEvent(e)||i._trigger({dismissable:!1,event:e,type:"dismissable"})})}i.__options.triggerClose.originClick&&i._$origin.on("click."+i.__namespace+"-triggerClose",function(e){i._touchIsTouchEvent(e)||i._touchIsEmulatedEvent(e)||i._close(e)}),(i.__options.triggerClose.click||i.__options.triggerClose.tap&&k.hasTouchCapability)&&setTimeout(function(){if("closed"!=i.__state){var e="",t=S(k.window.document.body);i.__options.triggerClose.click&&(e+="click."+i.__namespace+"-triggerClose "),i.__options.triggerClose.tap&&k.hasTouchCapability&&(e+="touchend."+i.__namespace+"-triggerClose"),t.on(e,function(e){i._touchIsMeaningfulEvent(e)&&(i._touchRecordEvent(e),i.__options.interactive&&S.contains(i._$tooltip[0],e.target)||i._close(e))}),i.__options.triggerClose.tap&&k.hasTouchCapability&&t.on("touchstart."+i.__namespace+"-triggerClose",function(e){i._touchRecordEvent(e)})}},0),i._trigger("ready"),i.__options.functionReady&&i.__options.functionReady.call(i,i,{origin:i._$origin[0],tooltip:i._$tooltip[0]})}if(0<i.__options.timer){c=setTimeout(function(){i._close()},i.__options.timer+o);i.__timeouts.close.push(c)}}}return i},_openShortly:function(e){var t=this,i=!0;if("stable"!=t.__state&&"appearing"!=t.__state&&!t.__timeouts.open&&(t._trigger({type:"start",event:e,stop:function(){i=!1}}),i)){var n=0==e.type.indexOf("touch")?t.__options.delayTouch:t.__options.delay;n[0]?t.__timeouts.open=setTimeout(function(){t.__timeouts.open=null,t.__pointerIsOverOrigin&&t._touchIsMeaningfulEvent(e)?(t._trigger("startend"),t._open(e)):t._trigger("startcancel")},n[0]):(t._trigger("startend"),t._open(e))}return t},_optionsExtract:function(e,t){var n=this,i=S.extend(!0,{},t),o=n.__options[e];return o||(o={},S.each(t,function(e,t){var i=n.__options[e];void 0!==i&&(o[e]=i)})),S.each(i,function(e,t){void 0!==o[e]&&("object"!=typeof t||t instanceof Array||null==t||"object"!=typeof o[e]||o[e]instanceof Array||null==o[e]?i[e]=o[e]:S.extend(i[e],o[e]))}),i},_plug:function(e){var t=S.tooltipster._plugin(e);if(!t)throw new Error('The "'+e+'" plugin is not defined');return t.instance&&S.tooltipster.__bridge(t.instance,this,t.name),this},_touchIsEmulatedEvent:function(e){for(var t=!1,i=(new Date).getTime(),n=this.__touchEvents.length-1;0<=n;n--){var o=this.__touchEvents[n];if(!(i-o.time<500))break;o.target===e.target&&(t=!0)}return t},_touchIsMeaningfulEvent:function(e){return this._touchIsTouchEvent(e)&&!this._touchSwiped(e.target)||!this._touchIsTouchEvent(e)&&!this._touchIsEmulatedEvent(e)},_touchIsTouchEvent:function(e){return 0==e.type.indexOf("touch")},_touchRecordEvent:function(e){return this._touchIsTouchEvent(e)&&(e.time=(new Date).getTime(),this.__touchEvents.push(e)),this},_touchSwiped:function(e){for(var t=!1,i=this.__touchEvents.length-1;0<=i;i--){var n=this.__touchEvents[i];if("touchmove"==n.type){t=!0;break}if("touchstart"==n.type&&e===n.target)break}return t},_trigger:function(){var e=Array.prototype.slice.apply(arguments);return"string"==typeof e[0]&&(e[0]={type:e[0]}),e[0].instance=this,e[0].origin=this._$origin?this._$origin[0]:null,e[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,e),S.tooltipster._trigger.apply(S.tooltipster,e),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,e),this},_unplug:function(i){var n=this;if(n[i]){var e=S.tooltipster._plugin(i);e.instance&&S.each(e.instance,function(e,t){n[e]&&n[e].bridged===n[i]&&delete n[e]}),n[i].__destroy&&n[i].__destroy(),delete n[i]}return n},close:function(e){return this.__destroyed?this.__destroyError():this._close(null,e),this},content:function(e){var t=this;if(void 0===e)return t.__Content;if(t.__destroyed)t.__destroyError();else if(t.__contentSet(e),null!==t.__Content){if("closed"!==t.__state&&(t.__contentInsert(),t.reposition(),t.__options.updateAnimation))if(k.hasTransitions){var i=t.__options.updateAnimation;t._$tooltip.addClass("tooltipster-update-"+i),setTimeout(function(){"closed"!=t.__state&&t._$tooltip.removeClass("tooltipster-update-"+i)},1e3)}else t._$tooltip.fadeTo(200,.5,function(){"closed"!=t.__state&&t._$tooltip.fadeTo(200,1)})}else t._close();return t},destroy:function(){var i=this;if(i.__destroyed)i.__destroyError();else{"closed"!=i.__state?i.option("animationDuration",0)._close(null,null,!0):i.__timeoutsClear(),i._trigger("destroy"),i.__destroyed=!0,i._$origin.removeData(i.__namespace).off("."+i.__namespace+"-triggerOpen"),S(k.window.document.body).off("."+i.__namespace+"-triggerOpen");var e=i._$origin.data("tooltipster-ns");if(e)if(1===e.length){var t=null;"previous"==i.__options.restoration?t=i._$origin.data("tooltipster-initialTitle"):"current"==i.__options.restoration&&(t="string"==typeof i.__Content?i.__Content:S("<div></div>").append(i.__Content).html()),t&&i._$origin.attr("title",t),i._$origin.removeClass("tooltipstered"),i._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else e=S.grep(e,function(e,t){return e!==i.__namespace}),i._$origin.data("tooltipster-ns",e);i._trigger("destroyed"),i._off(),i.off(),i.__Content=null,i.__$emitterPrivate=null,i.__$emitterPublic=null,i.__options.parent=null,i._$origin=null,i._$tooltip=null,S.tooltipster.__instancesLatestArr=S.grep(S.tooltipster.__instancesLatestArr,function(e,t){return i!==e}),clearInterval(i.__garbageCollector)}return i},disable:function(){return this.__destroyed?this.__destroyError():(this._close(),this.__enabled=!1),this},elementOrigin:function(){return this.__destroyed?void this.__destroyError():this._$origin[0]},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(e){return this.close(e)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(e){return this.__destroyed?this.__destroyError():this._open(null,e),this},option:function(e,t){return void 0===t?this.__options[e]:(this.__destroyed?this.__destroyError():(this.__options[e]=t,this.__optionsFormat(),0<=S.inArray(e,["trigger","triggerClose","triggerOpen"])&&this.__prepareOrigin(),"selfDestruction"===e&&this.__prepareGC()),this)},reposition:function(e,t){var i=this;return i.__destroyed?i.__destroyError():"closed"!=i.__state&&d(i._$origin)&&(t||d(i._$tooltip))&&(t||i._$tooltip.detach(),i.__Geometry=i.__geometry(),i._trigger({type:"reposition",event:e,helper:{geo:i.__Geometry}})),i},show:function(e){return this.open(e)},status:function(){return{destroyed:this.__destroyed,enabled:this.__enabled,open:"closed"!==this.__state,state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},S.fn.tooltipster=function(){var o=Array.prototype.slice.apply(arguments),n="You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.";if(0===this.length)return this;if("string"==typeof o[0]){var a="#*$~&";return this.each(function(){var e=S(this).data("tooltipster-ns"),t=e?S(this).data(e[0]):null;if(!t)throw new Error("You called Tooltipster's \""+o[0]+'" method on an uninitialized element');if("function"!=typeof t[o[0]])throw new Error('Unknown method "'+o[0]+'"');1<this.length&&"content"==o[0]&&(o[1]instanceof S||"object"==typeof o[1]&&null!=o[1]&&o[1].tagName)&&!t.__options.contentCloning&&t.__options.debug&&console.log(n);var i=t[o[0]](o[1],o[2]);return i!==t||"instance"===o[0]?(a=i,!1):void 0}),"#*$~&"!==a?a:this}S.tooltipster.__instancesLatestArr=[];var e=o[0]&&void 0!==o[0].multiple,r=e&&o[0].multiple||!e&&u.multiple,t=o[0]&&void 0!==o[0].content,i=t&&o[0].content||!t&&u.content,s=o[0]&&void 0!==o[0].contentCloning,l=s&&o[0].contentCloning||!s&&u.contentCloning,c=o[0]&&void 0!==o[0].debug,d=c&&o[0].debug||!c&&u.debug;return 1<this.length&&(i instanceof S||"object"==typeof i&&null!=i&&i.tagName)&&!l&&d&&console.log(n),this.each(function(){var e=!1,t=S(this),i=t.data("tooltipster-ns"),n=null;i?r?e=!0:d&&(console.log("Tooltipster: one or more tooltips are already attached to the element below. Ignoring."),console.log(this)):e=!0,e&&(n=new S.Tooltipster(this,o[0]),i||(i=[]),i.push(n.__namespace),t.data("tooltipster-ns",i),t.data(n.__namespace,n),n.__options.functionInit&&n.__options.functionInit.call(n,n,{origin:this}),n._trigger("init")),S.tooltipster.__instancesLatestArr.push(n)}),this},t.prototype={__init:function(e){this.__$tooltip=e,this.__$tooltip.css({left:0,overflow:"hidden",position:"absolute",top:0}).find(".tooltipster-content").css("overflow","auto"),this.$container=S('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo(k.window.document.body)},__forceRedraw:function(){var e=this.__$tooltip.parent();this.__$tooltip.detach(),this.__$tooltip.appendTo(e)},constrain:function(e,t){return this.constraints={width:e,height:t},this.__$tooltip.css({display:"block",height:"",overflow:"auto",width:e}),this},destroy:function(){this.__$tooltip.detach().find(".tooltipster-content").css({display:"",overflow:""}),this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:"",height:"",overflow:"visible",width:""}),this},measure:function(){this.__forceRedraw();var e=this.__$tooltip[0].getBoundingClientRect(),t={size:{height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}};if(this.constraints){var i=this.__$tooltip.find(".tooltipster-content"),n=this.__$tooltip.outerHeight(),o=i[0].getBoundingClientRect(),a={height:n<=this.constraints.height,width:e.width<=this.constraints.width&&o.width>=i[0].scrollWidth-1};t.fits=a.height&&a.width}return k.IE&&k.IE<=11&&t.size.width!==k.window.document.documentElement.clientWidth&&(t.size.width=Math.ceil(t.size.width)+1),t}};var i=navigator.userAgent.toLowerCase();-1!=i.indexOf("msie")?k.IE=parseInt(i.split("msie")[1]):-1!==i.toLowerCase().indexOf("trident")&&-1!==i.indexOf(" rv:11")?k.IE=11:-1!=i.toLowerCase().indexOf("edge/")&&(k.IE=parseInt(i.toLowerCase().split("edge/")[1]));var n="tooltipster.sideTip";return S.tooltipster._plugin({name:n,instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:"top",viewportAware:!0}},__init:function(e){var t=this;t.__instance=e,t.__namespace="tooltipster-sideTip-"+Math.round(1e6*Math.random()),t.__previousState="closed",t.__options,t.__optionsFormat(),t.__instance._on("state."+t.__namespace,function(e){"closed"==e.state?t.__close():"appearing"==e.state&&"closed"==t.__previousState&&t.__create(),t.__previousState=e.state}),t.__instance._on("options."+t.__namespace,function(){t.__optionsFormat()}),t.__instance._on("reposition."+t.__namespace,function(e){t.__reposition(e.event,e.helper)})},__close:function(){this.__instance.content()instanceof S&&this.__instance.content().detach(),this.__instance._$tooltip.remove(),this.__instance._$tooltip=null},__create:function(){var e=S('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"></div></div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"></div><div class="tooltipster-arrow-background"></div></div></div></div>');this.__options.arrow||e.find(".tooltipster-box").css("margin",0).end().find(".tooltipster-arrow").hide(),this.__options.minWidth&&e.css("min-width",this.__options.minWidth+"px"),this.__options.maxWidth&&e.css("max-width",this.__options.maxWidth+"px"),this.__instance._$tooltip=e,this.__instance._trigger("created")},__destroy:function(){this.__instance._off("."+self.__namespace)},__optionsFormat:function(){var e=this;if(e.__options=e.__instance._optionsExtract(n,e.__defaults()),e.__options.position&&(e.__options.side=e.__options.position),"object"!=typeof e.__options.distance&&(e.__options.distance=[e.__options.distance]),e.__options.distance.length<4&&(void 0===e.__options.distance[1]&&(e.__options.distance[1]=e.__options.distance[0]),void 0===e.__options.distance[2]&&(e.__options.distance[2]=e.__options.distance[0]),void 0===e.__options.distance[3]&&(e.__options.distance[3]=e.__options.distance[1]),e.__options.distance={top:e.__options.distance[0],right:e.__options.distance[1],bottom:e.__options.distance[2],left:e.__options.distance[3]}),"string"==typeof e.__options.side){e.__options.side=[e.__options.side,{top:"bottom",right:"left",bottom:"top",left:"right"}[e.__options.side]],"left"==e.__options.side[0]||"right"==e.__options.side[0]?e.__options.side.push("top","bottom"):e.__options.side.push("right","left")}6===S.tooltipster._env.IE&&!0!==e.__options.arrow&&(e.__options.arrow=!1)},__reposition:function(l,c){var t,d=this,u=d.__targetFind(c),h=[];d.__instance._$tooltip.detach();var i=d.__instance._$tooltip.clone(),p=S.tooltipster._getRuler(i),f=!1,e=d.__instance.option("animation");switch(e&&i.removeClass("tooltipster-"+e),S.each(["window","document"],function(e,o){var a=null;if(d.__instance._trigger({container:o,helper:c,satisfied:f,takeTest:function(e){a=e},results:h,type:"positionTest"}),1==a||0!=a&&0==f&&("window"!=o||d.__options.viewportAware))for(e=0;e<d.__options.side.length;e++){var r={horizontal:0,vertical:0},s=d.__options.side[e];"top"==s||"bottom"==s?r.vertical=d.__options.distance[s]:r.horizontal=d.__options.distance[s],d.__sideChange(i,s),S.each(["natural","constrained"],function(e,t){if(a=null,d.__instance._trigger({container:o,event:l,helper:c,mode:t,results:h,satisfied:f,side:s,takeTest:function(e){a=e},type:"positionTest"}),1==a||0!=a&&0==f){var i={container:o,distance:r,fits:null,mode:t,outerSize:null,side:s,size:null,target:u[s],whole:null},n=("natural"==t?p.free():p.constrain(c.geo.available[o][s].width-r.horizontal,c.geo.available[o][s].height-r.vertical)).measure();if(i.size=n.size,i.outerSize={height:n.size.height+r.vertical,width:n.size.width+r.horizontal},"natural"==t?c.geo.available[o][s].width>=i.outerSize.width&&c.geo.available[o][s].height>=i.outerSize.height?i.fits=!0:i.fits=!1:i.fits=n.fits,"window"==o&&(i.fits?i.whole="top"==s||"bottom"==s?c.geo.origin.windowOffset.right>=d.__options.minIntersection&&c.geo.window.size.width-c.geo.origin.windowOffset.left>=d.__options.minIntersection:c.geo.origin.windowOffset.bottom>=d.__options.minIntersection&&c.geo.window.size.height-c.geo.origin.windowOffset.top>=d.__options.minIntersection:i.whole=!1),h.push(i),i.whole)f=!0;else if("natural"==i.mode&&(i.fits||i.size.width<=c.geo.available[o][s].width))return!1}})}}),d.__instance._trigger({edit:function(e){h=e},event:l,helper:c,results:h,type:"positionTested"}),h.sort(function(e,t){return e.whole&&!t.whole?-1:!e.whole&&t.whole?1:e.whole&&t.whole?(i=d.__options.side.indexOf(e.side))<(n=d.__options.side.indexOf(t.side))?-1:n<i?1:"natural"==e.mode?-1:1:e.fits&&!t.fits?-1:!e.fits&&t.fits?1:e.fits&&t.fits?(i=d.__options.side.indexOf(e.side))<(n=d.__options.side.indexOf(t.side))?-1:n<i?1:"natural"==e.mode?-1:1:"document"==e.container&&"bottom"==e.side&&"natural"==e.mode?-1:1;var i,n}),(t=h[0]).coord={},t.side){case"left":case"right":t.coord.top=Math.floor(t.target-t.size.height/2);break;case"bottom":case"top":t.coord.left=Math.floor(t.target-t.size.width/2)}switch(t.side){case"left":t.coord.left=c.geo.origin.windowOffset.left-t.outerSize.width;break;case"right":t.coord.left=c.geo.origin.windowOffset.right+t.distance.horizontal;break;case"top":t.coord.top=c.geo.origin.windowOffset.top-t.outerSize.height;break;case"bottom":t.coord.top=c.geo.origin.windowOffset.bottom+t.distance.vertical}"window"==t.container?"top"==t.side||"bottom"==t.side?t.coord.left<0?0<=c.geo.origin.windowOffset.right-this.__options.minIntersection?t.coord.left=0:t.coord.left=c.geo.origin.windowOffset.right-this.__options.minIntersection-1:t.coord.left>c.geo.window.size.width-t.size.width&&(c.geo.origin.windowOffset.left+this.__options.minIntersection<=c.geo.window.size.width?t.coord.left=c.geo.window.size.width-t.size.width:t.coord.left=c.geo.origin.windowOffset.left+this.__options.minIntersection+1-t.size.width):t.coord.top<0?0<=c.geo.origin.windowOffset.bottom-this.__options.minIntersection?t.coord.top=0:t.coord.top=c.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:t.coord.top>c.geo.window.size.height-t.size.height&&(c.geo.origin.windowOffset.top+this.__options.minIntersection<=c.geo.window.size.height?t.coord.top=c.geo.window.size.height-t.size.height:t.coord.top=c.geo.origin.windowOffset.top+this.__options.minIntersection+1-t.size.height):(t.coord.left>c.geo.window.size.width-t.size.width&&(t.coord.left=c.geo.window.size.width-t.size.width),t.coord.left<0&&(t.coord.left=0)),d.__sideChange(i,t.side),c.tooltipClone=i[0],c.tooltipParent=d.__instance.option("parent").parent[0],c.mode=t.mode,c.whole=t.whole,c.origin=d.__instance._$origin[0],c.tooltip=d.__instance._$tooltip[0],delete t.container,delete t.fits,delete t.mode,delete t.outerSize,delete t.whole,t.distance=t.distance.horizontal||t.distance.vertical;var n,o,a,r=S.extend(!0,{},t);if(d.__instance._trigger({edit:function(e){t=e},event:l,helper:c,position:r,type:"position"}),d.__options.functionPosition){var s=d.__options.functionPosition.call(d,d.__instance,c,r);s&&(t=s)}p.destroy(),"top"==t.side||"bottom"==t.side?(n={prop:"left",val:t.target-t.coord.left},o=t.size.width-this.__options.minIntersection):(n={prop:"top",val:t.target-t.coord.top},o=t.size.height-this.__options.minIntersection),n.val<this.__options.minIntersection?n.val=this.__options.minIntersection:n.val>o&&(n.val=o),a=c.geo.origin.fixedLineage?c.geo.origin.windowOffset:{left:c.geo.origin.windowOffset.left+c.geo.window.scroll.left,top:c.geo.origin.windowOffset.top+c.geo.window.scroll.top},t.coord={left:a.left+(t.coord.left-c.geo.origin.windowOffset.left),top:a.top+(t.coord.top-c.geo.origin.windowOffset.top)},d.__sideChange(d.__instance._$tooltip,t.side),c.geo.origin.fixedLineage?d.__instance._$tooltip.css("position","fixed"):d.__instance._$tooltip.css("position",""),d.__instance._$tooltip.css({left:t.coord.left,top:t.coord.top,height:t.size.height,width:t.size.width}).find(".tooltipster-arrow").css({left:"",top:""}).css(n.prop,n.val),d.__instance._$tooltip.appendTo(d.__instance.option("parent")),d.__instance._trigger({type:"repositioned",event:l,position:t})},__sideChange:function(e,t){e.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-"+t)},__targetFind:function(e){var t={},i=this.__instance._$origin[0].getClientRects();1<i.length&&(1==this.__instance._$origin.css("opacity")&&(this.__instance._$origin.css("opacity",.99),i=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css("opacity",1)));if(i.length<2)t.top=Math.floor(e.geo.origin.windowOffset.left+e.geo.origin.size.width/2),t.bottom=t.top,t.left=Math.floor(e.geo.origin.windowOffset.top+e.geo.origin.size.height/2),t.right=t.left;else{var n=i[0];t.top=Math.floor(n.left+(n.right-n.left)/2),n=2<i.length?i[Math.ceil(i.length/2)-1]:i[0],t.right=Math.floor(n.top+(n.bottom-n.top)/2),n=i[i.length-1],t.bottom=Math.floor(n.left+(n.right-n.left)/2),n=2<i.length?i[Math.ceil((i.length+1)/2)-1]:i[i.length-1],t.left=Math.floor(n.top+(n.bottom-n.top)/2)}return t}}}),S}),function(){"use strict";function t(e){if(!e)throw new Error("No options passed to Waypoint constructor");if(!e.element)throw new Error("No element option passed to Waypoint constructor");if(!e.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+i,this.options=t.Adapter.extend({},t.defaults,e),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=e.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),a[this.key]=this,i+=1}var i=0,a={};t.prototype.queueTrigger=function(e){this.group.queueTrigger(this,e)},t.prototype.trigger=function(e){this.enabled&&this.callback&&this.callback.apply(this,e)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete a[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(e){var t=[];for(var i in a)t.push(a[i]);for(var n=0,o=t.length;n<o;n++)t[n][e]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(e){window.setTimeout(e,1e3/60)}function i(e){this.element=e,this.Adapter=m.Adapter,this.adapter=new this.Adapter(e),this.key="waypoint-context-"+n,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},e.waypointContextKey=this.key,o[e.waypointContextKey]=this,n+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var n=0,o={},m=window.Waypoint,e=window.onload;i.prototype.add=function(e){var t=e.options.horizontal?"horizontal":"vertical";this.waypoints[t][e.key]=e,this.refresh()},i.prototype.checkEmpty=function(){var e=this.Adapter.isEmptyObject(this.waypoints.horizontal),t=this.Adapter.isEmptyObject(this.waypoints.vertical);e&&t&&(this.adapter.off(".waypoints"),delete o[this.key])},i.prototype.createThrottledResizeHandler=function(){function e(){t.handleResize(),t.didResize=!1}var t=this;this.adapter.on("resize.waypoints",function(){t.didResize||(t.didResize=!0,m.requestAnimationFrame(e))})},i.prototype.createThrottledScrollHandler=function(){function e(){t.handleScroll(),t.didScroll=!1}var t=this;this.adapter.on("scroll.waypoints",function(){t.didScroll&&!m.isTouch||(t.didScroll=!0,m.requestAnimationFrame(e))})},i.prototype.handleResize=function(){m.Context.refreshAll()},i.prototype.handleScroll=function(){var e={},t={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in t){var n=t[i],o=n.newScroll>n.oldScroll?n.forward:n.backward;for(var a in this.waypoints[i]){var r=this.waypoints[i][a],s=n.oldScroll<r.triggerPoint,l=n.newScroll>=r.triggerPoint;(s&&l||!s&&!l)&&(r.queueTrigger(o),e[r.group.id]=r.group)}}for(var c in e)e[c].flushTriggers();this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},i.prototype.innerHeight=function(){return this.element==this.element.window?m.viewportHeight():this.adapter.innerHeight()},i.prototype.remove=function(e){delete this.waypoints[e.axis][e.key],this.checkEmpty()},i.prototype.innerWidth=function(){return this.element==this.element.window?m.viewportWidth():this.adapter.innerWidth()},i.prototype.destroy=function(){var e=[];for(var t in this.waypoints)for(var i in this.waypoints[t])e.push(this.waypoints[t][i]);for(var n=0,o=e.length;n<o;n++)e[n].destroy()},i.prototype.refresh=function(){var e,t=this.element==this.element.window,i=t?void 0:this.adapter.offset(),n={};for(var o in this.handleScroll(),e={horizontal:{contextOffset:t?0:i.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:i.top,contextScroll:t?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var a=e[o];for(var r in this.waypoints[o]){var s,l,c,d,u=this.waypoints[o][r],h=u.options.offset,p=u.triggerPoint,f=0,g=null==p;u.element!==u.element.window&&(f=u.adapter.offset()[a.offsetProp]),"function"==typeof h?h=h.apply(u):"string"==typeof h&&(h=parseFloat(h),-1<u.options.offset.indexOf("%")&&(h=Math.ceil(a.contextDimension*h/100))),s=a.contextScroll-a.contextOffset,u.triggerPoint=f+s-h,l=p<a.oldScroll,c=u.triggerPoint>=a.oldScroll,d=!l&&!c,!g&&(l&&c)?(u.queueTrigger(a.backward),n[u.group.id]=u.group):!g&&d?(u.queueTrigger(a.forward),n[u.group.id]=u.group):g&&a.oldScroll>=u.triggerPoint&&(u.queueTrigger(a.forward),n[u.group.id]=u.group)}}return m.requestAnimationFrame(function(){for(var e in n)n[e].flushTriggers()}),this},i.findOrCreateByElement=function(e){return i.findByElement(e)||new i(e)},i.refreshAll=function(){for(var e in o)o[e].refresh()},i.findByElement=function(e){return o[e.waypointContextKey]},window.onload=function(){e&&e(),i.refreshAll()},m.requestAnimationFrame=function(e){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t).call(window,e)},m.Context=i}(),function(){"use strict";function r(e,t){return e.triggerPoint-t.triggerPoint}function s(e,t){return t.triggerPoint-e.triggerPoint}function t(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),i[this.axis][this.name]=this}var i={vertical:{},horizontal:{}},n=window.Waypoint;t.prototype.add=function(e){this.waypoints.push(e)},t.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},t.prototype.flushTriggers=function(){for(var e in this.triggerQueues){var t=this.triggerQueues[e],i="up"===e||"left"===e;t.sort(i?s:r);for(var n=0,o=t.length;n<o;n+=1){var a=t[n];(a.options.continuous||n===t.length-1)&&a.trigger([e])}}this.clearTriggerQueues()},t.prototype.next=function(e){this.waypoints.sort(r);var t=n.Adapter.inArray(e,this.waypoints);return t===this.waypoints.length-1?null:this.waypoints[t+1]},t.prototype.previous=function(e){this.waypoints.sort(r);var t=n.Adapter.inArray(e,this.waypoints);return t?this.waypoints[t-1]:null},t.prototype.queueTrigger=function(e,t){this.triggerQueues[t].push(e)},t.prototype.remove=function(e){var t=n.Adapter.inArray(e,this.waypoints);-1<t&&this.waypoints.splice(t,1)},t.prototype.first=function(){return this.waypoints[0]},t.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},t.findOrCreate=function(e){return i[e.axis][e.name]||new t(e)},n.Group=t}(),function(){"use strict";function i(e){this.$element=n(e)}var n=window.jQuery,e=window.Waypoint;n.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,t){i.prototype[t]=function(){var e=Array.prototype.slice.call(arguments);return this.$element[t].apply(this.$element,e)}}),n.each(["extend","inArray","isEmptyObject"],function(e,t){i[t]=n[t]}),e.adapters.push({name:"jquery",Adapter:i}),e.Adapter=i}(),function(){"use strict";function e(n){return function(){var t=[],i=arguments[0];return n.isFunction(arguments[0])&&((i=n.extend({},arguments[1])).handler=arguments[0]),this.each(function(){var e=n.extend({},i,{element:this});"string"==typeof e.context&&(e.context=n(this).closest(e.context)[0]),t.push(new o(e))}),t}}var o=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=e(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=e(window.Zepto))}(),function(){"use strict";function e(){}function t(e){this.options=n.Adapter.extend({},t.defaults,e),this.axis=this.options.horizontal?"horizontal":"vertical",this.waypoints=[],this.element=this.options.element,this.createWaypoints()}var n=window.Waypoint;t.prototype.createWaypoints=function(){for(var e={vertical:[{down:"enter",up:"exited",offset:"100%"},{down:"entered",up:"exit",offset:"bottom-in-view"},{down:"exit",up:"entered",offset:function(){return-this.adapter.outerHeight()/2}},{down:"exited",up:"enter",offset:function(){return-this.adapter.outerHeight()}}],horizontal:[{right:"enter",left:"exited",offset:"100%"},{right:"entered",left:"exit",offset:"right-in-view"},{right:"exit",left:"entered",offset:0},{right:"exited",left:"enter",offset:function(){return-this.adapter.outerWidth()}}]},t=0,i=e[this.axis].length;t<i;t++){var n=e[this.axis][t];this.createWaypoint(n)}},t.prototype.createWaypoint=function(e){var t,i=this;this.waypoints.push(new n({context:this.options.context,element:this.options.element,enabled:this.options.enabled,handler:(t=e,function(e){i.options[t[e]].call(i,e)}),offset:e.offset,horizontal:this.options.horizontal}))},t.prototype.destroy=function(){for(var e=0,t=this.waypoints.length;e<t;e++)this.waypoints[e].destroy();this.waypoints=[]},t.prototype.disable=function(){for(var e=0,t=this.waypoints.length;e<t;e++)this.waypoints[e].disable()},t.prototype.enable=function(){for(var e=0,t=this.waypoints.length;e<t;e++)this.waypoints[e].enable()},t.defaults={context:window,enabled:!0,enter:e,entered:e,exit:e,exited:e},n.Inview=t}();var TESTGROUP=new ABTest2,TRACKED_DURATION=1e4,PLAYING_VIDEOS={},DEFAULT_VOLUME=70,volumeStateChanged=!1,ZONEID=window.location.search.match(/zoneid=(\d*)/i),hasVideoPlaying=!1,hasVideoCountDown=!1,baseKeyTimeVideo="__timevids";window.ZONEID=window.location.search.match(/zoneid=(\d+)/i)||"267866779927658906",ZONEID&&"object"==typeof ZONEID&&(ZONEID=""!=ZONEID[1]?ZONEID[1]:null,info("Adtima --> Video ads zone "+(ZONEID?"overtide":"disabled"),ZONEID)),API_PREPARE_ADS="//api.adtimaserver.vn/rtb/prepareRTB",API_STATISTIC_VIDEO_TIME="//log.news.zing.vn/collect",window.addEventListener("DOMContentLoaded",function(){function t(e,t,i){if(e){var n=API_STATISTIC_VIDEO_TIME;n+="?appid="+window.ZAPPID,n+="&page=article",n+="&event="+i,n+="&vid="+ZA.getVisitorID(),n+="&value="+t,n+="&postid="+e,$.ajax({url:n,type:"GET",xhrFields:{withCredentials:!0}})}else info("Player --> statisticVideoTime, lack of article id")}var i=DBLOCAL.load(baseKeyTimeVideo)||{};try{i=JSON.parse(i)}catch(e){i={}}var e=Object.keys(i);0!==e.length&&(e.forEach(function(e){t(e,i[e].c,"watch"),i[e].c!==i[e].d&&t(e,i[e].d,"watch-seek")}),DBLOCAL.clear(baseKeyTimeVideo))}),window.SCRIPTS=SCRIPTS||[],SCRIPTS.push(function(){if("page-video"==$("body").attr("id"))new VideoPlayer;var e,t;t=e||$(".videobox"),debug("Video --> initializng video boxes"),t.length&&t.each(function(e,t){var i=$(t),n=i.find(".video-player"),o=i.find(".section-sidebar"),a=o.find(".article-item").eq(0);new AdtimaPlayer(n.find("video, iframe"),{tracking:{url:a.find(".article-title a").attr("href")||"",title:a.find(".article-title a").text(),topicid:a.attr("topic-id"),hash:"#boxvideo"},videoId:a.attr("article-id"),popPlayer:!1,eventTracking:!0}),1024<=DEVICE.screen_width&&o.mCustomScrollbar({scrollButtons:{enable:!1},mouseWheel:{enable:!0},contentTouchScroll:!0,axis:"y",scrollbarPosition:"outside",theme:"dark",autoHideScrollbar:!0,autoDraggerLength:!0,alwaysShowScrollbar:!1,scrollInertia:500,advanced:{updateOnSelectorChange:!0}})})}),"video"==getPageType()&&$(".pagination").each(function(e,t){var n=$(t);new Waypoint.Inview({element:t,enter:function(e){var i=n.find("a").attr("href");i&&(i+="#inlineload",debug("Video --> load next page video: "+i),n.find("a").html('<div class="ellipsis"><div></div><div></div><div></div><div></div></div>').removeAttr("href"),fetchArticleList(i,".video-browser .article-list",function(e,t){e||(t.find(".article-item").each(function(e,t){if($(t).attr("article-id")===getArticleId()){var i=hasVideoPlaying?"active":"active pause";$(t).addClass(i)}}),n.before(t.find(".article-item")),n.html(t.find(".pagination").html()),Waypoint.refreshAll(),initTrackers($("#video-channels")),trackPageviewGA(i),window.za&&za.trackPageview(i))}))}})}),initInfiniteList(),function(o){var a=[],r=function(){return a.length?a[a.length-1]:null},t=function(){var e,t=!1;for(e=a.length-1;0<=e;e--)a[e].$blocker&&(a[e].$blocker.toggleClass("current",!t).toggleClass("behind",t),t=!0)};o.modal=function(i,e){var n,t;if(this.$body=o("body"),this.options=o.extend({},o.modal.defaults,e),this.options.doFade=!isNaN(parseInt(this.options.fadeDuration,10)),this.$blocker=null,this.options.closeExisting)for(;o.modal.isActive();)o.modal.close();if(a.push(this),i.is("a"))if(t=i.attr("href"),/^#/.test(t)){if(this.$elm=o(t),1!==this.$elm.length)return null;this.$body.append(this.$elm),this.open()}else this.$elm=o("<div>"),this.$body.append(this.$elm),n=function(e,t){t.elm.remove()},this.showSpinner(),i.trigger(o.modal.AJAX_SEND),o.get(t).done(function(e){if(o.modal.isActive()){i.trigger(o.modal.AJAX_SUCCESS);var t=r();t.$elm.empty().append(e).on(o.modal.CLOSE,n),t.hideSpinner(),t.open(),i.trigger(o.modal.AJAX_COMPLETE)}}).fail(function(){i.trigger(o.modal.AJAX_FAIL),r().hideSpinner(),a.pop(),i.trigger(o.modal.AJAX_COMPLETE)});else this.$elm=i,this.$body.append(this.$elm),this.open()},o.modal.prototype={constructor:o.modal,open:function(){var e=this;this.block(),this.options.doFade?setTimeout(function(){e.show()},this.options.fadeDuration*this.options.fadeDelay):this.show(),o(document).off("keydown.modal").on("keydown.modal",function(e){var t=r();27==e.which&&t.options.escapeClose&&t.close()}),this.options.clickClose&&this.$blocker.click(function(e){e.target==this&&o.modal.close()})},close:function(){a.pop(),this.unblock(),this.hide(),o.modal.isActive()||o(document).off("keydown.modal")},block:function(){this.$elm.trigger(o.modal.BEFORE_BLOCK,[this._ctx()]),this.$body.css("overflow","hidden"),this.$blocker=o('<div class="jquery-modal blocker current"></div>').appendTo(this.$body),t(),this.options.doFade&&this.$blocker.css("opacity",0).animate({opacity:1},this.options.fadeDuration),this.$elm.trigger(o.modal.BLOCK,[this._ctx()])},unblock:function(e){!e&&this.options.doFade?this.$blocker.fadeOut(this.options.fadeDuration,this.unblock.bind(this,!0)):(this.$blocker.children().appendTo(this.$body),this.$blocker.remove(),this.$blocker=null,t(),o.modal.isActive()||this.$body.css("overflow",""))},show:function(){this.$elm.trigger(o.modal.BEFORE_OPEN,[this._ctx()]),this.options.showClose&&(this.closeButton=o('<a href="#close-modal" rel="modal:close" class="close-modal '+this.options.closeClass+'">'+this.options.closeText+"</a>"),this.$elm.append(this.closeButton)),this.$elm.addClass(this.options.modalClass).appendTo(this.$blocker),this.options.doFade?this.$elm.css("opacity",0).show().animate({opacity:1},this.options.fadeDuration):this.$elm.show(),this.$elm.trigger(o.modal.OPEN,[this._ctx()])},hide:function(){this.$elm.trigger(o.modal.BEFORE_CLOSE,[this._ctx()]),this.closeButton&&this.closeButton.remove();var e=this;this.options.doFade?this.$elm.fadeOut(this.options.fadeDuration,function(){e.$elm.trigger(o.modal.AFTER_CLOSE,[e._ctx()])}):this.$elm.hide(0,function(){e.$elm.trigger(o.modal.AFTER_CLOSE,[e._ctx()])}),this.$elm.trigger(o.modal.CLOSE,[this._ctx()])},showSpinner:function(){this.options.showSpinner&&(this.spinner=this.spinner||o('<div class="'+this.options.modalClass+'-spinner"></div>').append(this.options.spinnerHtml),this.$body.append(this.spinner),this.spinner.show())},hideSpinner:function(){this.spinner&&this.spinner.remove()},_ctx:function(){return{elm:this.$elm,$blocker:this.$blocker,options:this.options}}},o.modal.close=function(e){if(o.modal.isActive()){e&&e.preventDefault();var t=r();return t.close(),t.$elm}},o.modal.isActive=function(){return 0<a.length},o.modal.defaults={closeExisting:!0,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",modalClass:"modal",spinnerHtml:null,showSpinner:!0,showClose:!0,fadeDuration:null,fadeDelay:1},o.modal.BEFORE_BLOCK="modal:before-block",o.modal.BLOCK="modal:block",o.modal.BEFORE_OPEN="modal:before-open",o.modal.OPEN="modal:open",o.modal.BEFORE_CLOSE="modal:before-close",o.modal.CLOSE="modal:close",o.modal.AFTER_CLOSE="modal:after-close",o.modal.AJAX_SEND="modal:ajax:send",o.modal.AJAX_SUCCESS="modal:ajax:success",o.modal.AJAX_FAIL="modal:ajax:fail",o.modal.AJAX_COMPLETE="modal:ajax:complete",o.fn.modal=function(e){return 1===this.length&&new o.modal(this,e),this},o(document).on("click.modal",'a[rel="modal:close"]',o.modal.close),o(document).on("click.modal",'a[rel="modal:open"]',function(e){e.preventDefault(),o(this).modal()})}(jQuery),$.modal.defaults={closeExisting:!0,escapeClose:!0,clickClose:!1,closeText:"Đóng",closeClass:"",showClose:!1,modalClass:"modal",spinnerHtml:null,showSpinner:!0};var FETCHED_ADS,ADS_TOKEN,keys={37:1,38:1,39:1,40:1},NATIVE_ARTICLE={recommend1:{id:"1699130954481103018",name:"1699130954481103018"},recommend2:{id:"2267157898548703404",name:"2267157898548703404"},related:{id:"69575389776148212",name:"Article_Fixedbar1"},body1:{id:"1482860440386499955",name:"1482860440386499955"},body2:{id:"839646065123095838",name:"839646065123095838"},body3:{id:"1407681805283718416",name:"1407681805283718416"},body4:{id:"1975077646856844562",name:"1975077646856844562"},infinite1:{id:"637604550046873334",name:"Article_Infinite1"},infinite2:{id:"2442606994762724664",name:"Article_Infinite2"},infinite3:{id:"195903907098490173",name:"Article_Infinite3"},infinite4:{id:"763869295694804287",name:"Article_Infinite4"},infinite5:{id:"1331898438785660209",name:"Article_Infinite5"}},NATIVE_HOME={trending1:{id:"107214494588433866"},latest1:{id:"675243637679289804"},latest2:{id:"1243217822368626126"},latest3:{id:"1811255761552504256"},"thoi-su":{id:"2404480875018810847"},"phap-luat":{id:"1861764078737257942"},"kinh-doanh-tai-chinh":{id:"1293734935646402004"},"the-gioi":{id:"157758064864753104"},"the-thao":{id:"1836504491306218973"},"giai-tri":{id:"2379212354055796162"},"am-nhac":{id:"132474219458426311"},"phim-anh":{id:"700509959619048921"},"thoi-trang":{id:"1268468751145596379"},"cong-nghe":{id:"725725635304453586"},"oto-xe-may":{id:"2429729467333571624"},"doi-song":{id:"183026448388813869"},"giao-duc":{id:"750991819805258799"},"xuat-ban":{id:"1319020980075983905"},"du-lich":{id:"2455560938250007589"},"suc-khoe":{id:"1887030331957539875"}};window.adtimaConfig=window.adtimaConfig||{},function(){debug("Library - DOMContentLoaded --> set content ids (ads)");var e={home:"v1_web_other_home",cate:"v1_web_other_cate-"+zaConfig.pageid,topic:"v1_web_other_topic-"+getLastPathName(),article:"v1_web_article_",video:"v1_web_video_",picture:"v1_web_picture_"},t="";switch(getPageType()){case"home":t=e.home;break;case"category":t=e.cate;break;case"topic":t=e.topic;break;case"article":var i=$(".the-article"),n=i.attr("article-id");n=n||"",t=(i.hasClass("type-picture")?e.picture:e.article)+n;break;case"video":var o=$(".video-player").attr("article-id");t=e.video+(o||"")}window.adtimaConfig.contentId=t}(),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var i={exports:{}};t(i.exports,i),e.autosize=i.exports}}(this,function(e,t){"use strict";function i(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:destroy",!0,!1),e.dispatchEvent(t)}}function n(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:update",!0,!1),e.dispatchEvent(t)}}var o=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((o=function(e){return e}).destroy=function(e){return e},o.update=function(e){return e}):((o=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return function(o){function i(e){var t=o.style.width;o.style.width="0px",o.offsetWidth,o.style.width=t,u=e,l&&(o.style.overflowY=e),n()}function n(){var e=window.pageYOffset,t=document.body.scrollTop,i=o.style.height;o.style.height="auto";var n=o.scrollHeight+d;0!==o.scrollHeight?(o.style.height=n+"px",document.documentElement.scrollTop=e,document.body.scrollTop=t):o.style.height=i}function e(){var e=o.style.height;if(n(),window.getComputedStyle(o,null).height!==o.style.height?"visible"!==u&&i("visible"):"hidden"!==u&&i("hidden"),e!==o.style.height){var t=document.createEvent("Event");t.initEvent("autosize:resized",!0,!1),o.dispatchEvent(t)}}var t=void 0===arguments[1]?{}:arguments[1],a=t.setOverflowX,r=void 0===a||a,s=t.setOverflowY,l=void 0===s||s;if(o&&o.nodeName&&"TEXTAREA"===o.nodeName&&!o.hasAttribute("data-autosize-on")){var c,d=null,u="hidden",h=function(t){window.removeEventListener("resize",e),o.removeEventListener("input",e),o.removeEventListener("keyup",e),o.removeAttribute("data-autosize-on"),o.removeEventListener("autosize:destroy",h),Object.keys(t).forEach(function(e){o.style[e]=t[e]})}.bind(o,{height:o.style.height,resize:o.style.resize,overflowY:o.style.overflowY,overflowX:o.style.overflowX,wordWrap:o.style.wordWrap});o.addEventListener("autosize:destroy",h),"onpropertychange"in o&&"oninput"in o&&o.addEventListener("keyup",e),window.addEventListener("resize",e),o.addEventListener("input",e),o.addEventListener("autosize:update",e),o.setAttribute("data-autosize-on",!0),l&&(o.style.overflowY="hidden"),r&&(o.style.overflowX="hidden",o.style.wordWrap="break-word"),"vertical"===(c=window.getComputedStyle(o,null)).resize?o.style.resize="none":"both"===c.resize&&(o.style.resize="horizontal"),d="content-box"===c.boxSizing?-(parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)):parseFloat(c.borderTopWidth)+parseFloat(c.borderBottomWidth),e()}}(e,t)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},o.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],n),e}),t.exports=o}),function(e){if("function"==typeof define&&define.amd)define(["jquery"],e);else if("object"==typeof module&&module.exports){var t=require("jquery");module.exports=e(t)}else e(jQuery)}(function(e){if(void 0===e)throw new Error("jQuery.textcomplete requires jQuery");var t,d,u,h;return function(a){"use strict";var r=1;a.fn.textcomplete=function(t,i){var o=Array.prototype.slice.call(arguments);return this.each(function(){var e=a(this),n=e.data("textComplete");if(n||(i||(i={}),i._oid=r++,n=new a.fn.textcomplete.Completer(this,i),e.data("textComplete",n)),"string"==typeof t){if(!n)return;o.shift(),n[t].apply(n,o),"destroy"===t&&e.removeData("textComplete")}else a.each(t,function(i){a.each(["header","footer","placement","maxCount"],function(e){var t;i[e]&&(n.option[e]=i[e],t=e+"as a strategy param is deprecated. Use option.",console.warn&&console.warn(t),delete i[e])})}),n.register(a.fn.textcomplete.Strategy.parse(t,{el:this,$el:e}))})}}(e),function(n){"use strict";function o(e,t){if(this.$el=n(e),this.id="textcomplete"+l++,this.strategies=[],this.views=[],this.option=n.extend({},o._getDefaults(),t),!(this.$el.is("input[type=text]")||this.$el.is("input[type=search]")||this.$el.is("textarea")||e.isContentEditable||"true"==e.contentEditable))throw new Error("textcomplete must be called on a Textarea or a ContentEditable.");if(e===document.activeElement)this.initialize();else{var i=this;this.$el.one("focus."+this.id,function(){i.initialize()})}}var a,r,s,l=0;o._getDefaults=function(){return o.DEFAULTS||(o.DEFAULTS={appendTo:n("body"),zIndex:"100"}),o.DEFAULTS},n.extend(o.prototype,{id:null,option:null,strategies:null,adapter:null,dropdown:null,$el:null,initialize:function(){var e,t,i=this.$el.get(0);this.dropdown=new n.fn.textcomplete.Dropdown(i,this,this.option),this.option.adapter?e=this.option.adapter:(t=this.$el.is("textarea")||this.$el.is("input[type=text]")||this.$el.is("input[type=search]")?"number"==typeof i.selectionEnd?"Textarea":"IETextarea":"ContentEditable",e=n.fn.textcomplete[t]),this.adapter=new e(i,this,this.option)},destroy:function(){this.$el.off("."+this.id),this.adapter&&this.adapter.destroy(),this.dropdown&&this.dropdown.destroy(),this.$el=this.adapter=this.dropdown=null},deactivate:function(){this.dropdown&&this.dropdown.deactivate()},trigger:function(e,t){this.dropdown||this.initialize(),null!=e||(e=this.adapter.getTextFromHeadToCaret());var i=this._extractSearchQuery(e);if(i.length){var n=i[1];if(t&&this._term===n&&""!==n)return;this._term=n,this._search.apply(this,i)}else this._term=null,this.dropdown.deactivate()},fire:function(e){var t=Array.prototype.slice.call(arguments,1);return this.$el.trigger(e,t),this},register:function(e){Array.prototype.push.apply(this.strategies,e)},select:function(e,t,i){this._term=null,this.adapter.select(e,t,i),this.fire("change").fire("textComplete:select",e,t),this.adapter.focus()},_clearAtNext:!0,_term:null,_extractSearchQuery:function(e){for(var t=0;t<this.strategies.length;t++){var i=this.strategies[t],n=i.context(e);if(n||""===n){var o=(s=i.match,"[object Function]"===Object.prototype.toString.call(s)?i.match(e):i.match);r=n,"[object String]"===Object.prototype.toString.call(r)&&(e=n);var a=e.match(o);if(a)return[i,a[i.index],a]}}var r,s;return[]},_search:(a=function(i,n,o,e){var a=this;n.search(o,function(e,t){a.dropdown.shown||a.dropdown.activate(),a._clearAtNext&&(a.dropdown.clear(),a._clearAtNext=!1),a.dropdown.setPosition(a.adapter.getCaretPosition()),a.dropdown.render(a._zip(e,n,o)),t||(i(),a._clearAtNext=!0)},e)},function(){var e=Array.prototype.slice.call(arguments);if(r)s=e;else{r=!0;var i=this;e.unshift(function e(){if(s){var t=s;s=void 0,t.unshift(e),a.apply(i,t)}else r=!1}),a.apply(this,e)}}),_zip:function(e,t,i){return n.map(e,function(e){return{value:e,strategy:t,term:i}})}}),n.fn.textcomplete.Completer=o}(e),function(o){"use strict";function a(e,t,i){this.$el=a.createElement(i),this.completer=t,this.id=t.id+"dropdown",this._data=[],this.$inputEl=o(e),(this.option=i).listPosition&&(this.setPosition=i.listPosition),i.height&&this.$el.height(i.height);var n=this;o.each(["maxCount","placement","footer","header","noResultsMessage","className"],function(e,t){null!=i[t]&&(n[t]=i[t])}),this._bindEvents(e),l[this.id]=this}var r=o(window),s=function(e,t){var i,n,o=t.strategy.idProperty;for(i=0;i<e.length;i++)if((n=e[i]).strategy===t.strategy)if(o){if(n.value[o]===t.value[o])return!0}else if(n.value===t.value)return!0;return!1},l={};o(document).on("click",function(e){var i=e.originalEvent&&e.originalEvent.keepTextCompleteDropdown;o.each(l,function(e,t){e!==i&&t.deactivate()})});var i={SKIP_DEFAULT:0,KEY_UP:1,KEY_DOWN:2,KEY_ENTER:3,KEY_PAGEUP:4,KEY_PAGEDOWN:5,KEY_ESCAPE:6};o.extend(a,{createElement:function(e){var t=e.appendTo;return t instanceof o||(t=o(t)),o("<ul></ul>").addClass("dropdown-menu textcomplete-dropdown").attr("id","textcomplete-dropdown-"+e._oid).css({display:"none",left:0,position:"absolute",zIndex:e.zIndex}).appendTo(t)}}),o.extend(a.prototype,{$el:null,$inputEl:null,completer:null,footer:null,header:null,id:null,maxCount:10,placement:"",shown:!1,data:[],className:"",destroy:function(){this.deactivate(),this.$el.off("."+this.id),this.$inputEl.off("."+this.id),this.clear(),this.$el.remove(),this.$el=this.$inputEl=this.completer=null,delete l[this.id]},render:function(e){var t=this._buildContents(e),i=o.map(this.data,function(e){return e.value});if(this.data.length){var n=e[0].strategy;n.id?this.$el.attr("data-strategy",n.id):this.$el.removeAttr("data-strategy"),this._renderHeader(i),this._renderFooter(i),t&&(this._renderContents(t),this._fitToBottom(),this._fitToRight(),this._activateIndexedItem()),this._setScroll()}else this.noResultsMessage?this._renderNoResultsMessage(i):this.shown&&this.deactivate()},setPosition:function(e){var t="absolute";return this.$inputEl.add(this.$inputEl.parents()).each(function(){return"absolute"!==o(this).css("position")&&("fixed"===o(this).css("position")?(e.top-=r.scrollTop(),e.left-=r.scrollLeft(),!(t="fixed")):void 0)}),this.$el.css(this._applyPlacement(e)),this.$el.css({position:t}),this},clear:function(){this.$el.html(""),this.data=[],this._index=0,this._$header=this._$footer=this._$noResultsMessage=null},activate:function(){return this.shown||(this.clear(),this.$el.show(),this.className&&this.$el.addClass(this.className),this.completer.fire("textComplete:show"),this.shown=!0),this},deactivate:function(){return this.shown&&(this.$el.hide(),this.className&&this.$el.removeClass(this.className),this.completer.fire("textComplete:hide"),this.shown=!1),this},isUp:function(e){return 38===e.keyCode||e.ctrlKey&&80===e.keyCode},isDown:function(e){return 40===e.keyCode||e.ctrlKey&&78===e.keyCode},isEnter:function(e){return!(e.ctrlKey||e.altKey||e.metaKey||e.shiftKey)&&(13===e.keyCode||9===e.keyCode||!0===this.option.completeOnSpace&&32===e.keyCode)},isPageup:function(e){return 33===e.keyCode},isPagedown:function(e){return 34===e.keyCode},isEscape:function(e){return 27===e.keyCode},_data:null,_index:null,_$header:null,_$noResultsMessage:null,_$footer:null,_bindEvents:function(){this.$el.on("mousedown."+this.id,".textcomplete-item",o.proxy(this._onClick,this)),this.$el.on("touchstart."+this.id,".textcomplete-item",o.proxy(this._onClick,this)),this.$el.on("mouseover."+this.id,".textcomplete-item",o.proxy(this._onMouseover,this)),this.$inputEl.on("keydown."+this.id,o.proxy(this._onKeydown,this))},_onClick:function(e){var t=o(e.target);e.preventDefault(),e.originalEvent.keepTextCompleteDropdown=this.id,t.hasClass("textcomplete-item")||(t=t.closest(".textcomplete-item"));var i=this.data[parseInt(t.data("index"),10)];this.completer.select(i.value,i.strategy,e);var n=this;setTimeout(function(){n.deactivate(),"touchstart"===e.type&&n.$inputEl.focus()},0)},_onMouseover:function(e){var t=o(e.target);e.preventDefault(),t.hasClass("textcomplete-item")||(t=t.closest(".textcomplete-item")),this._index=parseInt(t.data("index"),10),this._activateIndexedItem()},_onKeydown:function(e){var t;if(this.shown)switch(o.isFunction(this.option.onKeydown)&&(t=this.option.onKeydown(e,i)),null==t&&(t=this._defaultKeydown(e)),t){case i.KEY_UP:e.preventDefault(),this._up();break;case i.KEY_DOWN:e.preventDefault(),this._down();break;case i.KEY_ENTER:e.preventDefault(),this._enter(e);break;case i.KEY_PAGEUP:e.preventDefault(),this._pageup();break;case i.KEY_PAGEDOWN:e.preventDefault(),this._pagedown();break;case i.KEY_ESCAPE:e.preventDefault(),this.deactivate()}},_defaultKeydown:function(e){return this.isUp(e)?i.KEY_UP:this.isDown(e)?i.KEY_DOWN:this.isEnter(e)?i.KEY_ENTER:this.isPageup(e)?i.KEY_PAGEUP:this.isPagedown(e)?i.KEY_PAGEDOWN:this.isEscape(e)?i.KEY_ESCAPE:void 0},_up:function(){0===this._index?this._index=this.data.length-1:this._index-=1,this._activateIndexedItem(),this._setScroll()},_down:function(){this._index===this.data.length-1?this._index=0:this._index+=1,this._activateIndexedItem(),this._setScroll()},_enter:function(e){var t=this.data[parseInt(this._getActiveElement().data("index"),10)];this.completer.select(t.value,t.strategy,e),this.deactivate()},_pageup:function(){var t=0,i=this._getActiveElement().position().top-this.$el.innerHeight();this.$el.children().each(function(e){if(o(this).position().top+o(this).outerHeight()>i)return t=e,!1}),this._index=t,this._activateIndexedItem(),this._setScroll()},_pagedown:function(){var t=this.data.length-1,i=this._getActiveElement().position().top+this.$el.innerHeight();this.$el.children().each(function(e){if(o(this).position().top>i)return t=e,!1}),this._index=t,this._activateIndexedItem(),this._setScroll()},_activateIndexedItem:function(){this.$el.find(".textcomplete-item.active").removeClass("active"),this._getActiveElement().addClass("active")},_getActiveElement:function(){return this.$el.children(".textcomplete-item:nth("+this._index+")")},_setScroll:function(){var e=this._getActiveElement(),t=e.position().top,i=e.outerHeight(),n=this.$el.innerHeight(),o=this.$el.scrollTop();0===this._index||this._index==this.data.length-1||t<0?this.$el.scrollTop(t+o):n<t+i&&this.$el.scrollTop(t+i+o-n)},_buildContents:function(e){var t,i,n,o="";for(i=0;i<e.length&&this.data.length!==this.maxCount;i++)t=e[i],s(this.data,t)||(n=this.data.length,this.data.push(t),o+='<li class="textcomplete-item" data-index="'+n+'"><a>',o+=t.strategy.template(t.value,t.term),o+="</a></li>");return o},_renderHeader:function(e){if(this.header){this._$header||(this._$header=o('<li class="textcomplete-header"></li>').prependTo(this.$el));var t=o.isFunction(this.header)?this.header(e):this.header;this._$header.html(t)}},_renderFooter:function(e){if(this.footer){this._$footer||(this._$footer=o('<li class="textcomplete-footer"></li>').appendTo(this.$el));var t=o.isFunction(this.footer)?this.footer(e):this.footer;this._$footer.html(t)}},_renderNoResultsMessage:function(e){if(this.noResultsMessage){this._$noResultsMessage||(this._$noResultsMessage=o('<li class="textcomplete-no-results-message"></li>').appendTo(this.$el));var t=o.isFunction(this.noResultsMessage)?this.noResultsMessage(e):this.noResultsMessage;this._$noResultsMessage.html(t)}},_renderContents:function(e){this._$footer?this._$footer.before(e):this.$el.append(e)},_fitToBottom:function(){var e=r.scrollTop()+r.height(),t=this.$el.height();this.$el.position().top+t>e&&this.$el.offset({top:e-t})},_fitToRight:function(){for(var e,t=this.$el.offset().left,i=this.$el.width(),n=r.width()-30;n<t+i&&(this.$el.offset({left:t-30}),!(t<=(e=this.$el.offset().left)));)t=e},_applyPlacement:function(e){return-1!==this.placement.indexOf("top")?e={top:"auto",bottom:this.$el.parent().height()-e.top+e.lineHeight,left:e.left}:(e.bottom="auto",delete e.lineHeight),-1!==this.placement.indexOf("absleft")?e.left=0:-1!==this.placement.indexOf("absright")&&(e.right=0,e.left="auto"),e}}),o.fn.textcomplete.Dropdown=a,o.extend(o.fn.textcomplete,i)}(e),function(t){"use strict";function n(e){t.extend(this,e),this.cache&&(this.search=i(this.search))}var i=function(e){var n={};return function(t,i){n[t]?i(n[t]):e.call(this,t,function(e){n[t]=(n[t]||[]).concat(e),i.apply(null,arguments)})}};n.parse=function(e,i){return t.map(e,function(e){var t=new n(e);return t.el=i.el,t.$el=i.$el,t})},t.extend(n.prototype,{match:null,replace:null,search:null,id:null,cache:!1,context:function(){return!0},index:2,template:function(e){return e},idProperty:null}),t.fn.textcomplete.Strategy=n}(e),function(u){"use strict";function e(){}var h=Date.now||function(){return(new Date).getTime()};u.extend(e.prototype,{id:null,completer:null,el:null,$el:null,option:null,initialize:function(e,t,i){var n,o,a,r,s,l,c,d;this.el=e,this.$el=u(e),this.id=t.id+this.constructor.name,this.completer=t,this.option=i,this.option.debounce&&(this._onKeyup=(n=this._onKeyup,o=this.option.debounce,d=function(){var e=h()-l;e<o?a=setTimeout(d,o-e):(a=null,c=n.apply(s,r),s=r=null)},function(){return s=this,r=arguments,l=h(),a||(a=setTimeout(d,o)),c})),this._bindEvents()},destroy:function(){this.$el.off("."+this.id),this.$el=this.el=this.completer=null},select:function(){throw new Error("Not implemented")},getCaretPosition:function(){var e=this._getCaretRelativePosition(),t=this.$el.offset(),i=this.option.appendTo;if(i){i instanceof u||(i=u(i));var n=i.offsetParent().offset();t.top-=n.top,t.left-=n.left}return e.top+=t.top,e.left+=t.left,e},focus:function(){this.$el.focus()},_bindEvents:function(){this.$el.on("keyup."+this.id,u.proxy(this._onKeyup,this))},_onKeyup:function(e){this._skipSearch(e)||this.completer.trigger(this.getTextFromHeadToCaret(),!0)},_skipSearch:function(e){switch(e.keyCode){case 9:case 13:case 40:case 38:return!0}if(e.ctrlKey)switch(e.keyCode){case 78:case 80:return!0}}}),u.fn.textcomplete.Adapter=e}(e),function(r){"use strict";function e(e,t,i){this.initialize(e,t,i)}r.extend(e.prototype,r.fn.textcomplete.Adapter.prototype,{select:function(e,t,i){var n=this.getTextFromHeadToCaret(),o=this.el.value.substring(this.el.selectionEnd),a=t.replace(e,i);void 0!==a&&(r.isArray(a)&&(o=a[1]+o,a=a[0]),n=n.replace(t.match,a),this.$el.val(n+o),this.el.selectionStart=this.el.selectionEnd=n.length)},getTextFromHeadToCaret:function(){return this.el.value.substring(0,this.el.selectionEnd)},_getCaretRelativePosition:function(){var e=r.fn.textcomplete.getCaretCoordinates(this.el,this.el.selectionStart);return{top:e.top+this._calculateLineHeight()-this.$el.scrollTop(),left:e.left-this.$el.scrollLeft()}},_calculateLineHeight:function(){var e=parseInt(this.$el.css("line-height"),10);if(isNaN(e)){var t=this.el.parentNode,i=document.createElement(this.el.nodeName),n=this.el.style;i.setAttribute("style","margin:0px;padding:0px;font-family:"+n.fontFamily+";font-size:"+n.fontSize),i.innerHTML="test",t.appendChild(i),e=i.clientHeight,t.removeChild(i)}return e}}),r.fn.textcomplete.Textarea=e}(e),function(s){"use strict";function e(e,t,i){this.initialize(e,t,i),s("<span>"+n+"</span>").css({position:"absolute",top:-9999,left:-9999}).insertBefore(e)}var n="吶";s.extend(e.prototype,s.fn.textcomplete.Textarea.prototype,{select:function(e,t,i){var n=this.getTextFromHeadToCaret(),o=this.el.value.substring(n.length),a=t.replace(e,i);if(void 0!==a){s.isArray(a)&&(o=a[1]+o,a=a[0]),n=n.replace(t.match,a),this.$el.val(n+o),this.el.focus();var r=this.el.createTextRange();r.collapse(!0),r.moveEnd("character",n.length),r.moveStart("character",n.length),r.select()}},getTextFromHeadToCaret:function(){this.el.focus();var e=document.selection.createRange();e.moveStart("character",-this.el.value.length);var t=e.text.split(n);return 1===t.length?t[0]:t[1]}}),s.fn.textcomplete.IETextarea=e}(e),function(f){"use strict";function e(e,t,i){this.initialize(e,t,i)}f.extend(e.prototype,f.fn.textcomplete.Adapter.prototype,{select:function(e,t,i){var n=this.getTextFromHeadToCaret(),o=window.getSelection(),a=o.getRangeAt(0),r=a.cloneRange();r.selectNodeContents(a.startContainer);var s=r.toString().substring(a.startOffset),l=t.replace(e,i);if(void 0!==l){f.isArray(l)&&(s=l[1]+s,l=l[0]),n=n.replace(t.match,l),a.selectNodeContents(a.startContainer),a.deleteContents();var c=document.createElement("div");c.innerHTML=n;var d=document.createElement("div");d.innerHTML=s;for(var u,h,p=document.createDocumentFragment();u=c.firstChild;)h=p.appendChild(u);for(;u=d.firstChild;)p.appendChild(u);a.insertNode(p),a.setStartAfter(h),a.collapse(!0),o.removeAllRanges(),o.addRange(a)}},_getCaretRelativePosition:function(){var e=window.getSelection().getRangeAt(0).cloneRange(),t=document.createElement("span");e.insertNode(t),e.selectNodeContents(t),e.deleteContents();var i=f(t),n=i.offset();return n.left-=this.$el.offset().left,n.top+=i.height()-this.$el.offset().top,n.lineHeight=i.height(),i.remove(),n},getTextFromHeadToCaret:function(){var e=window.getSelection().getRangeAt(0),t=e.cloneRange();return t.selectNodeContents(e.startContainer),t.toString().substring(0,e.startOffset)}}),f.fn.textcomplete.ContentEditable=e}(e),t=e,d=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],u="undefined"!=typeof window,h=u&&null!=window.mozInnerScreenX,t.fn.textcomplete.getCaretCoordinates=function(e,t,i){if(!u)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var n=i&&i.debug||!1;if(n){var o=document.querySelector("#input-textarea-caret-position-mirror-div");o&&o.parentNode.removeChild(o)}var a=document.createElement("div");a.id="input-textarea-caret-position-mirror-div",document.body.appendChild(a);var r=a.style,s=window.getComputedStyle?getComputedStyle(e):e.currentStyle;r.whiteSpace="pre-wrap","INPUT"!==e.nodeName&&(r.wordWrap="break-word"),r.position="absolute",n||(r.visibility="hidden"),d.forEach(function(e){r[e]=s[e]}),h?e.scrollHeight>parseInt(s.height)&&(r.overflowY="scroll"):r.overflow="hidden",a.textContent=e.value.substring(0,t),"INPUT"===e.nodeName&&(a.textContent=a.textContent.replace(/\s/g," "));var l=document.createElement("span");l.textContent=e.value.substring(t)||".",a.appendChild(l);var c={top:l.offsetTop+parseInt(s.borderTopWidth),left:l.offsetLeft+parseInt(s.borderLeftWidth)};return n?l.style.backgroundColor="#aaa":document.body.removeChild(a),c},e});var emojiStrategy={"x-D xD X-D XD :cuoi: :cười:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f606.png",shortname:"xD",description:"Cười tít mắt",common:!0,regex:new RegExp(/(x-D|xD)/gi)},":D :d :-D :-d =D :-)) :haha:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f604.png",shortname:":-D",description:"Ha ha ha",common:!0,regex:new RegExp(/\B(:D|:d|:-D|:-d|=D|:-\)\))/gi)},":'( :'-( T.T :khóc: :khoc:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f622.png",shortname:":'(",description:"Khóc",common:!0,regex:new RegExp(/\B(:'\(|:'-\(|T\.T)/gi)},":) :-) :-] :] =) :=) =] :> ^_^ ^^ :vui: :cuoi: :cười:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f642.png",shortname:":-)",description:"Vui",common:!0,regex:new RegExp(/\B(:\)|:-\)|:-\]|:\]|=\)|:=\)|=\]|:>|\^_\^|\^\^)/gi)},">:[ :-( :( :-c :c :-< :< :-[ :[ :buồn: :buon:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f61f.png",shortname:":(",description:"Buồn",common:!0,regex:new RegExp(/\B(>:\[|:-\(|:\(|:-c|:c|:-<|:<|:-\[)/gi)},">.< :-/ :-. :/ :\\ =/ =\\ :bực: :buc:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f620.png",shortname:":-/",description:"Bực",common:!0,regex:new RegExp(/\B(>\.<|:-\/|:-\.|:\/|:\\|=\/|=\\\\)/gi)},":-|| :@ :giận: :gian:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f621.png",shortname:":@",description:"Giận",common:!0,regex:new RegExp(/\B(:-\|\||:@)/gi)},">:O :-O :O :-o :o :0 :-0 8-O 8-0 O_O o-o O_o o_O o_o O-O :ngạc nhiên: :ngac nhien:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f62e.png",shortname:":-O",description:"Ngạc nhiên",common:!0,regex:new RegExp(/\B(>:O|:-O|:O|>:0|:-0|:0|8-O|8-0|O_O|0_0|O-O)/gi)},";-) ;) :nháy mắt: :nhay mat:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f609.png",shortname:";-)",aliases:";-) ;)",description:"Nháy mắt",common:!0,regex:new RegExp(/\B(;-\)|;\))/gi)},"<3 :yêu:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f60d.png",shortname:"<3",description:"Yêu quá",common:!0,regex:new RegExp(/\B(<3|:yêu:|:yeu:)/gi)},":om:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f917.png",shortname:":ôm:",description:"Ôm",common:!0,regex:new RegExp(/\B(:ôm:|:om:)/gi)},":| :-| :/ :\\ =/ =\\ :không :khong":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f611.png",shortname:":-|",description:"Không biết nói gì",common:!1,regex:new RegExp(/\B(:\||:-\||:\/|:\\\\|=\/|=\\\\)/gi)},":-X :X :-x :x :-# :# :‑& :& :không :khong":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f910.png",shortname:":-X",description:"Không nói được",common:!0,regex:new RegExp(/\B(:-X|:X|:-#|:#|:-&|:&)/gi)},":L :chán: :chan:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f612.png",shortname:":L",description:"Chán",common:!0,regex:new RegExp(/\B(:L)/gi)},":nghĩ :nghi":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f914.png",shortname:":nghĩ:",description:"Nghĩ",common:!0,regex:new RegExp(/\B(:nghĩ:|:nghi:)/gi)},"8-D 8D 8-) 8) :cool: :cuoi:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f60e.png",shortname:"8-D",description:'Cười "cool"',regex:new RegExp(/(8-D|8D|8-\)|8\))/gi)},":') :'D :'-) :cười chảy nước mắt: :cuoi:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f602.png",shortname:":')",description:"Cười",regex:new RegExp(/\B(:'\)|:'-\)|:'D)/gi)},":$ :đỏ mặt: :do mat: :blushing:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f633.png",shortname:":$",description:"Đỏ mặt",regex:new RegExp(/\B(:\$)/gi)},":* :-* :^* :hôn: :hon:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f618.png",shortname:":^*",description:"Hôn",regex:new RegExp(/\B(:\*|:-\*|:\^\*|:hôn:)/gi)},"B-) :đeo kính: :deo kinh:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f913.png",shortname:"B-)",description:"Đeo kính",regex:new RegExp(/(B-\))/gi)},"$_$ $.$ :tiền: :tien:":{icon:"//static-znews.zadn.vn/images/icons/emojione/1f911.png",shortname:"$_$",description:"Tiền",regex:new RegExp(/\B(\$_\$|\$\.\$)/gi)}},autoCompleteEmoji=function(e){e.textcomplete([{match:/\B([$|[|:|;|>|<|^|=]([_\[\]\-+$'\w\)\(]*))$/,search:function(i,e){var n=[],t=[];$.each(emojiStrategy,function(e,t){-1<e.indexOf(i.toLowerCase())&&n.push(e)}),3<=i.length&&(n.sort(function(e,t){return e.length>t.length}),t.sort()),e(n.concat(t))},template:function(e){var t='<img class="emojione" src="'+emojiStrategy[e].icon+'"> ';return t+=emojiStrategy[e].description},replace:function(e){return emojiStrategy[e].shortname},index:1}],{maxCount:15})},renderEmoticonGuide=function(t,i){var n=$("<div>",{class:"emoticon-list"}),o=$("<ul>");return _.each(emojiStrategy,function(e){!0===e.common?o.append('<li class="common" title="'+e.description+'"><i class="emojione" style="background-image: url('+e.icon+')">'+e.shortname+"</i></li>"):o.append('<li title="'+e.description+'"><i class="emojione" style="background-image: url('+e.icon+')">'+e.shortname+"</i></li>")}),o.append('<li title="Xem tất cả" class="expand"><span class="ti-more"></span></li>'),n.append(o),t&&0<t.length&&n.find("li").on("click",function(e){$(this).hasClass("expand")?($(this).remove(),n.addClass("expanded")):_insertCharacter(t," "+$(this).text()+" "),"function"==typeof i&&i()}),n},convertTextToEmoji=function(e){if(e){var t=e;return _.each(emojiStrategy,function(e){t=t.replace(e.regex,'<i class="emojione" style="background-image: url('+e.icon+');"></i>')}),t}},removeEmoticonText=function(e){if(e)return e.replace(/\[(cười chảy nước mắt|nháy mắt|vui|yêu|hehe|ôm một cái|không biết nói gì|chán|suy nghĩ|đỏ mặt|lo lắng|bực mình|tức giận|ngạc nhiên|khóc)\]/gi,"")},MIN_COMMENT_LENGTH=5,PREVIEW_COMMENTS_COUNT=5,COMMENTS_PER_PAGE=50,TEXT_COMMENT_INPUT=window.TEXT_COMMENT_INPUT||"Bạn nghĩ gì về tin này?",TEXT_COMMENT_SUBMIT=window.TEXT_COMMENT_SUBMIT||"Gửi bình luận",TEXT_LIST_LABEL=window.TEXT_LIST_LABEL||"Ý kiến bạn đọc",TEXT_LIKE="",TEXT_DISLIKE="";"article"==getPageType()&&"page-video"!=$("body").attr("id")&&new Article,(SCRIPTS=window.SCRIPTS||[]).push(function(){new Utilities});var SCRIPTS,URL_BASED="https://static-znews.zadn.vn/images/icons/weather/v1/",LOCATIONS={hanoi:"Hà Nội",tphochiminh:"Tp. Hồ Chí Minh",danang:"Đà Nẵng",angiang:"An Giang",bacgiang:"Bắc Giang",backan:"Bắc Kạn",baclieu:"Bạc Liêu",bacninh:"Bắc Ninh",bentre:"Bến Tre",binhdinh:"Bình Định",binhduong:"Bình Dương",binhphuoc:"Bình Phước",binhthuan:"Bình Thuận",camau:"Cà Mau",cantho:"Cần Thơ",caobang:"Cao Bằng",daklak:"Đắk Lắk",daknong:"Đắk Nông",dienbien:"Điện Biên",dongnai:"Đồng Nai",dongthap:"Đồng Tháp",gialai:"Gia Lai",hagiang:"Hà Giang",hanam:"Hà Nam",hatinh:"Hà Tĩnh",haiduong:"Hải Dương",haiphong:"Hải Phòng",haugiang:"Hậu Giang",hoabinh:"Hòa Bình",hungyen:"Hưng Yên",khanhhoa:"Khánh Hòa",kiengiang:"Kiên Giang",kontum:"Kon Tum",laichau:"Lai Châu",lamdong:"Lâm Đồng",langson:"Lạng Sơn",laocai:"Lào Cai",longan:"Long An",namdinh:"Nam Định",nghean:"Nghệ An",ninhbinh:"Ninh Bình",ninhthuan:"Ninh Thuận",phutho:"Phú Thọ",phuyen:"Phú Yên",quangbinh:"Quảng Bình",quangnam:"Quảng Nam",quangngai:"Quảng Ngãi",quangninh:"Quảng Ninh",quangtri:"Quảng Trị",soctrang:"Sóc Trăng",sonla:"Sơn La",tayninh:"Tây Ninh",thaibinh:"Thái Bình",thainguyen:"Thái Nguyên",thanhhoa:"Thanh Hóa",thuathienhue:"Thừa Thiên Huế",tiengiang:"Tiền Giang",travinh:"Trà Vinh",tuyenquang:"Tuyên Quang",vinhlong:"Vĩnh Long",vinhphuc:"Vĩnh Phức",vungtau:"Vũng Tàu",yenbai:"Yên Bái"},WEATHER_ICONS={rain:"rain.png",chancerain:"rain.png",tstorms:"storms.png",chancetstorms:"storms.png",cloudy:"cloudy.png",mostlycloudy:"cloudy.png",partlycloudy:"hazy.png",sunny:"sunny.png",clear:"clear.png",partlysunny:"clear.png",mostlysunny:"clear.png",flurries:"flurries.png",chanceflurries:"flurries.png",snow:"snow.png",chancesnow:"snow.png",sleet:"snow.png",chancesleet:"snow.png",windy:"flurries.png",hazy:"flurries.png",fog:"flurries.png"};(SCRIPTS=window.SCRIPTS||[]).push(function(){function l(e,t){DBLOCAL.insert("poll-"+e,t),$.ajax({url:"//api.news.zing.vn/public/v2/submit/poll",type:"POST",data:{id:e,option:t}}).done(function(e){if(1==e.error)warn("submit poll error");else{var t="percentage"===e.data.display_type?"percent_votes":"count_votes";!function(e){var t=$("[voteid="+e.idPoll+"]"),i=t.find(".option-item"),n=e.options;t.find(".number-votes strong").text(1e3<e.countVote?Math.round(e.countVote/100)/10+"k":e.countVote),i.find(".line-success").hide(),t.find(".show-more-poll").hide(),t.find(".box-poll-options").addClass("show-full-options");for(var o=0;o<i.length;o++){var a=$("<div>",{class:"layer-percent"}).css({width:n[o].percent_votes+"%"}),r=$("<strong>",{class:"result-option"}).text(e.isPercentage?n[o].percent_votes+"%":n[o].count_votes);e.isPercentage&&$(i[o]).addClass("is-percent"),$(i[o]).prepend(a).prepend(r).addClass("disable");var s=DBLOCAL.load("poll-"+e.idPoll);Number(s)===n[o].id&&$(i[o]).addClass("isChose")}}({idPoll:e.data.id,countVote:e.data.count_votes,options:sortArrObjByProperty(e.data.options,t),isPercentage:"percentage"===e.data.display_type})}})}function c(i){var e=DBLOCAL.load("poll-"+i.idPoll),t=$("<li>",{class:"option-item"}),n=$("<p>",{class:"content-option"}).append($("<span>").text(i.number)).append(i.content);if(t.append(n),!i.isEnable||e){var o="percentage"===i.displayType,a=$("<div>",{class:"layer-percent"}).css({width:i.percent+"%"}),r=$("<strong>",{class:"result-option"}).text(o?i.percent+"%":i.countVote);Number(e)===i.id&&t.addClass("isChose"),o&&t.addClass("is-percent"),t.prepend(a).append(r).addClass("disable")}else{var s=$("<span>",{class:"line-success"});t.append(s),t.on("click",function(e){var t;e.preventDefault(),t=function(){$(".line-success").removeClass("active"),s.addClass("active"),(Boolean(u)&&u!==i.id||!Boolean(u))&&(clearTimeout(d),d=setTimeout(function(){debug("WidgetPoll: submit option: "+i.id),l(i.idPoll,i.id)},2800)),u=i.id},ME.isLoggedInZalo?t():ME.loginZalo(!1,t)})}return t}function o(e){var t=$("<ul>",{class:"box-poll-options"}),i=$("<div>",{class:"box-widget-poll side-bar"}),n=$('<header class="header-poll"><img src="//static-znews.zadn.vn/images/logo_zing_noborder.svg" /></header>'),o=$("<p>",{class:"question-content-poll"}).text(e.questionContent),a=$('<p class="number-votes"><strong>'+(1e3<e.countVotes?Math.round(e.countVotes/100)/10+"k":e.countVotes)+"</strong> người đã bình chọn</p>");e.isShowTotal||a.addClass("hide"),i.append($("<div>",{class:"bg-poll"}).css({backgroundImage:"url("+e.cover+")"}));for(var r=0;r<e.options.length;r++)t.append(c({isEnable:e.isEnable,number:r+1+". ",idPoll:e.id,displayType:e.displayType,id:e.options[r].id,content:e.options[r].name,percent:e.options[r].percent_votes,countVote:e.options[r].count_votes}));if(5<e.options.length){i.addClass("preview");var s=$("<span>",{class:"show-more-poll"}).text("Xem thêm lựa chọn khác");s.on("click",function(){t.addClass("show-full-options"),s.hide()}),t.append(s)}return i.append(n).append(o).append(t).append(a),i}var d=null,u=0,a={};!function(){for(var e=$(".widget-poll"),t=0;t<e.length;t++){var i=e[t].getAttribute("voteid");i&&(a[i]=e[t],$.ajax({url:"//api.news.zing.vn/public/v2/getPoll?id="+i,type:"GET"}).done(function(e){if(1!=e.error){var t=a[e.data.id];if(t){var i="percentage"===e.data.display_type?"percent_votes":"count_votes",n=o({id:e.data.id,questionContent:e.data.question,isEnable:e.data.is_enabled,isShowTotal:e.data.is_show_count,countVotes:e.data.count_votes,cover:e.data.cover||"//static-znews.zadn.vn/images/bg_poll.jpg",displayType:e.data.display_type,options:sortArrObjByProperty(e.data.options,i)});$(t).html(n[0]),$(window).resize()}}}))}}()}),window.ZA&&ZA.getVisitorID&&ZA.getVisitorID(function(e){info("ZA USER ID = "+e),ME.setUserId(e),DBLOCAL.insert("__uid",e),DBLOCAL.insert("__zaver",ZA.version)});var CLICK_SOURCE,scrollTimer,_adRenderTimer,_adRenderTime,fullbackground=!1,GA_SENT=0,FOCUS_TIMER=$.now(),lastScrollPosition=0;if(window.PRELOAD?loadPlugin(PRELOAD,runInitializingScripts):runInitializingScripts(),$(document).ready(function(){if(info("Document ready"),window.INIT_TIMER){var e=(new Date).getTime()-INIT_TIMER.getTime();event("Document Ready",{label:getPageType(),value:e}),window.za&&za.trackEvent("rdts",e)}"home"===getPageType()&&initTrackers($(".news-coverage"),!0),"category"===getPageType()&&initTrackers($("#news-latest .section-sidebar .section.topic"),!0),initTrackers(),initNativeAds();var n=$("#searchbox"),o=n.find("input[type=text]");o.keydown(function(e){27==e.which&&o.blur().val("")}),$(window).on("click",function(){n.hasClass("active")&&n.removeClass("active")}),n.on("click",function(e){e.stopPropagation()}),n.submit(function(e){if(e.preventDefault(),o=$('#searchbox input[type="text"]'),!n.hasClass("active"))return n.addClass("active"),void setTimeout(function(){o.focus()},500);var t=window.location.origin,i=$.trim(o.val());return""!==i?(t+="/"+(i=i.replace(/\s+/gi,"-"))+"-tim-kiem.html",window.location.href=t):(n.toggleClass("active"),o.blur().val("")),!1});var t=$(".category-popup");$(".category-menu .more").click(function(){0==t.length&&(t=$("<div>",{class:"category-popup"}).html('<div class="page-wrapper"><nav class="category-menu">'+$(".category-menu").html()+"</nav></div>"),$("#zing-header").append(t),t.on("click",function(){t.stop().toggleClass("active"),$(".category-menu .more").toggleClass("active")})),$(this).stop().toggleClass("active"),t.stop().toggleClass("active")})}),$(document).on("DOMContentLoaded",function(){if(info("DOM Content Loaded"),window.INIT_TIMER){var e=(new Date).getTime()-INIT_TIMER.getTime();event("DOM Content Loaded",{label:getPageType(),value:e})}}),$(window).on("load",function(){if(info("Window loaded"),window.INIT_TIMER){var e=(new Date).getTime()-INIT_TIMER.getTime();e<15e3?(event("Page Loaded",{label:getPageType(),value:e}),window.za&&za.trackEvent("ldts",e)):event("Page Failed to Loaded (>15s)",{label:getPageType(),value:e})}$(".section-sidebar").each(function(e,t){var i=$(t),n=i.find(".scrollfixed");if(0<n.length){var o=i.offset().top,a=i.height(),r=35<=$("#section-latest .section-content > .article-list .article-item").length;if("home"===getPageType()&&1<n.length&&r){info("znews --> handle scroll fixed for two banners");var s=$("#section-latest .section-content > .article-list .article-item").eq(30).offset().top,l=n.eq(0),c=n.eq(1);return c.css({position:"absolute",top:s-o+"px",left:0}),l.scrollToFixed({marginTop:70,offset:!0,limit:function(){return s-600-10},preAbsolute:function(){l.addClass("un-scroll")},unfixed:function(){l.hasClass("un-scroll")&&(l.css({top:s-o-600-20+"px",left:0}),l.removeClass("un-scroll"))}}),void c.scrollToFixed({marginTop:70,offset:!0,limit:function(){return o+a-600},preAbsolute:function(){c.addClass("fixed-bottom")},postAbsolute:function(){c.removeClass("fixed-bottom")}})}info("znews --> handle scroll fixed for one banner");var d=n.eq(n.length-1);d.scrollToFixed({marginTop:70,limit:function(){return o+a-600},preAbsolute:function(){d.addClass("fixed-bottom")},postAbsolute:function(){d.removeClass("fixed-bottom")}})}}),"function"==typeof window.onPageLoad&&onPageLoad()}).on("blur",function(){FOCUS_TIMER=$.now()}).on("focus",function(){15<=Math.floor(($.now()-FOCUS_TIMER)/6e4)&&window.location.reload(!0)}).on("resize",function(){$(document).width()<1024?$("#fullBg").hide():$("#fullBg").show()}),!validateOrigin()){var site_origin=window.top.location.host;window.top.location.href="//news.zing.vn/"+window.location.pathname+"#redirected_"+site_origin}if(!0!==window.disableCleanURL&&!isInApp&&window.history&&window.history.replaceState){var cleanURL=window.location.href.replace(/#.*$/,"");window.history.replaceState(null,null,cleanURL),debug("--> clean url: "+cleanURL)}if($(window).on("load",function(){function t(i){var o;!1!==DEVICE.focused?(o=function(e,t){e?warn("Highlight --> error retrieve playlist",e):0<u.length?function e(t){if(0==u.length)return void a();h=u.shift();if(!t&&function(e){if(s)return!1;var t=DBLOCAL.load("highlight");t||(t="");return 0<=t.search(e.id)}(h))return void e(t);!function(e){var t="function"==typeof e;if(c)return t&&e();0==l.length&&((l=$("<div>",{id:"highlight"})).append('<div class="header"></div><div class="video"><div class="spinner"></div></div>'),l.find(".header").append('<p class="actions"><a href="#" class="btnClose">Đóng <span class="ti-close"></span></a></p>'),l.find(".btnClose").on("click",function(e){e.preventDefault(),a()}),$("body").append(l));r.hide(),l.addClass("highlight--active"),c=!0,t&&setTimeout(e,600)}(function(){l.find("> .video").html(h.content.replace("<video ","<video muted ")),new AdtimaPlayer(l.find("video, iframe"),{videoId:h.id,popPlayer:!1,autoplay:!0,muted:!0!==t,hover:!0,inview:!1,noads:!0,minimumTracking:3e3,isHideControls:!0,isHideBoxUnmute:!0,isHighlight:!0,tracking:{url:h.link,catename:h.catename},eventTracking:{s3:function(){event("Highlight reach 3s",{category:"Highlight Video",label:h.title,isInteraction:!1}),n(h)},s10:function(e){event("Highlight reach 10s",{category:"Highlight Video",label:h.title,isInteraction:!1})},s30:function(){event("Highlight reach 30s",{category:"Highlight Video",label:h.title,isInteraction:!1})},s60:function(){event("Highlight reach 60s",{category:"Highlight Video",label:h.title,isInteraction:!1})},completed:function(){event("Highlight completed",{category:"Highlight Video",label:h.title,isInteraction:!1})}},title:h.title,blocking:!1,controller:{popup:!1},onTracked:function(){},onEnded:function(){e(t)}})})}(i):debug("Highlight --> no video to play")},$.ajax({url:"//api.news.zing.vn/api/mobile/ban-tin-highlight.json?rand="+Math.floor((new Date).getTime()/1e4),dataType:"json"}).done(function(e){if(e.data&&0<e.data.length){for(var t=0;t<e.data.length;t++){var i=e.data[t];i.link=i.link.replace("http:",window.location.protocol),i.content=i.content.replace(/http:/gi,window.location.protocol),i.cover=i.cover.replace("http:",window.location.protocol),i.catename=convertId(i.cateparent);var n=new Date(1e3*(parseInt(i.time)-25200)).getTime();d<=n&&u.push(i);break}o(null,u)}else"function"==typeof o&&o("Chưa có bản tin nào")}).fail(function(){"function"==typeof o&&o("Có lỗi khi lấy dữ liệu")})):debug("Highlight --> Window not in focused -> won't autoplay")}function n(e){log("Highlight --> mark item as watched: #"+e.id);var t=DBLOCAL.load("highlight");(t=t||"").search(e.id)<0&&(t+=e.id+","),DBLOCAL.insert("highlight",t)}function a(){l.removeClass("highlight--active"),setTimeout(function(){l.hide(),l.find(".video").html('<div class="spinner"></div>'),l.remove(),$(".overlay").remove(),l=$("#highlight"),r.show(),n(h)},200),c=!1}var r,s=0<=window.location.hash.search("highlight=true")||0<=window.location.search.search("highlight=true"),e=new Date,l=$("#highlight"),c=!1,d=new Date(e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" 00:00").getTime(),u=[],h=null;this.getPlaylist=function(){return u},this.getNextItem=function(){if(0<u.length)return u[0]},s&&debug("Highlight --> highlight test mode enabled"),$(document).width()<1024||(-420==e.getTimezoneOffset()?"video"!=getPageType()&&!0!==window.disableHighlightVideo&&"page-video"!=$("body").attr("id")?(r=$('<div id="btnHighlight" class="morning"><a href="#" title="Xem bản tin sáng"><span class="ti-shine"></span></a></div>'),$("body").append(r),r.find("a").on("click",function(e){e.preventDefault(),event("User clicks button highlight",{category:"Highlight Video"}),t(!0)}),r.show(),$(".the-article").hasClass("status-live")||t(!1)):debug("Highlight --> page disable highlight video"):debug("Highlight --> user is not in timezone -> widget highlight ignored"))}),$(document).ready(function(){"home"===getPageType()&&$(document).keydown(function(t){if(t.ctrlKey&&t.shiftKey&&75==t.keyCode){if(!window.ZaloLoginWidget)return;ME.showCatesForY(),$("body").removeClass("god-mode"),$(".ctr-mask").remove(),$(".ctr").remove(),$("body").toggleClass("mode-ghost"),$("body").hasClass("mode-ghost")&&(info("ENABLE ADMIN MODE"),$.ajax({url:"https://api.news.zing.vn/public/v2/trendctr",dataType:"json",xhrFields:{withCredentials:!0}}).success(function(e){var a=e.data;a&&($("#section-featured .article-item, #section-multimedia .article-item").each(function(e,t){var i=$(t),n=i.attr("data-tracker")+"_"+i.attr("article-id");if(n&&a[n]){var o=.9*a[n]/10;i.append('<div class="ctr-mask" style="background-color:rgba(210,0,0,'+o+');">'+a[n]+"%</div>")}}),$(".article-item").each(function(e,t){var i=$(t),n=i.attr("article-id"),o=a["all_"+n];if(o){i.find(".article-thumbnail").append('<span class="ctr">'+o+"%</span>")}}))}))}if(t.ctrlKey&&t.shiftKey&&76==t.keyCode){if(!window.ZaloLoginWidget)return;$("body").removeClass("mode-ghost"),$(".ctr").remove(),$(".ctr-mask").remove(),$("body").toggleClass("god-mode"),$("body").hasClass("god-mode")&&(info("ENABLE GOD MODE"),$.ajax({url:"https://api.news.zing.vn/public/v2/trendctr",dataType:"json",xhrFields:{withCredentials:!0}}).success(function(e){var a=e.data;a&&$(".article-item").each(function(e,t){var i=$(t),n=i.attr("data-tracker");if(n&&a[n]){var o=.9*a[n]/20;i.append('<div class="ctr-mask" style="background-color:rgba(0, 47, 117,'+o+');">'+a[n]+"%</div>")}})}).fail(function(e,t,i){}))}if(t.ctrlKey&&(49==t.keyCode||50==t.keyCode)){if(!window.ZaloLoginWidget)return;$.ajax({url:"https://api.news.zing.vn/public/v2/trendctr",dataType:"json",xhrFields:{withCredentials:!0}}).success(function(e){e.data&&(49==t.keyCode&&($("body").removeClass("alt-2"),$("body").toggleClass("alt-1")),50==t.keyCode&&($("body").removeClass("alt-1"),$("body").toggleClass("alt-2")))}).fail(function(e,t,i){})}})}),"search"==getPageType()){$('input[type="radio"]').on("change",function(){$("#search-filter li").removeClass("active");var e=$(this).parents("li");e.addClass("active"),e.find("#custom_date_filter").focus().click()}),$("#custom_date_filter").on("change",function(){applySearchFilter()});var currentRange=$.trim($("#custom_date_filter").val());$(".groupLayout li").on("click",function(){$(this).hasClass("active")||($(".groupLayout li").removeClass("active"),$(this).addClass("active"),0<$(this).find(".ti-layout-grid2-alt").length?($(".article-list").removeClass("listing-layout2"),$(".article-list").addClass("grid-layout")):($(".article-list").removeClass("grid-layout"),$(".article-list").addClass("listing-layout2")),window.Waypoint&&Waypoint.refreshAll())}),loadPlugin([{id:"moment",js:"//static-znews.zadn.vn/bower_components/moment/min/moment.min.js"},{id:"datepicker",js:"//static-znews.zadn.vn/bower_components/jquery-date-range-picker/dist/jquery.daterangepicker.min.js",css:"//static-znews.zadn.vn/bower_components/jquery-date-range-picker/dist/daterangepicker.min.css"}],function(){$("#custom_date_filter").dateRangePicker({autoClose:!0,separator:" - ",format:"DD/MM/YYYY",startOfWeek:"Monday",showTopbar:!1,monthSelect:!0,yearSelect:!0,startDate:"08/08/2013"}).bind("datepicker-change",function(e,t){var i=$.trim(t.value);""!=i&&i!=currentRange&&window.applySearchFilter&&applySearchFilter()})})}
//# sourceMappingURL=znews-dist.js.map